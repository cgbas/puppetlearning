
m = ls('/Machines',returnMap='true')

f = open_file("name;machinetype;nmtype;listenaddress;listenport;domain", tmp_script)
for token in m:
    print '___'+token+'___'
    cd('/Machines/'+token)
    type = get_attribute_value('Type')
    cd('NodeManager/'+token)

    listenAddress = get_attribute_value('ListenAddress')

    add_index_entry(f, [domain+'/'+token,type,get_attribute_value('NMType'),listenAddress,str(get_attribute_value('ListenPort')),domain])

f.close()
report_back_success()
