<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.8
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-Oracle+WebLogic+-2F+Fusion+Middleware+puppet+module+V2">Oracle WebLogic / Fusion Middleware puppet module V2</h1>

<p><a href="https://travis-ci.org/biemond/biemond-orawls"><img
src="https://travis-ci.org/biemond/biemond-orawls.svg?branch=master"></a>
<img src="https://img.shields.io/puppetforge/v/biemond/orawls.svg"> <img
src="https://img.shields.io/puppetforge/f/biemond/orawls.svg"> <img
src="http://img.shields.io/puppetforge/dt/biemond/orawls.svg"> <a
href="https://codeclimate.com/github/biemond/biemond-orawls"><img
src="https://codeclimate.com/github/biemond/biemond-orawls/badges/gpa.svg"></a>
<a
href="https://coveralls.io/github/biemond/biemond-orawls?branch=master"><img
src="https://coveralls.io/repos/biemond/biemond-orawls/badge.svg?branch=master&service=github"></a></p>

<p>Install, configures and manages WebLogic version 10.3 - 12.2.1</p>

<p>This module should work for all Linux &amp; Solaris versions like RedHat,
CentOS, Ubuntu, Debian, Suse SLES, OracleLinux, Solaris 10,11 sparc / x86</p>

<p>Only for Puppet &gt;= 4.3 and this module uses the latest puppet 4 features
like</p>
<ul><li>
<p>Strong data typing</p>
</li><li>
<p>Internal hiera/lookup module data</p>
</li><li>
<p>uses Facts array</p>
</li><li>
<p>epp templating instead of erb</p>
</li><li>
<p>puppet 4 ruby functions</p>
</li></ul>

<p>For Puppet 3, 4 you have to use the latest 1.x version of this orawls
module</p>

<p>source code is located at <a
href="https://github.com/biemond/biemond-orawls/tree/puppet4">puppet4
branch</a></p>

<h2 id="label-Author">Author</h2>

<p>Edwin Biemond email biemond at gmail dot com</p>

<p><a href="http://biemond.blogspot.com">biemond.blogspot.com</a></p>

<p><a href="https://github.com/biemond/biemond-orawls">Github homepage</a></p>

<h2 id="label-Contributors">Contributors</h2>

<p>Special thanks to all the contributors</p>

<p>More: <a
href="https://github.com/biemond/biemond-orawls/graphs/contributors">github.com/biemond/biemond-orawls/graphs/contributors</a></p>

<h2 id="label-Support">Support</h2>

<p>If you need support, checkout the <a
href="https://www.enterprisemodules.com/shop/products/puppet-wls_install-module">wls_install</a>
and <a
href="https://www.enterprisemodules.com/shop/products/puppet-wls_config-module">wls_config</a>
modules from <a href="https://www.enterprisemodules.com/">Enterprise
Modules</a></p>

<p><a href="https://www.enterprisemodules.com"><img
src="https://www.enterprisemodules.com/images/puppet-logo.png"></a></p>

<h2 id="label-Dependencies">Dependencies</h2>
<ul><li>
<p>hajee/easy_type &gt;=0.10.0</p>
</li><li>
<p>adrien/filemapper &gt;= 1.1.1</p>
</li><li>
<p>reidmv/yamlfile &gt;=0.2.0</p>
</li><li>
<p>fiddyspence/sleep =&gt; 1.1.2</p>
</li><li>
<p>puppetlabs/stdlib =&gt; 4.9.0</p>
</li></ul>

<h2 id="label-Complete+vagrant+examples">Complete vagrant examples</h2>
<ul><li>
<p>Docker with WebLogic 12.1.3 Cluster <a
href="https://github.com/biemond/docker-weblogic-puppet">docker-weblogic-puppet</a></p>
</li><li>
<p>WebLogic 11g Reference implementation, the vagrant test case for full
working WebLogic 10.3.6 cluster example <a
href="https://github.com/biemond/biemond-orawls-vagrant-puppet4">biemond-orawls-vagrant-puppet4</a></p>
</li><li>
<p>WebLogic 12.2.1.2 MT multi tenancy / Puppet 4 Reference implementation, the
vagrant test case for full working WebLogic 12.2.1 cluster example <a
href="https://github.com/biemond/biemond-orawls-vagrant-12.2.1-puppet4">biemond-orawls-vagrant-12.2.1-puppet4</a></p>
</li><li>
<p>WebLogic 12.2.1.2 infra (JRF + JRF restricted), the vagrant test case for
full working WebLogic 12.2.1 infra cluster example with WebTier (Oracle
HTTP Server) <a
href="https://github.com/biemond/biemond-orawls-vagrant-12.2.1-infra-puppet4">biemond-orawls-vagrant-12.2.1-infra-puppet4</a></p>
</li><li>
<p>WebLogic 12.2.1.2 infra (JRF + JRF restricted), the vagrant test case for
full working WebLogic 12.2.1 infra SOA Suite/BAM/OSB cluster example <a
href="https://github.com/biemond/biemond-orawls-vagrant-12.2.1-infra-soa-puppet4">biemond-orawls-vagrant-12.2.1-infra-soa-puppet</a></p>
</li><li>
<p>WebLogic OHS webtier standalone, the vagrant test case for full working
Webtier 12.1.2 and 12.2.1 <a
href="https://github.com/biemond/biemond-orawls-vagrant-ohs-puppet4">biemond-orawls-vagrant-ohs-puppet4</a></p>
</li><li>
<p>Reference OIM / OAM with WebTier, Webgate &amp; Oracle Unified Directory,
the vagrant test case for Oracle Identity Manager &amp; Oracle Access
Manager 11.1.2.3 example <a
href="https://github.com/biemond/biemond-orawls-vagrant-oim_oam-puppet4">biemond-orawls-vagrant-oim_oam-puppet</a></p>
</li><li>
<p>Reference OIM / OAM Cluster, the vagrant test case for Oracle Identity
Manager &amp; Oracle Access Manager 11.1.2.3 cluster example <a
href="https://github.com/biemond/biemond-orawls-vagrant-oim_oam_cluster">biemond-orawls-vagrant-oim_oam_cluster</a></p>
</li><li>
<p>Oracle Forms, Reports 11.1.1.7 &amp; 11.1.2 Reference implementation, the
vagrant test case <a
href="https://github.com/biemond/biemond-orawls-vagrant-11g-forms-puppet4">biemond-orawls-vagrant-11g-forms-puppet4</a></p>
</li></ul>

<h2 id="label-Orawls+WebLogic+Features">Orawls WebLogic Features</h2>
<ul><li>
<p><a href="#weblogic">Installs WebLogic</a>, version 10g, 11g, 12c ( 12.1.1,
12.1.2, 12.1.3, 12.2.1, 12.2.1.1 + FMW infrastructure editions )</p>
</li><li>
<p><a href="#bsu">Apply a BSU patch</a> on a Middleware home ( &lt; 12.1.2 )</p>
</li><li>
<p><a href="#opatch">Apply a OPatch</a> on a Middleware home ( &gt;= 12.1.2 )
or a Oracle product home</p>
</li><li>
<p><a href="#domain">Create a WebLogic domain</a></p>
</li><li>
<p><a href="#packdomain">Pack a WebLogic domain</a></p>
</li><li>
<p><a href="#copydomain">Copy a WebLogic domain</a> to a other node with SSH,
unpack and enroll to a nodemanager</p>
</li><li>
<p><a href="#jsse">JSSE</a> Java Secure Socket Extension support</p>
</li><li>
<p><a href="#default_override">Override the default file location, applicable
for running as non-root user</a></p>
</li><li>
<p><a href="#identity">Custom Identity and Trust Store support</a></p>
</li><li>
<p><a href="#urandom">Linux low on entropy or urandom fix</a></p>
</li><li>
<p><a href="#nodemanager">Startup a nodemanager</a></p>
</li><li>
<p><a href="#control">start or stop AdminServer, Managed or a Cluster</a></p>
</li><li>
<p><a href="#storeuserconfig">StoreUserConfig</a> for storing WebLogic
Credentials and using in WLST</p>
</li><li>
<p><a href="#Dynamictargetting">Dynamic targetting</a> by using the notes
field in WebLogic for resource targetting</p>
</li><li>
<p>12.2.1 Multi Tenancy features</p>
</li></ul>

<h3 id="label-Fusion+Middleware+Features+11g+-26+12c">Fusion Middleware Features 11g &amp; 12c</h3>
<ul><li>
<p>installs <a href="#fmw">FMW</a> software(add-on) to a middleware home, like
OSB,SOA Suite, Oracle Identity &amp; Access Management, Oracle Unified
Directory, WebCenter Portal + Content</p>
</li><li>
<p><a href="#webtier">WebTier</a> Oracle HTTP server Standalone and Collocated</p>
</li><li>
<p><a href="#configure-oracle-http-server">Configure Oracle HTTP Server</a></p>
</li><li>
<p><a href="#fmwcluster">OSB, SOA Suite</a> with BPM and BAM Cluster
configuration support ( convert single osb/soa/bam servers to clusters and
migrate 11g OPSS to the database )</p>
</li><li>
<p><a href="#fmwclusterjrf">ADF/JRF support</a>, Assign JRF libraries to a
Server or Cluster target</p>
</li><li>
<p><a href="#oimconfig">OIM IDM</a> / OAM 11.1.2.3 configurations with Oracle
OHS OAM WebGate, Also it has Cluster support for OIM OAM</p>
</li><li>
<p><a href="#instance">OUD</a> OUD Oracle Unified Directory install, WebLogic
domain, instances creation &amp; <a href="#oud_control">OUD control</a></p>
</li><li>
<p><a href="#forms">Forms/Reports</a> Oracle Forms &amp; Reports 11.1.1.7,
11.1.2 or 12.2.1</p>
</li><li>
<p><a href="#Webcenter">WC, WCC, WCS</a> Webcenter portal, content, sites 11g
or 12.2.1</p>
</li><li>
<p><a href="#fmwlogdir">Change FMW log</a> location of a managed server</p>
</li><li>
<p><a href="#resourceadapter">Resource Adapter</a> plan and entries for AQ,
DB, MQ, FTP, File and JMS</p>
</li></ul>

<h2 id="label-Wls+types+and+providers">Wls types and providers</h2>

<p>This will use WLST to retrieve the current state and to the changes. With
WebLogic 12.2.1 we can also use the rest management api&#39;s, it&#39;s
already working in this module but we will slowly support this for all wls
types</p>
<ul><li>
<p><a href="#wls_setting">wls_setting</a>, set the default wls parameters for
the other types and also used by puppet resource</p>
</li><li>
<p><a href="#wls_adminserver">wls_adminserver</a> control the adminserver or
subscribe to changes</p>
</li><li>
<p><a href="#wls_managedserver">wls_managedserver</a> control the managed
server,cluster or subscribe to changes</p>
</li><li>
<p><a href="#wls_ohsserver">wls_ohsserver</a> control the ohs standalone
server or subscribe to changes</p>
</li><li>
<p><a href="#wls_domain">wls_domain</a></p>
</li><li>
<p><a href="#wls_deployment">wls_deployment</a></p>
</li><li>
<p><a href="#wls_domain">wls_domain</a></p>
</li><li>
<p><a href="#wls_group">wls_group</a></p>
</li><li>
<p><a href="#wls_role">wls_role</a></p>
</li><li>
<p><a href="#wls_user">wls_user</a></p>
</li><li>
<p><a href="#wls_authentication_provider">wls_authentication_provider</a></p>
</li><li>
<p><a href="#wls_identity_asserter">wls_identity_asserter</a></p>
</li><li>
<p><a href="#wls_machine">wls_machine</a></p>
</li><li>
<p><a href="#wls_server">wls_server</a></p>
</li><li>
<p><a href="#wls_server_channel">wls_server_channel</a></p>
</li><li>
<p><a href="#wls_server_tlog">wls_server_tlog</a></p>
</li><li>
<p><a href="#wls_cluster">wls_cluster</a></p>
</li><li>
<p><a href="#wls_migratable_target">wls_migratable_target</a></p>
</li><li>
<p><a href="#wls_singleton_service">wls_singleton_service</a></p>
</li><li>
<p><a href="#wls_virtual_host">wls_virtual_host</a></p>
</li><li>
<p><a href="#wls_workmanager_constraint">wls_workmanager_constraint</a></p>
</li><li>
<p><a href="#wls_workmanager">wls_workmanager</a></p>
</li><li>
<p><a href="#wls_datasource">wls_datasource</a></p>
</li><li>
<p><a href="#wls_multi_datasource">wls_multi_datasource</a></p>
</li><li>
<p><a href="#wls_foreign_jndi_provider">wls_foreign_jndi_provider </a></p>
</li><li>
<p>[wls_foreign_jndi_provider _link](#wls_foreign_jndi_provider _link)</p>
</li><li>
<p><a href="#wls_file_persistence_store">wls_file_persistence_store</a></p>
</li><li>
<p><a href="#wls_jdbc_persistence_store">wls_jdbc_persistence_store</a></p>
</li><li>
<p><a href="#wls_jmsserver">wls_jmsserver</a></p>
</li><li>
<p><a href="#wls_safagent">wls_safagent</a></p>
</li><li>
<p><a href="#wls_jms_module">wls_jms_module</a></p>
</li><li>
<p><a href="#wls_jms_quota">wls_jms_quota</a></p>
</li><li>
<p><a href="#wls_jms_sort_destination_key">wls_jms_sort_destination_key</a></p>
</li><li>
<p><a href="#wls_jms_subdeployment">wls_jms_subdeployment</a></p>
</li><li>
<p><a href="#wls_jms_queue">wls_jms_queue</a></p>
</li><li>
<p><a href="#wls_jms_topic">wls_jms_topic</a></p>
</li><li>
<p><a href="#wls_jms_security_policy">wls_jms_security_policy</a></p>
</li><li>
<p><a href="#wls_jms_connection_factory">wls_jms_connection_factory</a></p>
</li><li>
<p><a href="#wls_jms_template">wls_jms_template</a></p>
</li><li>
<p><a href="#wls_jms_bridge_destination">wls_jms_bridge_destination</a></p>
</li><li>
<p><a href="#wls_messaging_bridge">wls_messaging_bridge</a></p>
</li><li>
<p><a href="#wls_saf_remote_context">wls_saf_remote_context</a></p>
</li><li>
<p><a href="#wls_saf_error_handler">wls_saf_error_handler</a></p>
</li><li>
<p><a href="#wls_saf_imported_destination">wls_saf_imported_destination</a></p>
</li><li>
<p><a
href="#wls_saf_imported_destination_object">wls_saf_imported_destination_object</a></p>
</li><li>
<p><a href="#wls_foreign_server">wls_foreign_server</a></p>
</li><li>
<p><a href="#wls_foreign_server_object">wls_foreign_server_object</a></p>
</li><li>
<p><a href="#wls_mail_session">wls_mail_session</a></p>
</li></ul>

<p>12.1.3 Coherence &amp; Dynamic clusters - <a
href="#wls_coherence_cluster">wls_coherence_cluster</a> - <a
href="#wls_coherence_server">wls_coherence_server</a> - <a
href="#wls_server_template">wls_server_template</a> - <a
href="#wls_dynamic_cluster">wls_dynamic_cluster</a></p>

<p>12.2.1.1 Multitenancy MT - <a
href="#wls_virtual_target">wls_virtual_target</a> - <a
href="#wls_resource_group">wls_resource_group</a> - <a
href="#wls_resource_group_template">wls_resource_group_template</a> - <a
href="#wls_resource_group_template_deployment">wls_resource_group_template_deployment</a>
- <a href="#wls_domain_partition">wls_domain_partition</a> - <a
href="#wls_domain_partition_control">wls_domain_partition_control</a> - <a
href="#wls_domain_partition_resource_group">wls_domain_partition_resource_group</a>
- <a
href="#wls_domain_partition_resource_group_deployment">wls_domain_partition_resource_group_deployment</a></p>

<h2 id="label-Domain+creation+options+-28Dev+or+Prod+mode-29">Domain creation options (Dev or Prod mode)</h2>

<p>all templates creates a WebLogic domain, logs the domain creation output</p>

<p>For all WebLogic or FMW versions - domain &#39;standard&#39; -&gt; a
default WebLogic - domain &#39;adf&#39; -&gt; JRF + EM + Coherence (12.1.2,
12.1.3, 12.2.1) + OWSM (12.1.2, 12.1.3, 12.2.1) + JAX-WS Advanced + Soap
over JMS (12.1.2, 12.1.3, 12.2.1) - domain &#39;osb&#39; -&gt; OSB + JRF +
EM + OWSM + ESS ( optional with 12.1.3 ) - domain &#39;osb_soa&#39; -&gt;
OSB + SOA Suite + BAM + JRF + EM + OWSM + ESS ( optional with 12.1.3 ) -
domain &#39;osb_soa_bpm&#39; -&gt; OSB + SOA Suite + BAM + BPM + JRF + EM +
OWSM + ESS ( optional with 12.1.3 ) - domain &#39;soa&#39; -&gt; SOA Suite
+ BAM + JRF + EM + OWSM + ESS ( optional with 12.1.3 ) - domain
&#39;soa_bpm&#39; -&gt; SOA Suite + BAM + BPM + JRF + EM + OWSM + ESS (
optional with 12.1.3 ) - domain &#39;bam&#39; -&gt; BAM ( only with soa
suite installation) - domain &#39;ohs_standalone&#39; -&gt; Standalone
webtier (HTTP Server) 12.1.2, 12.1.3 and 12.1.4</p>

<p>11g - domain &#39;wc_wcc_bpm&#39; -&gt; WC (webcenter) + WCC ( Content ) +
BPM + JRF + EM + OWSM - domain &#39;wc&#39; -&gt; WC (webcenter) + JRF + EM
+ OWSM</p>

<p>11gR2 - domain &#39;oim&#39; -&gt; IDM, OIM (Oracle Identity Manager) + OAM
( Oracle Access Manager) - domain &#39;oud&#39; -&gt; OUD (Oracle Unified
Directory)</p>

<p>12.2.1.1 - domain &#39;adf_restricted&#39; -&gt; only for 12.2.1 (no
RCU/DB) JRF + EM + Coherence + JAX-WS Advanced + Soap over JMS</p>

<h2 id="label-Puppet+master+with+orawls+module+key+points">Puppet master with orawls module key points</h2>

<p>it should work on every PE or opensource puppet master, customers and I
successfully tested orawls on PE 3.0, 3.1, 3.2, 3.3. See also the puppet
master vagrant box</p>

<p>For Running orawls module without root/elevated privileges, please use
v3.7.0 or higher</p>

<p>But when it fails you can do the following actions. - Check the time
difference/timezone between all the puppet master and agent machines. -
Update orawls and its dependencies on the puppet master. - After adding or
refreshing the easy_type or orawls modules you need to restart all the PE
services on the puppet master (this will flush the PE cache) and always do
a puppet agent run on the Puppet master - To solve this error “no such file
to load – easy_type” you need just to do a puppet run on the puppet master
when it is still failing you can move the easy_type module to its primary
module location ( /etc/puppetlabs/puppet/module ) - Move orawls and
easy_type to the primary module location <a
href="https://tickets.puppetlabs.com/browse/PUP-1515">pup-1515</a> when the
Puppet master loads a Type, it searches the environment that the agent
requested. When it loads providers for that type, it searches the default
environment instead of the one the agent requested.</p>

<h2 id="label-Orawls+WebLogic+Facter">Orawls WebLogic Facter</h2>

<p>Contains WebLogic Facter which displays the following - Middleware homes -
Oracle Software - BSU &amp; OPatch patches - Domain configuration (
everything of a WebLogic Domain like deployments, datasource, JMS, SAF)</p>

<h2 id="label-Override+the+default+Oracle+operating+system+user">Override the default Oracle operating system user</h2>

<p>default this orawls module uses oracle as weblogic install user you can
override this by setting the following fact
&#39;override_weblogic_user&#39;, like override_weblogic_user=wls or set
FACTER_override_weblogic_user=wls</p>

<h2 id="label-3Ca+name-3D-22default_override-22-3EOverride+the+default+file+location+where+orawls+saves+domain+-26+other+settings+-28Applicable+for+running+as+non-root+user-29">&lt;a name=“default_override”&gt;Override the default file location where orawls saves domain &amp; other settings (Applicable for running as non-root user)</h2>

<p>default this orawls module saves the domain &amp; connection related
setting in /etc in yaml format you can override this by setting the
following 2 facts:</p>

<p>for domain information: <a
href="custom_path">override_wls_domains_file=</a>/wls_domains.yaml or set
<a
href="custom_path">FACTER_override_wls_domains_file=</a>/wls_domains.yaml</p>

<p>for settings infortmation: <a
href="custom_path">override_wls_setting_file=</a>/wls_setting.yaml or set
<a
href="custom_path">FACTER_override_wls_setting_file=</a>/wls_setting.yaml</p>

<p>for ora inst location: <a href="custom_path">override_orainst_dir=</a> or
set <a href="custom_path">FACTER_override_orainst_dir=</a></p>

<p>Set $puppet_os_user on some of the manifests or set this hiera variable
puppet_os_user</p>

<h2 id="label-Override+the+default+WebLogic+domain+folder">Override the default WebLogic domain folder</h2>

<p>Set the following hiera parameters for weblogic.pp</p>

<pre class="code ruby"><code class="ruby">wls_domains_dir:   &#39;/opt/oracle/wlsdomains/domains&#39;
wls_apps_dir:      &#39;/opt/oracle/wlsdomains/applications&#39;</code></pre>

<p>Set the following wls_domains_dir &amp; wls_apps_dir parameters in -
weblogic.pp - domain.pp - control.pp - packdomain.pp - copydomain.pp -
fmwcluster.pp - fmwclusterjrf.pp</p>

<h2 id="label-3Ca+name-3D-22jsse-22-3EJava+Secure+Socket+Extension+support-3C-2Fa-3E">&lt;a name=“jsse”&gt;Java Secure Socket Extension support&lt;/a&gt;</h2>

<p>Requires the JDK 7 or 8 JCE extension</p>

<pre class="code ruby"><code class="ruby">jdk7::install7{ &#39;jdk-8u72-linux-x64&#39;:
    version                     =&gt; &quot;8u72&quot; ,
    full_version                =&gt; &quot;jdk1.8.0_72&quot;,
    alternatives_priority       =&gt; 18001,
    x64                         =&gt; true,
    download_dir                =&gt; &quot;/var/tmp/install&quot;,
    urandom_java_fix            =&gt; true,
    rsa_key_size_fix            =&gt; true,
    cryptography_extension_file =&gt; &quot;jce_policy-8.zip&quot;,
    source_path                 =&gt; &quot;/software&quot;,
}


jdk7::install7{ &#39;jdk1.7.0_51&#39;:
    version                     =&gt; &quot;7u51&quot; ,
    full_version                =&gt; &quot;jdk1.7.0_51&quot;,
    alternatives_priority       =&gt; 18000,
    x64                         =&gt; true,
    download_dir                =&gt; &quot;/var/tmp/install&quot;,
    urandom_java_fix            =&gt; true,
    rsa_key_size_fix            =&gt; true,                          &lt;!--
    cryptography_extension_file =&gt; &quot;UnlimitedJCEPolicyJDK7.zip&quot;,  &lt;!---
    source_path                 =&gt; &quot;/software&quot;,
}</code></pre>

<p>To enable this in orawls you can set the jsse_enabled on the following
manifests - nodemanager.pp - domain.pp - control.pp</p>

<h2 id="label-3Ca+name-3D-22identity-22-3EEnterprise+security+with+Custom+Identity+and+Trust+store-3C-2Fa-3E">&lt;a name=“identity”&gt;Enterprise security with Custom Identity and Trust store&lt;/a&gt;</h2>

<p>in combination with JDK7 JCE policy, ORAUTILS and WebLogic JSSE you can use
your own certificates</p>

<p>just generates all the certificates and set the following hiera variables.</p>

<pre class="code ruby"><code class="ruby"># custom trust
orautils::customTrust:             true
orautils::trustKeystoreFile:       &#39;/vagrant/truststore.jks&#39;
orautils::trustKeystorePassphrase: &#39;welcome&#39;

# used by nodemanager, control and domain creation
wls_custom_trust:                  &amp;wls_custom_trust              true
wls_trust_keystore_file:           &amp;wls_trust_keystore_file       &#39;/vagrant/truststore.jks&#39;
wls_trust_keystore_passphrase:     &amp;wls_trust_keystore_passphrase &#39;welcome&#39;

wls_setting_instances:
  &#39;default&#39;:
    user:                      oracle
    weblogic_home_dir:         &#39;/opt/oracle/middleware11g/wlserver_10.3&#39;
    connect_url:               &#39;t3s://10.10.10.10:7002&#39;
    weblogic_user:             &#39;weblogic&#39;
    weblogic_password:         &#39;Welcome01&#39;
    custom_trust:              *wls_custom_trust
    trust_keystore_file:       *wls_trust_keystore_file
    trust_keystore_passphrase: *wls_trust_keystore_passphrase

# create a standard domain with custom identity for the adminserver
domain_instances:
  &#39;Wls1036&#39;:
    domain_template:                       &quot;standard&quot;
    development_mode:                      false
    log_output:                            *logoutput
    custom_identity:                       true
    custom_identity_keystore_filename:     &#39;/vagrant/identity_admin.jks&#39;
    custom_identity_keystore_passphrase:   &#39;welcome&#39;
    custom_identity_alias:                 &#39;admin&#39;
    custom_identity_privatekey_passphrase: &#39;welcome&#39;

nodemanager_instances:
  &#39;nodemanager&#39;:
    log_output:                            *logoutput
    custom_identity:                       true
    custom_identity_keystore_filename:     &#39;/vagrant/identity_admin.jks&#39;
    custom_identity_keystore_passphrase:   &#39;welcome&#39;
    custom_identity_alias:                 &#39;admin&#39;
    custom_identity_privatekey_passphrase: &#39;welcome&#39;
    nodemanager_address:                   *domain_adminserver_address

server_instances:
  &#39;wlsServer1&#39;:
    ensure:                                &#39;present&#39;
    arguments:                             &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer1.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer1_err.out&#39;
    listenaddress:                         &#39;10.10.10.100&#39;
    listenport:                            &#39;8001&#39;
    logfilename:                           &#39;/var/log/weblogic/wlsServer1.log&#39;
    machine:                               &#39;Node1&#39;
    sslenabled:                            &#39;1&#39;
    ssllistenport:                         &#39;8201&#39;
    sslhostnameverificationignored:        &#39;1&#39;
    jsseenabled:                           &#39;1&#39;
    custom_identity:                       &#39;1&#39;
    custom_identity_keystore_filename:     &#39;/vagrant/identity_node1.jks&#39;
    custom_identity_keystore_passphrase:   &#39;welcome&#39;
    custom_identity_alias:                 &#39;node1&#39;
    custom_identity_privatekey_passphrase: &#39;welcome&#39;
    trust_keystore_file:                   *wls_trust_keystore_file
    trust_keystore_passphrase:             *wls_trust_keystore_passphrase</code></pre>

<h2 id="label-3Ca+name-3D-22urandom-22-3ELinux+low+on+entropy+or+urandom+fix-3C-2Fa-3E">&lt;a name=“urandom”&gt;Linux low on entropy or urandom fix&lt;/a&gt;</h2>

<p>can cause certain operations to be very slow. Encryption operations need
entropy to ensure randomness. Entropy is generated by the OS when you use
the keyboard, the mouse or the disk.</p>

<p>If an encryption operation is missing entropy it will wait until enough is
generated.</p>

<p>three options - use rngd service (include
<strong>orawls::urandomfix</strong> class) - set java.security in JDK (
jre/lib/security in my jdk7 module ) - set
-Djava.security.egd=file:/dev/./urandom param</p>

<h2 id="label-Oracle+binaries+files+and+alternate+download+location">Oracle binaries files and alternate download location</h2>

<p>Some manifests like orawls:weblogic bsu opatch fmw supports an alternative
mountpoint for the big oracle setup/install files. When not provided it
uses the files folder located in the orawls puppet module else you can use
$puppet_download_mnt_point =&gt; - “/mnt” - “/vagrant” -
“puppet:///modules/orawls/” (default) - “puppet:///middleware/”</p>

<p>when the files are also accesiable locally then you can also set
$remote_file =&gt; false this will not move the files to the download
folder, just extract or install</p>

<h2 id="label-WebLogic+requirements">WebLogic requirements</h2>

<p>Operating System settings like User, Group, ULimits and kernel parameters
requirements</p>

<p>install the following module to set the kernel parameters puppet module
install fiddyspence-sysctl</p>

<p>install the following module to set the user limits parameters puppet
module install erwbgy-limits</p>

<pre class="code ruby"><code class="ruby"> sysctl { &#39;kernel.msgmnb&#39;:                 ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;65536&#39;,}
 sysctl { &#39;kernel.msgmax&#39;:                 ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;65536&#39;,}
 sysctl { &#39;kernel.shmmax&#39;:                 ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;2147483648&#39;,}
 sysctl { &#39;kernel.shmall&#39;:                 ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;2097152&#39;,}
 sysctl { &#39;fs.file-max&#39;:                   ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;344030&#39;,}
 sysctl { &#39;net.ipv4.tcp_keepalive_time&#39;:   ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;1800&#39;,}
 sysctl { &#39;net.ipv4.tcp_keepalive_intvl&#39;:  ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;30&#39;,}
 sysctl { &#39;net.ipv4.tcp_keepalive_probes&#39;: ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;5&#39;,}
 sysctl { &#39;net.ipv4.tcp_fin_timeout&#39;:      ensure =&gt; &#39;present&#39;, permanent =&gt; &#39;yes&#39;, value =&gt; &#39;30&#39;,}

 class { &#39;limits&#39;:
   config =&gt; {&#39;*&#39;       =&gt; {  &#39;nofile&#39;  =&gt; { soft =&gt; &#39;2048&#39;   , hard =&gt; &#39;8192&#39;,   },},
              &#39;oracle&#39;  =&gt; {  &#39;nofile&#39;  =&gt; { soft =&gt; &#39;65535&#39;  , hard =&gt; &#39;65535&#39;,  },
                              &#39;nproc&#39;   =&gt; { soft =&gt; &#39;2048&#39;   , hard =&gt; &#39;2048&#39;,   },
                              &#39;memlock&#39; =&gt; { soft =&gt; &#39;1048576&#39;, hard =&gt; &#39;1048576&#39;,},},},
   use_hiera =&gt; false,}</code></pre>

<p>create a WebLogic user and group</p>

<pre class="code ruby"><code class="ruby">group { &#39;dba&#39; :
  ensure =&gt; present,
}

# http://raftaman.net/?p=1311 for generating password
user { &#39;oracle&#39; :
  ensure     =&gt; present,
  groups     =&gt; &#39;dba&#39;,
  shell      =&gt; &#39;/bin/bash&#39;,
  password   =&gt; &#39;$1$DSJ51vh6$4XzzwyIOk6Bi/54kglGk3.&#39;,
  home       =&gt; &quot;/home/oracle&quot;,
  comment    =&gt; &#39;Oracle user created by Puppet&#39;,
  managehome =&gt; true,
  require    =&gt; Group[&#39;dba&#39;],
}</code></pre>

<h2 id="label-Necessary+Hiera+setup+for+global+vars+and+Facter">Necessary Hiera setup for global vars and Facter</h2>

<p>if you don&#39;t want to provide the same parameters in all the defines and
classes</p>

<p>hiera.yaml main configuration</p>

<pre class="code ruby"><code class="ruby"> ---
 :backends: yaml
 :yaml:
   :datadir: /vagrant/puppet/hieradata
 :hierarchy:
   - &quot;%{::fqdn}&quot;
   - common</code></pre>

<p>vagrantcentos64.example.com.yaml</p>

<pre class="code ruby"><code class="ruby"> ---</code></pre>

<p>common.yaml</p>

<pre class="code ruby"><code class="ruby">---
# global WebLogic vars
wls_oracle_base_home_dir: &amp;wls_oracle_base_home_dir &quot;/opt/oracle&quot;
wls_weblogic_home_dir:    &amp;wls_weblogic_home_dir    &quot;/opt/oracle/middleware12c/wlserver&quot;
wls_middleware_home_dir:  &amp;wls_middleware_home_dir  &quot;/opt/oracle/middleware12c&quot;
wls_version:              &amp;wls_version              12212

# global OS vars
wls_source:               &amp;wls_source               &quot;/software&quot;
wls_jdk_home_dir:         &amp;wls_jdk_home_dir         &quot;/usr/java/latest&quot;
wls_log_dir:              &amp;wls_log_dir              &quot;/var/log/weblogic&quot;

wls_domains_dir:          &amp;wls_domains_dir          &#39;/opt/oracle/wlsdomains/domains&#39;
wls_apps_dir:             &amp;wls_apps_dir             &#39;/opt/oracle/wlsdomains/applications&#39;

wls_jsse_enabled:         true</code></pre>

<h2 id="label-WebLogic+Module+Usage">WebLogic Module Usage</h2>

<h3 id="label-weblogic">weblogic</h3>

<p><strong>orawls::weblogic</strong> installs WebLogic <a
href="0-6">10.3.</a>, 12.1.1, 12.1.2, 12.1.3, 12.2.1, 12.2.1.2</p>

<pre class="code ruby"><code class="ruby">include orawls::weblogic

orawls::weblogic::version:                   *wls_version  # 1036|1211|1212|1213|1221|12212
orawls::weblogic::filename:                  &#39;fmw_12.2.1.2.0_wls.jar&#39;
orawls::weblogic::log_output:                true
orawls::weblogic::jdk_home_dir:              *wls_jdk_home_dir
orawls::weblogic::oracle_base_home_dir:      *wls_oracle_base_home_dir
orawls::weblogic::puppet_download_mnt_point: *wls_source
orawls::weblogic::remote_file:               false
orawls::weblogic::wls_domains_dir:           *wls_domains_dir
orawls::weblogic::wls_apps_dir:              *wls_apps_dir
orawls::weblogic::middleware_home_dir:       *wls_middleware_home_dir</code></pre>

<p>12.1.3 infra</p>

<pre class="code ruby"><code class="ruby">orawls::weblogic::version:                   *wls_version
orawls::weblogic::filename:                  &#39;fmw_12.2.1.2.0_infrastructure.jar&#39;
orawls::weblogic::fmw_infra:                 true
orawls::weblogic::log_output:                true
orawls::weblogic::jdk_home_dir:              *wls_jdk_home_dir
orawls::weblogic::oracle_base_home_dir:      *wls_oracle_base_home_dir
orawls::weblogic::puppet_download_mnt_point: *wls_source
orawls::weblogic::remote_file:               false
orawls::weblogic::weblogic_home_dir:         *wls_weblogic_home_dir
orawls::weblogic::middleware_home_dir:       *wls_middleware_home_dir</code></pre>

<p>or with a bin file located on a share</p>

<pre class="code ruby"><code class="ruby">orawls::weblogic::version:                   1036
orawls::weblogic::filename:                  &quot;oepe-wls-indigo-installer-11.1.1.8.0.201110211138-10.3.6-linux32.bin&quot;
orawls::weblogic::fmw_infra:                 true
orawls::weblogic::log_output:                true
orawls::weblogic::jdk_home_dir:              *wls_jdk_home_dir
orawls::weblogic::oracle_base_home_dir:      *wls_oracle_base_home_dir
orawls::weblogic::puppet_download_mnt_point: &quot;/misc/tact/products/oracle/11g/fmw/wls/11.1.1.8&quot;
orawls::weblogic::remote_file:               true
orawls::weblogic::wls_domains_dir:           *wls_domains_dir
orawls::weblogic::wls_apps_dir:              *wls_apps_dir
orawls::weblogic::middleware_home_dir:       *wls_middleware_home_dir
orawls::weblogic::weblogic_home_dir:         &quot;/opt/weblogic/Middleware/wlserver_10.3&quot;</code></pre>

<h3 id="label-weblogic_type">weblogic_type</h3>

<p><strong>orawls::weblogic_type</strong> same as weblogic manifest/class but
now as define which supports multiple middleware home on same VM</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$weblogic_instances = hiera(&#39;weblogic_instances&#39;, {})
create_resources(&#39;orawls::weblogic_type&#39;,$weblogic_instances, $default_params)

weblogic_instances:
  &#39;home1&#39;:
    version:                     *wls_version
    filename:                    &#39;fmw_12.2.1.2.0_wls.jar&#39;
    middleware_home_dir:         *wls_middleware_home_dir
    log_output:                  true
    jdk_home_dir:                *wls_jdk_home_dir
    oracle_base_home_dir:        *wls_oracle_base_home_dir
    puppet_download_mnt_point:   &#39;/vagrant&#39;
    remote_file:                 true
    wls_domains_dir:             *wls_domains_dir
    wls_apps_dir:                *wls_apps_dir
    require:                     Jdk7::Install7[jdk-8u72-linux-x64]
  &#39;home2&#39;:
    version:                      *wls_version
    filename:                     &#39;fmw_12.2.1.2.0_wls.jar&#39;
    middleware_home_dir:          &#39;/opt/oracle/middleware12c_2&#39;
    log_output:                   true
    jdk_home_dir:                 *wls_jdk_home_dir
    oracle_base_home_dir:         *wls_oracle_base_home_dir
    puppet_download_mnt_point:    &#39;/vagrant&#39;
    remote_file:                  true
    wls_domains_dir:              *wls_domains_dir
    wls_apps_dir:                 *wls_apps_dir
    require:                      Jdk7::Install7[jdk-8u72-linux-x64]</code></pre>

<h3 id="label-opatch">opatch</h3>

<p><strong>orawls::opatch</strong> apply an OPatch on a Middleware home or a
Oracle product home</p>

<p>Most general parameters are derived from weblogic.pp, you don&#39;t need to
specify them again</p>

<pre class="code ruby"><code class="ruby">orawls::opatch {&#39;16175470&#39;:
  ensure                  =&gt; &quot;present&quot;,
  oracle_product_home_dir =&gt; &quot;/opt/oracle/middleware12c&quot;,
  patch_id                =&gt; 16175470,
  patch_file              =&gt; &quot;p16175470_121200_Generic.zip&quot;,
}</code></pre>

<p>Same configuration but then with Hiera</p>

<pre class="code ruby"><code class="ruby"><span class='gvar'>$default_params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='gvar'>$opatch_instances</span> <span class='op'>=</span> <span class='id identifier rubyid_hiera'>hiera</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>opatch_instances</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='id identifier rubyid_create_resources'>create_resources</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>orawls::opatch</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span><span class='gvar'>$opatch_instances</span><span class='comma'>,</span> <span class='gvar'>$default_params</span><span class='rparen'>)</span>
</code></pre>

<p>common.yaml</p>

<pre class="code ruby"><code class="ruby">---
opatch_instances:
  &#39;24910964&#39;:
    ensure:                   &#39;present&#39;
    oracle_product_home_dir:  *wls_middleware_home_dir
    patch_id:                 24910964
    patch_file:               &quot;p24910964_122120_Generic.zip&quot;</code></pre>

<h3 id="label-bsu">bsu</h3>

<p><strong>orawls::bsu</strong> apply or remove a WebLogic BSU Patch ( ensure
= present or absent )</p>

<p>Most general parameters are derived from weblogic.pp, you don&#39;t need to
specify them again</p>

<pre class="code ruby"><code class="ruby">orawls::bsu {&#39;BYJ1&#39;:
  ensure                  =&gt; &quot;present&quot;,
  middleware_home_dir     =&gt; &quot;/opt/oracle/middleware11gR1&quot;,
  weblogic_home_dir       =&gt; &quot;/opt/oracle/middleware11gR1/wlserver&quot;,
  jdk_home_dir            =&gt; &quot;/usr/java/jdk1.7.0_45&quot;,
  patch_id                =&gt; &quot;BYJ1&quot;,
  patch_file              =&gt; &quot;p17071663_1036_Generic.zip&quot;,
  os_user                 =&gt; &quot;oracle&quot;,
  os_group                =&gt; &quot;dba&quot;,
  download_dir            =&gt; &quot;/data/install&quot;,
  source                  =&gt; &quot;/vagrant&quot;,
  log_output              =&gt; false,
}


$default_params = {}
$bsu_instances = hiera(&#39;bsu_instances&#39;, {})
create_resources(&#39;orawls::bsu&#39;,$bsu_instances, $default_params)</code></pre>

<p>common.yaml</p>

<pre class="code ruby"><code class="ruby">---
bsu_instances:
  &#39;BYJ1&#39;:
     ensure                   &quot;present&quot;
     middleware_home_dir:     &quot;/opt/oracle/middleware11gR1&quot;
     weblogic_home_dir:       &quot;/opt/oracle/middleware11gR1/wlserver&quot;
     jdk_home_dir:            &quot;/usr/java/jdk1.7.0_45&quot;
     patch_id:                &quot;BYJ1&quot;
     patch_file:              &quot;p17071663_1036_Generic.zip&quot;
     os_user:                 &quot;oracle&quot;
     os_group:                &quot;dba&quot;
     download_dir:            &quot;/data/install&quot;
     source:                  &quot;/vagrant&quot;
     log_output:              false</code></pre>

<p>or when you set the defaults hiera variables</p>

<pre class="code ruby"><code class="ruby">---
bsu_instances:
  &#39;BYJ1&#39;:
     ensure                   &quot;present&quot;
     patch_id:                &quot;BYJ1&quot;
     patch_file:              &quot;p17071663_1036_Generic.zip&quot;
     log_output:              false</code></pre>

<h3 id="label-fmw">fmw</h3>

<p><strong>orawls::fmw</strong> installs FMW software (add-on) to a middleware
home like OSB,SOA Suite, WebTier (HTTP Server), Oracle Identity Management,
Web Center, Content + Sites</p>

<pre class="code ruby"><code class="ruby">Enum[&#39;adf&#39;,&#39;soa&#39;,&#39;soaqs&#39;,&#39;osb&#39;,&#39;wcc&#39;,&#39;wc&#39;,&#39;wcs&#39;,&#39;oim&#39;,&#39;oam&#39;,&#39;web&#39;,&#39;webgate&#39;,&#39;oud&#39;,&#39;mft&#39;,&#39;b2b&#39;,&#39;forms&#39;] fmw_product</code></pre>

<p>Most general parameters are derived from weblogic.pp, you don&#39;t need to
specify them again</p>

<pre class="code ruby"><code class="ruby">logoutput:                &amp;logoutput                true

wls_oracle_base_home_dir: &amp;wls_oracle_base_home_dir &quot;/opt/oracle&quot;
wls_weblogic_user:        &amp;wls_weblogic_user        &quot;weblogic&quot;
wls_weblogic_home_dir:    &amp;wls_weblogic_home_dir    &quot;/opt/oracle/middleware12c/wlserver&quot;
wls_middleware_home_dir:  &amp;wls_middleware_home_dir  &quot;/opt/oracle/middleware12c&quot;
wls_version:              &amp;wls_version              12212

# global OS vars
wls_os_user:              &amp;wls_os_user              &quot;oracle&quot;
wls_os_group:             &amp;wls_os_group             &quot;dba&quot;
wls_download_dir:         &amp;wls_download_dir         &quot;/var/tmp/install&quot;
wls_source:               &amp;wls_source               &quot;/software&quot;
wls_jdk_home_dir:         &amp;wls_jdk_home_dir         &quot;/usr/java/latest&quot;
wls_log_dir:              &amp;wls_log_dir              &quot;/var/log/weblogic&quot;

$default_params = {}
$fmw_installations = hiera(&#39;fmw_installations&#39;, {})
create_resources(&#39;orawls::fmw&#39;,$fmw_installations, $default_params)

# FMW installation on top of WebLogic 12.2.1
fmw_installations:
  &#39;webtier1221&#39;:
    fmw_product:               &quot;web&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_ohs_linux64_Disk1_1of1.zip&quot;
    oracle_base_home_dir:      *wls_oracle_base_home_dir
  &#39;soa1221&#39;:
    fmw_product:               &quot;soa&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_soa_Disk1_1of1.zip&quot;
    oracle_base_home_dir:      *wls_oracle_base_home_dir
    bpm:                       true
  &#39;osb1221&#39;:
    fmw_product:               &quot;osb&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_osb_Disk1_1of1.zip&quot;
    oracle_base_home_dir:      *wls_oracle_base_home_dir
  &#39;forms1221&#39;:
    fmw_product:               &quot;forms&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_fr_linux64_Disk1_1of1.zip&quot;
    oracle_base_home_dir:      *wls_oracle_base_home_dir
  &#39;wcc1221&#39;:
    fmw_product:               &quot;wcc&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_wccontent_Disk1_1of1.zip&quot;
    oracle_base_home_dir:      *wls_oracle_base_home_dir
  &#39;wc1221&#39;:
    fmw_product:               &quot;wc&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_wcportal_Disk1_1of1.zip&quot;
    oracle_base_home_dir:      *wls_oracle_base_home_dir
  &#39;wcs1221&#39;:
    fmw_product:               &quot;wcs&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_wcsites_Disk1_1of1.zip&quot;
    wcs_mode:                  &#39;sites&#39; # Enum[&#39;sites&#39;,&#39;examples&#39;,&#39;satellite&#39;]
    oracle_base_home_dir:      *wls_oracle_base_home_dir

# OHS standalone
fmw_installations:
  &#39;webtier1212&#39;:
    fmw_product:               &quot;web&quot;
    ohs_mode:                  &quot;standalone&quot;
    fmw_file1:                 &quot;fmw_12.2.1.2.0_ohs_linux64_Disk1_1of1.zip&quot;
    log_output:                true
    remote_file:               false
    version:                   *wls_version
    weblogic_home_dir:         *wls_weblogic_home_dir
    middleware_home_dir:       *wls_middleware_home_dir
    jdk_home_dir:              *wls_jdk_home_dir
    oracle_base_home_dir:      *wls_oracle_base_home_dir
    os_user:                   *wls_os_user
    os_group:                  *wls_os_group
    download_dir:              *wls_download_dir
    puppet_download_mnt_point: *wls_source

fmw_installations:
  &#39;webTierPS8&#39;:
    version:                 1111
    fmw_product:             &quot;web&quot;
    fmw_file1:               &quot;ofm_webtier_linux_11.1.1.9.0_64_disk1_1of1.zip&quot;
    oracle_base_home_dir:    *wls_oracle_base_home_dir
  &#39;forms11112&#39;:
    version:                 11112
    fmw_product:             &quot;forms&quot;
    fmw_file1:               &quot;V18772-01_1of4.zip&quot;
    fmw_file2:               &quot;V18772-01_2of4.zip&quot;
    fmw_file3:               &quot;V18772-01_3of4.zip&quot;
    fmw_file4:               &quot;V18772-01_4of4.zip&quot;
    oracle_base_home_dir:    *wls_oracle_base_home_dir
  &#39;forms1112&#39;:
    version:                 1112
    fmw_product:             &quot;forms&quot;
    fmw_file1:               &quot;ofm_frmrpts_linux_11.1.2.2.0_64_disk1_1of2.zip&quot;
    fmw_file2:               &quot;ofm_frmrpts_linux_11.1.2.2.0_64_disk1_2of2.zip&quot;
    oracle_base_home_dir:    *wls_oracle_base_home_dir</code></pre>

<h3 id="label-domain">domain</h3>

<p><strong>orawls::domain</strong> creates WebLogic domain like a standard |
OSB or SOA Suite | ADF | WebCenter | OIM or OAM or OUD</p>

<p>Most general parameters are derived from weblogic.pp, you don&#39;t need to
specify them again</p>

<p>optional override the default server arguments in the domain.py template
with java_arguments parameter</p>

<pre class="code ruby"><code class="ruby">wls_os_user:              &amp;wls_os_user              &quot;oracle&quot;
wls_weblogic_home_dir:    &amp;wls_weblogic_home_dir    &quot;/opt/oracle/middleware12c/wlserver&quot;
wls_middleware_home_dir:  &amp;wls_middleware_home_dir  &quot;/opt/oracle/middleware12c&quot;

wls_jsse_enabled:         &amp;wls_jsse_enabled         true
wls_log_dir:              &amp;wls_log_dir              &quot;/var/log/weblogic&quot;

# when you have just one domain on a server
domain_name:                &amp;domain_name                &quot;Wls1221&quot;
domain_wls_password:        &amp;domain_wls_password        &quot;weblogic1&quot;

domain_adminserver_address: &amp;domain_adminserver_address &quot;%{hiera(&#39;adminserver_address&#39;)}&quot;
domain_node1_address:       &amp;domain_node1_address       &quot;%{hiera(&#39;node1_address&#39;)}&quot;
domain_node2_address:       &amp;domain_node2_address       &quot;%{hiera(&#39;node2_address&#39;)}&quot;

# used by nodemanager, control and domain creation
wls_custom_trust:                  &amp;wls_custom_trust              true
wls_trust_keystore_file:           &amp;wls_trust_keystore_file       &#39;/vagrant/truststore.jks&#39;
wls_trust_keystore_passphrase:     &amp;wls_trust_keystore_passphrase &#39;welcome&#39;

$default = {}
$domain_instances = hiera(&#39;domain_instances&#39;, {})
create_resources(&#39;orawls::domain&#39;,$domain_instances, $default)</code></pre>

<p>vagrantcentos64.example.com.yaml</p>

<pre class="code ruby"><code class="ruby">---
domain_instances:
  &#39;Wls1221&#39;:
    domain_template:                       &quot;standard&quot;
    weblogic_home_dir:                     *wls_weblogic_home_dir
    domain_name:                           *domain_name
    development_mode:                      false
    adminserver_address:                   *domain_adminserver_address
    adminserver_ssl_port:                  7002
    custom_trust:                          *wls_custom_trust
    trust_keystore_file:                   *wls_trust_keystore_file
    trust_keystore_passphrase:             *wls_trust_keystore_passphrase
    custom_identity:                       true
    custom_identity_keystore_filename:     &#39;/vagrant/identity_admin.jks&#39;
    custom_identity_keystore_passphrase:   &#39;welcome&#39;
    custom_identity_alias:                 &#39;admin&#39;
    custom_identity_privatekey_passphrase: &#39;welcome&#39;
    weblogic_password:                     *domain_wls_password
    jsse_enabled:                          *wls_jsse_enabled
    log_dir:                               *wls_log_dir
  &#39;plain_Wls&#39;:
    domain_template:                       &quot;standard&quot;
    weblogic_home_dir:                     *wls_weblogic_home_dir
    domain_name:                           &quot;plain_Wls&quot;
    development_mode:                      false
    adminserver_address:                   *domain_adminserver_address
    adminserver_listen_on_all_interfaces:  true
    adminserver_port:                      7101
    nodemanager_port:                      5557
    nodemanager_secure_listener:           false
    weblogic_password:                     *domain_wls_password
    jsse_enabled:                          *wls_jsse_enabled
    log_dir:                               *wls_log_dir
    java_arguments:
        ADM:  &quot;-XX:PermSize=256m -XX:MaxPermSize=512m -Xms1024m -Xmx1024m&quot;</code></pre>

<p>ADF with and without RCU</p>

<pre class="code ruby"><code class="ruby">	domain_instances:
	  &#39;adf_domain&#39;:
	     # domain_template:          &quot;adf_restricted&quot;
	     domain_template:          &quot;adf&quot;
	     repository_database_url:  &quot;jdbc:oracle:thin:@wlsdb.example.com:1521/wlsrepos.example.com&quot;
	     repository_prefix:        &quot;DEV&quot;
	     repository_password:      &quot;Welcome01&quot;
	     repository_sys_password:  &quot;Welcome01&quot;
	     rcu_database_url:         &quot;wlsdb.example.com:1521:wlsrepos.example.com&quot;
	     domain_name:              *domain_name
	     development_mode:         true
	     log_output:               *logoutput
	     webtier_enabled:          true
	     adminserver_address:      *domain_adminserver_address
	     weblogic_password:        *domain_wls_password
	     jsse_enabled:             *wls_jsse_enabled
	     log_dir:                  *wls_log_dir

	domain_instances:
	  &#39;adf_domain&#39;:
	     domain_template:          &quot;adf_restricted&quot;
	     domain_name:              *domain_name
	     development_mode:         true
	     log_output:               *logoutput
	     webtier_enabled:          true
	     adminserver_address:      *domain_adminserver_address
	     weblogic_password:        *domain_wls_password
	     jsse_enabled:             *wls_jsse_enabled
	     log_dir:                  *wls_log_dir</code></pre>

<p>Standalone Webtier</p>

<pre class="code ruby"><code class="ruby">logoutput:                &amp;logoutput                true

wls_oracle_base_home_dir: &amp;wls_oracle_base_home_dir &quot;/opt/oracle&quot;
wls_weblogic_user:        &amp;wls_weblogic_user        &quot;weblogic&quot;
wls_weblogic_home_dir:    &amp;wls_weblogic_home_dir    &quot;/opt/oracle/middleware12c/wlserver&quot;
wls_middleware_home_dir:  &amp;wls_middleware_home_dir  &quot;/opt/oracle/middleware12c&quot;
wls_version:              &amp;wls_version              12212

# global OS vars
wls_os_user:              &amp;wls_os_user              &quot;oracle&quot;
wls_os_group:             &amp;wls_os_group             &quot;dba&quot;
wls_download_dir:         &amp;wls_download_dir         &quot;/var/tmp/install&quot;
wls_source:               &amp;wls_source               &quot;/software&quot;
wls_jdk_home_dir:         &amp;wls_jdk_home_dir         &quot;/usr/java/latest&quot;
wls_log_dir:              &amp;wls_log_dir              &quot;/var/log/weblogic&quot;

domain_name:                &amp;domain_name                &quot;Wls1221&quot;
domain_nodemanager_port:    &amp;domain_nodemanager_port    5556
domain_wls_password:        &amp;domain_wls_password        &quot;weblogic1&quot;

domain_adminserver_address: &amp;domain_adminserver_address &quot;10.10.10.36&quot;

domain_instances:
  &#39;Wls1221&#39;:
    version:                               *wls_version
    domain_template:                       &quot;ohs_standalone&quot;
    development_mode:                      false
    ohs_standalone_listen_address:         *domain_adminserver_address
    ohs_standalone_listen_port:            8180
    ohs_standalone_ssl_listen_port:        8181
    nodemanager_password:                  *domain_wls_password
    nodemanager_username:                  *wls_weblogic_user
    log_output:                            *logoutput
    weblogic_home_dir:                     *wls_weblogic_home_dir
    middleware_home_dir:                   *wls_middleware_home_dir
    jdk_home_dir:                          *wls_jdk_home_dir
    domain_name:                           *domain_name
    adminserver_address:                   *domain_adminserver_address
    weblogic_password:                     *domain_wls_password
    log_dir:                               *wls_log_dir
    wls_domains_dir:                       &#39;&#39;
    wls_apps_dir:                          &#39;&#39;
    os_user:                               *wls_os_user
    os_group:                              *wls_os_group
    download_dir:                          *wls_download_dir

nodemanager_instances:
  &#39;nodemanager&#39;:
    ohs_standalone:                        true
    log_output:                            *logoutput
    log_file:                              &#39;nodemanager_wls1221.log&#39;
    version:                               *wls_version
    weblogic_home_dir:                     *wls_weblogic_home_dir
    middleware_home_dir:                   *wls_middleware_home_dir
    jdk_home_dir:                          *wls_jdk_home_dir
    sleep:                                 21
    domain_name:                           *domain_name
    nodemanager_address:                   *domain_adminserver_address
    wls_domains_dir:                       &#39;&#39;
    os_user:                               *wls_os_user
    os_group:                              *wls_os_group
    download_dir:                          *wls_download_dir

# startup adminserver for extra configuration
control_instances:
  &#39;startOHS1server&#39;:
    domain_name:                 *domain_name
    server_type:                 &#39;ohs_standalone&#39;
    target:                      &#39;Server&#39;
    server:                      &#39;ohs1&#39;
    action:                      &#39;start&#39;
    log_output:                  *logoutput
    wls_domains_dir:             &#39;&#39;
    os_user:                     *wls_os_user
    os_group:                    *wls_os_group
    download_dir:                *wls_download_dir
    weblogic_home_dir:           *wls_weblogic_home_dir
    middleware_home_dir:         *wls_middleware_home_dir
    jdk_home_dir:                *wls_jdk_home_dir
    adminserver_address:         *domain_adminserver_address
    weblogic_password:           *domain_wls_password</code></pre>

<h3 id="label-packdomain">packdomain</h3>

<p><strong>orawls::packdomain</strong> pack a WebLogic Domain and add this to
the download folder</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$pack_domain_instances = hiera(&#39;pack_domain_instances&#39;, {})
create_resources(&#39;orawls::packdomain&#39;,$pack_domain_instances, $default_params)

# pack domains
pack_domain_instances:
  &#39;Wls1221&#39;:
     weblogic_home_dir:           *wls_weblogic_home_dir 
     domain_name:                 *domain_name
  &#39;plain&#39;:
     weblogic_home_dir:           *wls_weblogic_home_dir 
     domain_name:                 &quot;plain_Wls&quot;</code></pre>

<h3 id="label-copydomain">copydomain</h3>

<p><strong>orawls::copydomain</strong> copies a WebLogic domain with SSH or
from a share, unpack and enroll to a nodemanager</p>

<p>When using ssh (use_ssh = true) you need to setup ssh so you won&#39;t need
to provide a password</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$copy_instances = hiera(&#39;copy_instances&#39;, {})
create_resources(&#39;orawls::copydomain&#39;,$copy_instances, $default_params)

# copy domains to other nodes
copy_instances:
  &#39;wlsDomain&#39;:
     log_output:                *logoutput
     weblogic_home_dir:         *wls_weblogic_home_dir 
     domain_name:               *domain_name
     jsse_enabled:              *wls_jsse_enabled
     adminserver_address:       *domain_adminserver_address
     weblogic_user:             &#39;weblogic&#39;
     weblogic_password:         *domain_wls_password
     server_start_mode:         &#39;prod&#39;
     custom_trust:              *wls_custom_trust
     trust_keystore_file:       *wls_trust_keystore_file
     trust_keystore_passphrase: *wls_trust_keystore_passphrase</code></pre>

<h3 id="label-nodemanager">nodemanager</h3>

<p><strong>orawls::nodemanager</strong> start the nodemanager of a WebLogic
Domain or Middleware Home</p>

<p>Same configuration but then with Hiera ( need to have puppet &gt; 3.0 )</p>

<pre class="code ruby"><code class="ruby">$default = {}
$nodemanager_instances = hiera(&#39;nodemanager_instances&#39;, [])
create_resources(&#39;orawls::nodemanager&#39;,$nodemanager_instances, $default)

nodemanager_instances:
  &#39;nodemanager&#39;:
    weblogic_home_dir:                     *wls_weblogic_home_dir 
    log_file:                              &#39;nodemanager_wls1221.log&#39;
    extra_arguments:                       &#39;-Daa=1 -Dbb=2&#39;
    custom_trust:                          *wls_custom_trust
    trust_keystore_file:                   *wls_trust_keystore_file
    trust_keystore_passphrase:             *wls_trust_keystore_passphrase
    custom_identity:                       true
    custom_identity_keystore_filename:     &#39;/vagrant/identity_admin.jks&#39;
    custom_identity_keystore_passphrase:   &#39;welcome&#39;
    custom_identity_alias:                 &#39;admin&#39;
    custom_identity_privatekey_passphrase: &#39;welcome&#39;
    nodemanager_address:                   *domain_adminserver_address
    domain_name:                           *domain_name
    jsse_enabled:                          *wls_jsse_enabled
    sleep:                                 21
    properties:
      &#39;log_level&#39;:                         &#39;INFO&#39;
      &#39;log_count&#39;:                         &#39;2&#39;
      &#39;log_append&#39;:                        true
      &#39;log_formatter&#39;:                     &#39;weblogic.nodemanager.server.LogFormatter&#39;
      &#39;listen_backlog&#39;:                    60
  &#39;nodemanager_plain&#39;:
    weblogic_home_dir:                     *wls_weblogic_home_dir 
    log_file:                              &#39;nodemanager_plain.log&#39;
    nodemanager_address:                   *domain_adminserver_address
    nodemanager_port:                      5557
    domain_name:                           &quot;plain_Wls&quot;
    custom_trust:                          false
    custom_identity:                       false
    nodemanager_secure_listener:           false
    sleep:                                 21
    jsse_enabled:                          *wls_jsse_enabled</code></pre>

<h3 id="label-control">control</h3>

<p><strong>orawls::control</strong> start or stops the AdminServer,Managed
Server, OHS Standalone Server or a Cluster of a WebLogic Domain, this will
call the wls_managedserver, wls_adminserver and wls_ohsserver types</p>

<pre class="code ruby"><code class="ruby">$default = {}
$control_instances = hiera(&#39;control_instances&#39;, {})
create_resources(&#39;orawls::control&#39;,$control_instances, $default)

control_instances:
  &#39;startWLSAdminServer&#39;:
     weblogic_home_dir:           *wls_weblogic_home_dir 
     domain_name:                 *domain_name
     server_type:                 &#39;admin&#39;
     target:                      &#39;Server&#39;
     action:                      &#39;start&#39;
     custom_trust:                *wls_custom_trust
     trust_keystore_file:         *wls_trust_keystore_file
     trust_keystore_passphrase:   *wls_trust_keystore_passphrase
     jsse_enabled:                *wls_jsse_enabled
     adminserver_address:         *domain_adminserver_address
     weblogic_password:           *domain_wls_password                 
  &#39;startWLSAdminServer_plain&#39;:
     weblogic_home_dir:           *wls_weblogic_home_dir 
     domain_name:                 &#39;plain_Wls&#39;
     server_type:                 &#39;admin&#39;
     nodemanager_port:            5557
     nodemanager_secure_listener: false
     custom_trust:                false
     target:                      &#39;Server&#39;
     action:                      &#39;start&#39;
     jsse_enabled:                *wls_jsse_enabled
     adminserver_address:         *domain_adminserver_address
     weblogic_password:           *domain_wls_password</code></pre>

<h3 id="label-urandomfix">urandomfix</h3>

<p><strong>orawls::urandomfix</strong> Linux low on entropy or urandom fix can
cause certain operations to be very slow. Encryption operations need
entropy to ensure randomness. Entropy is generated by the OS when you use
the keyboard, the mouse or the disk.</p>

<p>If an encryption operation is missing entropy it will wait until enough is
generated.</p>

<p>three options - use rngd service (use this wls::urandomfix class) - set
java.security in JDK ( jre/lib/security in my jdk7 module ) - set
-Djava.security.egd=file:/dev/./urandom param</p>

<h3 id="label-storeuserconfig">storeuserconfig</h3>

<p><strong>orawls::storeuserconfig</strong> Creates WLST user config for WLST
, this way you don&#39;t need to know the weblogic password. when you set
the defaults hiera variables</p>

<pre class="code ruby"><code class="ruby">notify { &#39;class userconfig&#39;:}
$default_params = {}
$userconfig_instances = hiera(&#39;userconfig_instances&#39;, {})
create_resources(&#39;orawls::storeuserconfig&#39;,$userconfig_instances, $default_params)

userconfig_instances:
  &#39;Wls1221&#39;:
    user_config_dir:      &#39;/home/oracle&#39;
    weblogic_home_dir:    *wls_weblogic_home_dir 
    domain_name:          *domain_name
    adminserver_address:  *domain_adminserver_address
    weblogic_password:    *domain_wls_password</code></pre>

<h3 id="label-Dynamictargetting">Dynamictargetting</h3>

<p>Sometimes you do not know how many managed services you will have, due to
application scaling or other use cases. Since you do specify resources like
clusters and datasources in a more &#39;static&#39; way, there should be a
way to qualify a managed server as a target for such resources.</p>

<p>We use the notes field in WebLogic Server to accomplish this. Currently
implemented for the following resource types:</p>
<ul><li>
<p>wls_cluster</p>
</li><li>
<p>wls_datasource</p>
</li><li>
<p>wls_mail_session</p>
</li></ul>

<p>The way you use this, is by entering the resource name in the
server_parameter field on the wls_server type, and put the servers field to
&#39;inherited&#39; on the resource to be targeted.</p>

<p>Example:</p>

<pre class="code ruby"><code class="ruby">wls_server { &#39;wlsServer1&#39;:
  ensure                            =&gt; &#39;present&#39;,
  arguments                         =&gt; &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer1.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer1_err.out&#39;,
  jsseenabled                       =&gt; &#39;0&#39;,
  listenaddress                     =&gt; &#39;10.10.10.100&#39;,
  listenport                        =&gt; &#39;8001&#39;,
  listenportenabled                 =&gt; &#39;1&#39;,
  machine                           =&gt; &#39;Node1&#39;,
  sslenabled                        =&gt; &#39;0&#39;,
  tunnelingenabled                  =&gt; &#39;0&#39;,
  max_message_size                  =&gt; &#39;10000000&#39;,
  server_parameter                  =&gt; &#39;WebCluster, hrDs&#39;,
}

wls_cluster { &#39;WebCluster&#39;:
  ensure           =&gt; &#39;present&#39;,
  messagingmode    =&gt; &#39;unicast&#39;,
  migrationbasis   =&gt; &#39;consensus&#39;,
  servers          =&gt; [&#39;inherited&#39;],
  multicastaddress =&gt; &#39;239.192.0.0&#39;,
  multicastport    =&gt; &#39;7001&#39;,
}

wls_datasource { &#39;hrDS&#39;:
  ensure                           =&gt; &#39;present&#39;,
  connectioncreationretryfrequency =&gt; &#39;0&#39;,
  drivername                       =&gt; &#39;oracle.jdbc.xa.client.OracleXADataSource&#39;,
  extraproperties                  =&gt; [&#39;SendStreamAsBlob=true&#39;, &#39;oracle.net.CONNECT_TIMEOUT=10001&#39;],
  fanenabled                       =&gt; &#39;0&#39;,
  globaltransactionsprotocol       =&gt; &#39;TwoPhaseCommit&#39;,
  initialcapacity                  =&gt; &#39;2&#39;,
  initsql                          =&gt; &#39;None&#39;,
  jndinames                        =&gt; [&#39;jdbc/hrDS&#39;, &#39;jdbc/hrDS2&#39;],
  maxcapacity                      =&gt; &#39;15&#39;,
  mincapacity                      =&gt; &#39;1&#39;,
  rowprefetchenabled               =&gt; &#39;0&#39;,
  rowprefetchsize                  =&gt; &#39;48&#39;,
  secondstotrustidlepoolconnection =&gt; &#39;10&#39;,
  statementcachesize               =&gt; &#39;10&#39;,
  target                           =&gt; [&#39;inherited&#39;],
  targettype                       =&gt; [&#39;inherited&#39;],
  testconnectionsonreserve         =&gt; &#39;0&#39;,
  testfrequency                    =&gt; &#39;120&#39;,
  testtablename                    =&gt; &#39;SQL SELECT 1 FROM DUAL&#39;,
  url                              =&gt; &#39;jdbc:oracle:thin:@dbagent2.alfa.local:1521/test.oracle.com&#39;,
  user                             =&gt; &#39;hr&#39;,
  usexa                            =&gt; &#39;0&#39;,
}</code></pre>

<p>In the case of the wls_datasource type, the jdbc connection will be
targetted on the cluster if the managed server is in a cluster.</p>

<h3 id="label-Configure+Oracle+HTTP+Server">Configure Oracle HTTP Server</h3>

<p>You can configure OHS locations using
<strong>orawls::ohs::forwarder</strong> resource:</p>

<pre class="code ruby"><code class="ruby">ohs_forwarder_instances:
  &#39;/console&#39;:
      servers:    [&#39;10.10.10.10:7001&#39;]
      os_user:     *wls_os_user
      os_group:    *wls_os_group
      domain_dir: &#39;/opt/oracle/middleware12c/user_projects/domains/Wls1212&#39;
      require:     Orawls::Control[startOHS1server]
      notify:      Wls_ohsserver[reloadOHS1server]

# subscribe on a ohs change and restart the ohs server
osh_reload_domain:
  &#39;reloadOHS1server&#39;:
     ensure:                    &#39;running&#39;
     domain_name:               *domain_name
     server_name:               &#39;ohs1&#39;
     domain_path:               &#39;/opt/oracle/middleware12c/user_projects/domains/Wls1212&#39;
     os_user:                   *wls_os_user
     weblogic_home_dir:         *wls_weblogic_home_dir
     weblogic_user:             *wls_weblogic_user
     weblogic_password:         *domain_wls_password
     jdk_home_dir:              *wls_jdk_home_dir
     nodemanager_address:       *domain_adminserver_address
     nodemanager_port:          *domain_nodemanager_port
     refreshonly:               true</code></pre>

<p>Notify option is needed to OHS restart and load changes. Require is needed
because, without it, notify option may attempt to reload server before
it&#39;s running.</p>

<p>OHS will include all <strong>.conf</strong> files at
domain_path/config/fmwconfig/components/OHS/ server_name /mod_wl_ohs.d
folder.</p>

<h3 id="label-fmwlogdir">fmwlogdir</h3>

<p><strong>orawls::fmwlogdir</strong> Change a log folder location of a FMW
server</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$fmwlogdir_instances = hiera(&#39;fmwlogdir_instances&#39;, {})
create_resources(&#39;orawls::fmwlogdir&#39;,$fmwlogdir_instances, $default_params)

fmwlogdir_instances:
  &#39;AdminServer&#39;:
     server:               &#39;AdminServer&#39;
     weblogic_user:        *wls_weblogic_user
     weblogic_password:    *domain_wls_password
     adminserver_address:  *domain_adminserver_address
     log_dir:              *wls_log_dir
     require:              Orawls::Utils::Fmwclusterjrf[WebCluster]
  &#39;WebServer1&#39;:
     server:              &#39;WebServer1&#39;
     weblogic_user:        *wls_weblogic_user
     weblogic_password:    *domain_wls_password
     adminserver_address:  *domain_adminserver_address
     log_dir:              *wls_log_dir
     require:              Orawls::Utils::Fmwclusterjrf[WebCluster]</code></pre>

<h3 id="label-resourceadapter">resourceadapter</h3>

<p><strong>orawls::resourceadapter</strong> Add a Resource adapter plan for
File, FTP, AQ, MQ, DB or JMS with some entries when you set the defaults
hiera variables</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$resource_adapter_instances = hiera(&#39;resource_adapter_instances&#39;, {})
create_resources(&#39;orawls::resourceadapter&#39;,$resource_adapter_instances, $default_params)

resource_adapter_instances:
  &#39;JmsAdapter_hr&#39;:
    adapter_name:              &#39;JmsAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/JmsAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_JMS.xml&#39;
    adapter_entry:             &#39;eis/JMS/cf&#39;
    adapter_entry_property:    &#39;ConnectionFactoryLocation&#39;
    adapter_entry_value:       &#39;jms/cf&#39;
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address
  &#39;JmsAdapter_hr2&#39;:
    adapter_name:              &#39;JmsAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/JmsAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_JMS.xml&#39;
    adapter_entry:             &#39;eis/JMS/cf2&#39;
    adapter_entry_property:    &#39;ConnectionFactoryLocation&#39;
    adapter_entry_value:       &#39;jms/cf2&#39;
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address
  &#39;AqAdapter_hr&#39;:
    adapter_name:              &#39;AqAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/AqAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_AQ.xml&#39;
    adapter_entry:             &#39;eis/AQ/hr&#39;
    adapter_entry_property:    &#39;XADataSourceName&#39;
    adapter_entry_value:       &#39;jdbc/hrDS&#39;
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address
  &#39;DbAdapter_hr&#39;:
    adapter_name:              &#39;DbAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/DbAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_DB.xml&#39;
    adapter_entry:             &#39;eis/DB/hr&#39;
    adapter_entry_property:    &#39;XADataSourceName&#39;
    adapter_entry_value:       &#39;jdbc/hrDS&#39;
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address
  &#39;DbAdapter_hr2&#39;:
    adapter_name:              &#39;DbAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/DbAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_DB.xml&#39;
    adapter_entry:             &#39;eis/DB/hr2&#39;
    adapter_entry_property:    &#39;xADataSourceName&#39;
    adapter_entry_value:       &#39;jdbc/hrDS2&#39;
    log_output:                *logoutput
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address
  &#39;FTPAdapter_hr&#39;:
    adapter_name:              &#39;FtpAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/FtpAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_FTP.xml&#39;
    adapter_entry:             &#39;eis/FTP/xx&#39;
    adapter_entry_property:    &#39;FtpAbsolutePathBegin;FtpPathSeparator;Host;ListParserKey;Password;ServerType;UseFtps;Username;UseSftp&#39;
    adapter_entry_value:       &#39;/BDDC;/;l2-ibrfongen02.nl.rsg;UNIX;;unix;false;kim;false&#39;
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address
  &#39;FileAdapter_hr&#39;:
    adapter_name:              &#39;FileAdapter&#39;
    adapter_path:              &quot;/opt/oracle/middleware12c/soa/soa/connectors/FileAdapter.rar&quot;
    adapter_plan_dir:          &quot;/opt/oracle/middleware12c&quot;
    adapter_plan:              &#39;Plan_FILE.xml&#39;
    adapter_entry:             &#39;eis/FileAdapterXX&#39;
    adapter_entry_property:    &#39;ControlDir;IsTransacted&#39;
    adapter_entry_value:       &#39;/tmp/aaa;false&#39;
    domain_name:                *domain_name
    weblogic_password:          *domain_wls_password                 
    adminserver_address:        *domain_adminserver_address</code></pre>

<h3 id="label-fmwcluster">fmwcluster</h3>

<p><strong>orawls::utils::fmwcluster</strong> convert existing cluster to a
OSB or SOA suite cluster (BPM is optional) and also convert BAM to a BAM
cluster. This will also work for OIM / OAM cluster. The security store is
migrated to a database store during this conversion. To maintain a file
based store set a standalone hiera param “retain_security_file_store” to
true.</p>

<p>You first need to create some OSB, SOA or BAM clusters and add some managed
servers to these clusters for OSB 11g or SOA Suite 11g managed servers make
sure to also set the coherence arguments parameters</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$fmw_cluster_instances = hiera(&#39;fmw_cluster_instances&#39;, $default_params)
create_resources(&#39;orawls::utils::fmwcluster&#39;,$fmw_cluster_instances, $default_params)

# FMW 11g cluster
fmw_cluster_instances:
  &#39;soaCluster&#39;:
     domain_name:          &quot;soa_domain&quot;
     soa_cluster_name:     &quot;SoaCluster&quot;
     bam_cluster_name:     &quot;BamCluster&quot;
     osb_cluster_name:     &quot;OsbCluster&quot;
     log_output:           *logoutput
     bpm_enabled:          true
     bam_enabled:          true
     soa_enabled:          true
     osb_enabled:          true
     repository_prefix:    &quot;DEV&quot;
     weblogic_user:        *wls_weblogic_user
     weblogic_password:    *domain_wls_password
     adminserver_address:  *domain_adminserver_address

# FMW 12.1.3 cluster
fmw_cluster_instances:
  &#39;soaCluster&#39;:
    domain_name:          &quot;soa_domain&quot;
    soa_cluster_name:     &quot;SoaCluster&quot;
    bam_cluster_name:     &quot;BamCluster&quot;
    osb_cluster_name:     &quot;OsbCluster&quot;
    ess_cluster_name:     &quot;EssCluster&quot; # optional else ESS will be added to the soa cluster
    log_output:           *logoutput
    bpm_enabled:          true
    bam_enabled:          true
    soa_enabled:          true
    osb_enabled:          true
    b2b_enabled:          true
    ess_enabled:          true
    repository_prefix:    &quot;DEV&quot;
    weblogic_user:        *wls_weblogic_user
    weblogic_password:    *domain_wls_password
    adminserver_address:  *domain_adminserver_address

fmw_cluster_instances:
  &#39;soaCluster&#39;:
    domain_name:          &quot;soa_domain&quot;
    soa_cluster_name:     &quot;SoaCluster&quot;
    bam_cluster_name:     &quot;BamCluster&quot;
    osb_cluster_name:     &quot;OsbCluster&quot;
    bpm_enabled:          true
    bam_enabled:          true
    soa_enabled:          true
    osb_enabled:          true
    b2b_enabled:          true
    ess_enabled:          true
    repository_prefix:    &quot;DEV6&quot;
    weblogic_user:        *wls_weblogic_user
    weblogic_password:    *domain_wls_password
    adminserver_address:  *domain_adminserver_address

# OIM 11.1.2.3 cluster
fmw_cluster_instances:
  &#39;oimCluster&#39;:
    domain_name:          *domain_name
    soa_cluster_name:     &quot;SoaCluster&quot;
    oim_cluster_name:     &quot;OimCluster&quot;
    oam_cluster_name:     &quot;OamCluster&quot;
    bi_cluster_name:      &quot;BiCluster&quot;
    log_output:           *logoutput
    soa_enabled:          true
    oim_enabled:          true
    oam_enabled:          true
    bi_enabled:           true
    repository_prefix:    *rcu_prefix</code></pre>

<h3 id="label-fmwclusterjrf">fmwclusterjrf</h3>

<p><strong>orawls::utils::fmwclusterjrf</strong> convert existing cluster to a
ADF/JRF cluster you need to create a wls cluster with some managed servers
first</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$fmw_jrf_cluster_instances = hiera(&#39;fmw_jrf_cluster_instances&#39;, $default_params)
create_resources(&#39;orawls::utils::fmwclusterjrf&#39;,$fmw_jrf_cluster_instances, $default_params)

fmw_jrf_cluster_instances:
  &#39;WebCluster&#39;:
     domain_name:          &quot;adf_domain&quot;
     jrf_target_name:      &quot;WebCluster&quot;
     opss_datasource_name: &quot;opss-data-source&quot;
     log_output:           *logoutput
     weblogic_user:        *wls_weblogic_user
     weblogic_password:    *domain_wls_password
     adminserver_address:  *domain_adminserver_address</code></pre>

<h3 id="label-webtier">webtier</h3>

<p><strong>orawls::utils::webtier</strong> add an OHS instance to a WebLogic
Domain and in the Enterprise Manager, optional with OHS OAM Webgate</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$webtier_instances = hiera(&#39;webtier_instances&#39;, {})
create_resources(&#39;orawls::utils::webtier&#39;,$webtier_instances, $default_params)


# 11g
webtier_instances:
  &#39;ohs1&#39;:
    action_name:           &#39;create&#39;
    instance_name:         &#39;ohs1&#39;
    webgate_configure:     true
    domain_name:             *domain_name
    adminserver_address:     *domain_adminserver_address
    weblogic_password:       *domain_wls_password          

# 12.1.2
  webtier_instances:
    &#39;ohs1&#39;:
      action_name:           &#39;create&#39;
      instance_name:         &#39;ohs1&#39;
      machine_name:          &#39;Node1&#39;
      domain_name:             *domain_name
      adminserver_address:     *domain_adminserver_address
      weblogic_password:       *domain_wls_password</code></pre>

<p>Webtier for OAM</p>

<pre class="code ruby"><code class="ruby">webtier_instances:
  &#39;ohs1&#39;:
    action_name:            &#39;create&#39;
    instance_name:          &#39;ohs1&#39;
    webgate_configure:      true
    webgate_agentname:      &#39;ohs1&#39;
    webgate_hostidentifier: &#39;host1&#39;
    oamadminserverhostname: &#39;oim1admin.example.com&#39;
    oamadminserverport:     7001
    domain_name:             *domain_name
    adminserver_address:     *domain_adminserver_address
    weblogic_password:       *domain_wls_password</code></pre>

<h3 id="label-oimconfig">oimconfig</h3>

<p><strong>orawls::utils::oimconfig</strong> Configure OIM , oim server,
design or remote configuration</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$oimconfig_instances = hiera(&#39;oimconfig_instances&#39;, $default_params)
create_resources(&#39;orawls::utils::oimconfig&#39;,$oimconfig_instances, $default_params)

oimconfig_instances:
  &#39;oimDomain&#39;:
    version:                    1112
    oim_home:                   &#39;/opt/oracle/middleware11g/Oracle_IDM1&#39;
    server_config:              true
    oim_password:               &#39;Welcome01&#39;
    remote_config:              false
    keystore_password:          &#39;Welcome01&#39;
    design_config:              false
    oimserver_hostname:         &#39;oim1admin.example.com&#39;
    oimserver_port:             14000
    repository_database_url:    &quot;oimdb.example.com:1521:oimrepos.example.com&quot;
    repository_prefix:          &quot;DEV&quot;
    repository_password:        &quot;Welcome01&quot;
    domain_name:                *domain_name
    adminserver_address:        *domain_adminserver_address
    weblogic_password:          *domain_wls_password</code></pre>

<h3 id="label-instance">instance</h3>

<p><strong>orawls::oud::instance</strong> Configure OUD (Oracle Unified
Directory) ldap instance</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$oudconfig_instances = hiera(&#39;oudconfig_instances&#39;, $default_params)
create_resources(&#39;orawls::oud::instance&#39;,$oudconfig_instances, $default_params)

oudconfig_instances:
  &#39;instance1&#39;:
    version:                     1112
    oud_home:                    &#39;/opt/oracle/middleware11g/Oracle_OUD1&#39;
    oud_instance_name:           &#39;instance1&#39;
    oud_root_user_password:      &#39;Welcome01&#39;
    oud_base_dn:                 &#39;dc=example,dc=com&#39;
    oud_ldap_port:               1389
    oud_admin_connector_port:    4444
    oud_ldaps_port:              1636</code></pre>

<h3 id="label-oud_control">oud_control</h3>

<p><strong>orawls::oud::control</strong> Stop or start an OUD (Oracle Unified
Directory) ldap instance</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$oud_control_instances = hiera(&#39;oud_control_instances&#39;, $default_params)
create_resources(&#39;orawls::oud::control&#39;,$oud_control_instances, $default_params)

oud_control_instances:
  &#39;instance1&#39;:
    oud_instances_home_dir:     &#39;/opt/oracle/oud_instances&#39;
    oud_instance_name:          &#39;instance1&#39;
    action:                     &#39;start&#39;
    log_output:                 *logoutput</code></pre>

<h2 id="label-Types+and+providers">Types and providers</h2>

<p>All wls types needs a wls_setting definition, this is a pointer to an
WebLogic AdminServer and you need to create one for every WebLogic domain.
When you don&#39;t provide a wls_setting identifier in the title of the
weblogic type then it will use default as identifier.</p>

<p>Global timeout parameter for WebLogic resource types. use timeout and value
in seconds, default = 120 seconds or 2 minutes</p>

<h3 id="label-wls_setting">wls_setting</h3>

<p>required for all the weblogic type/providers, this is a pointer to an
WebLogic AdminServer.</p>

<pre class="code ruby"><code class="ruby">wls_setting { &#39;default&#39;:
  user                         =&gt; &#39;oracle&#39;,
  weblogic_home_dir            =&gt; &#39;/opt/oracle/middleware11g/wlserver_10.3&#39;,
  connect_url                  =&gt; &quot;t3://localhost:7001&quot;,
  weblogic_user                =&gt; &#39;weblogic&#39;,
  weblogic_password            =&gt; &#39;weblogic1&#39;,
  use_default_value_when_empty =&gt; true
}

wls_setting { &#39;domain2&#39;:
  user                         =&gt; &#39;oracle&#39;,
  weblogic_home_dir            =&gt; &#39;/opt/oracle/middleware11g/wlserver_10.3&#39;,
  connect_url                  =&gt; &quot;t3://localhost:7011&quot;,
  weblogic_user                =&gt; &#39;weblogic&#39;,
  weblogic_password            =&gt; &#39;weblogic1&#39;,
  post_classpath               =&gt; &#39;/opt/oracle/wlsdomains/domains/Wls1036/lib/aa.jar&#39;,
  use_default_value_when_empty =&gt; false
}</code></pre>

<p>use_default_value_when_empty = true when you want to make sure the wls type
properties will set its default mbean values when it is not provided by
your puppet configuration. So when you set a wls type properties and remove
it again it will set it back to its original value ( off course only when
it has one)</p>

<p>saving the WLST scripts of all the wls types to a temporary folder</p>

<p>archive_path has /tmp/orawls-archive as default folder</p>

<pre class="code ruby"><code class="ruby">wls_setting { &#39;default&#39;:
  debug_module              =&gt; &#39;true&#39;,
  archive_path              =&gt; &#39;/var/tmp/install/default_domain&#39;,
  connect_url               =&gt; &#39;t3s://10.10.10.10:7002&#39;,
  custom_trust              =&gt; &#39;true&#39;,
  trust_keystore_file       =&gt; &#39;/vagrant/truststore.jks&#39;,
  trust_keystore_passphrase =&gt; &#39;welcome&#39;,
  user                      =&gt; &#39;oracle&#39;,
  weblogic_home_dir         =&gt; &#39;/opt/oracle/middleware12c/wlserver&#39;,
  weblogic_password         =&gt; &#39;weblogic1&#39;,
  weblogic_user             =&gt; &#39;weblogic&#39;,
}
wls_setting { &#39;plain&#39;:
  debug_module      =&gt; &#39;false&#39;,
  archive_path      =&gt; &#39;/tmp/orawls-archive&#39;,
  connect_url       =&gt; &#39;t3://10.10.10.10:7101&#39;,
  custom_trust      =&gt; &#39;false&#39;,
  user              =&gt; &#39;oracle&#39;,
  weblogic_home_dir =&gt; &#39;/opt/oracle/middleware12c/wlserver&#39;,
  weblogic_password =&gt; &#39;weblogic1&#39;,
  weblogic_user     =&gt; &#39;weblogic&#39;,
}</code></pre>

<p>or in hiera</p>

<pre class="code ruby"><code class="ruby"># and for with weblogic infra 12.2.1, use this post_classpath
wls_setting_instances:
  &#39;default&#39;:
    user:               &#39;oracle&#39;
    weblogic_home_dir:  &#39;/opt/oracle/middleware12c/wlserver&#39;
    connect_url:        &quot;t3://10.10.10.21:7001&quot;
    weblogic_user:      &#39;weblogic&#39;
    weblogic_password:  &#39;weblogic1&#39;
    post_classpath:     &#39;/opt/oracle/middleware12c/oracle_common/modules/internal/features/jrf_wlsFmw_oracle.jrf.wlst.jar&#39;
    extra_arguments:    &#39;-Daa=1 -Dbb=2&#39;


# and for with weblogic infra 12.1.3, use this post_classpath
wls_setting_instances:
  &#39;default&#39;:
    user:               &#39;oracle&#39;
    weblogic_home_dir:  &#39;/opt/oracle/middleware12c/wlserver&#39;
    connect_url:        &quot;t3://10.10.10.21:7001&quot;
    weblogic_user:      &#39;weblogic&#39;
    weblogic_password:  &#39;weblogic1&#39;
    post_classpath:     &#39;/opt/oracle/middleware12c/oracle_common/modules/internal/features/jrf_wlsFmw_oracle.jrf.wlst_12.1.3.jar&#39;
    extra_arguments:    &#39;-Daa=1 -Dbb=2&#39;

wls_setting_instances:
  &#39;default&#39;:
    user:                      *wls_os_user
    weblogic_home_dir:         *wls_weblogic_home_dir
    connect_url:               &quot;t3s://%{hiera(&#39;domain_adminserver_address&#39;)}:7002&quot;
    weblogic_user:             *wls_weblogic_user
    weblogic_password:         *domain_wls_password
    custom_trust:              *wls_custom_trust
    trust_keystore_file:       *wls_trust_keystore_file
    trust_keystore_passphrase: *wls_trust_keystore_passphrase
    require:                   Orawls::Domain[Wls1213]
    debug_module:              true
    archive_path:              &#39;/var/tmp/install/default_domain&#39;
  &#39;plain&#39;:
    user:                      *wls_os_user
    weblogic_home_dir:         *wls_weblogic_home_dir
    connect_url:               &quot;t3://%{hiera(&#39;domain_adminserver_address&#39;)}:7101&quot;
    weblogic_user:             *wls_weblogic_user
    weblogic_password:         *domain_wls_password
    require:                   Orawls::Domain[plain_Wls]
    debug_module:              false</code></pre>

<p>With t3s and custom trust</p>

<pre class="code ruby"><code class="ruby">wls_setting_instances:
  &#39;default&#39;:
    user:                      oracle&#39;
    weblogic_home_dir:         &#39;/opt/oracle/middleware12c/wlserver&#39;
    connect_url:               &quot;t3s://10.10.10.21:7002&quot;
    weblogic_user:             &#39;weblogic&#39;
    weblogic_password:         &#39;weblogic1&#39;
    custom_trust:              true
    trust_keystore_file:       &#39;/vagrant/truststore.jks&#39;
    trust_keystore_passphrase: &#39;welcome&#39;
  &#39;plain&#39;:
    user:                      oracle&#39;
    weblogic_home_dir:         &#39;/opt/oracle/middleware12c/wlserver&#39;
    connect_url:               &quot;t3://10.10.10.21:7101&quot;
    weblogic_user:             &#39;weblogic&#39;
    weblogic_password:         &#39;weblogic1&#39;</code></pre>

<h3 id="label-wls_domain">wls_domain</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;. Probably after changing the domain you need to restart
the AdminServer or subscribe for a restart to this change with the
wls_adminserver type</p>

<p>or use puppet resource wls_domain</p>

<pre class="code ruby"><code class="ruby"># In this case it will use default as wls_setting identifier
wls_domain { &#39;Wls1036&#39;:
  ensure                                            =&gt; &#39;present&#39;,
  jmx_platform_mbean_server_enabled                 =&gt; &#39;1&#39;,
  jmx_platform_mbean_server_used                    =&gt; &#39;1&#39;,
  jpa_default_provider                              =&gt; &#39;org.eclipse.persistence.jpa.PersistenceProvider&#39;,
  jta_max_transactions                              =&gt; &#39;20000&#39;,
  jta_transaction_timeout                           =&gt; &#39;35&#39;,
  log_file_min_size                                 =&gt; &#39;5000&#39;,
  log_filecount                                     =&gt; &#39;10&#39;,
  log_filename                                      =&gt; &#39;/var/log/weblogic/Wls1036.log&#39;,
  log_number_of_files_limited                       =&gt; &#39;1&#39;,
  log_rotate_logon_startup                          =&gt; &#39;1&#39;,
  log_rotationtype                                  =&gt; &#39;bySize&#39;,
  security_crossdomain                              =&gt; &#39;0&#39;,
  web_app_container_show_archived_real_path_enabled =&gt; &#39;1&#39;,
}

wls_domain { &#39;Wls11gSetting/Wls11g&#39;:
  ensure                                            =&gt; &#39;present&#39;,
  jmx_platform_mbean_server_enabled                 =&gt; &#39;0&#39;,
  jmx_platform_mbean_server_used                    =&gt; &#39;1&#39;,
  jpa_default_provider                              =&gt; &#39;org.apache.openjpa.persistence.PersistenceProviderImpl&#39;,
  jta_max_transactions                              =&gt; &#39;10000&#39;,
  jta_transaction_timeout                           =&gt; &#39;30&#39;,
  log_file_min_size                                 =&gt; &#39;5000&#39;,
  log_filecount                                     =&gt; &#39;5&#39;,
  log_filename                                      =&gt; &#39;/var/log/weblogic/Wls11g.log&#39;,
  log_number_of_files_limited                       =&gt; &#39;0&#39;,
  log_rotate_logon_startup                          =&gt; &#39;0&#39;,
  log_rotationtype                                  =&gt; &#39;byTime&#39;,
  security_crossdomain                              =&gt; &#39;1&#39;,
  web_app_container_show_archived_real_path_enabled =&gt; &#39;0&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">require userconfig
$default_params = {}
$wls_domain_instances = hiera(&#39;wls_domain_instances&#39;, {})
create_resources(&#39;wls_domain&#39;,$wls_domain_instances, $default_params)

# &#39;Wls1036&#39; will use default as wls_setting identifier
# &#39;Wls11g&#39; will use domain2 as wls_setting identifier
wls_domain_instances:
  &#39;Wls1036&#39;:
    ensure:                      &#39;present&#39;
    jpa_default_provider:        &#39;org.eclipse.persistence.jpa.PersistenceProvider&#39;
    jta_max_transactions:        &#39;20000&#39;
    jta_transaction_timeout:     &#39;35&#39;
    log_file_min_size:           &#39;5000&#39;
    log_filecount:               &#39;5&#39;
    log_filename:                &#39;/var/log/weblogic/Wls1036.log&#39;
    log_number_of_files_limited: &#39;1&#39;
    log_rotate_logon_startup:    &#39;1&#39;
    log_rotationtype:            &#39;bySize&#39;
    security_crossdomain:        &#39;0&#39;
  &#39;domain2/Wls11g&#39;:
    ensure:                      &#39;present&#39;
    jpa_default_provider:        &#39;org.apache.openjpa.persistence.PersistenceProviderImpl&#39;
    jta_max_transactions:        &#39;10000&#39;
    jta_transaction_timeout:     &#39;30&#39;
    log_file_min_size:           &#39;5000&#39;
    log_filecount:               &#39;10&#39;
    log_filename:                &#39;/var/log/weblogic/Wls11g.log&#39;
    log_number_of_files_limited: &#39;0&#39;
    log_rotate_logon_startup:    &#39;0&#39;
    log_rotationtype:            &#39;byTime&#39;
    security_crossdomain:        &#39;1&#39;</code></pre>

<h3 id="label-wls_adminserver">wls_adminserver</h3>

<p>type for adminserver control like start, running, abort and stop. also
supports subscribe with refreshonly</p>

<pre class="code ruby"><code class="ruby"># for this type you won&#39;t need a wls_setting identifier
wls_adminserver{&#39;AdminServer_Wls1036:&#39;:
  ensure                    =&gt; &#39;running&#39;,   #running|start|abort|stop
  server_name               =&gt; hiera(&#39;domain_adminserver&#39;),
  domain_name               =&gt; hiera(&#39;domain_name&#39;),
  domain_path               =&gt; &quot;/opt/oracle/wlsdomains/domains/Wls1036&quot;,
  os_user                   =&gt; hiera(&#39;wls_os_user&#39;),
  weblogic_home_dir         =&gt; hiera(&#39;wls_weblogic_home_dir&#39;),
  weblogic_user             =&gt; hiera(&#39;wls_weblogic_user&#39;),
  weblogic_password         =&gt; hiera(&#39;domain_wls_password&#39;),
  jdk_home_dir              =&gt; hiera(&#39;wls_jdk_home_dir&#39;),
  nodemanager_address       =&gt; hiera(&#39;domain_adminserver_address&#39;),
  nodemanager_port          =&gt; hiera(&#39;domain_nodemanager_port&#39;),
  jsse_enabled              =&gt; false,
  custom_trust              =&gt; false,
}</code></pre>

<p>with JSSE and custom trust</p>

<pre class="code ruby"><code class="ruby"># for this type you won&#39;t need a wls_setting identifier
wls_adminserver{&#39;AdminServer_Wls1036:&#39;:
  ensure                    =&gt; &#39;running&#39;,   #running|start|abort|stop
  server_name               =&gt; hiera(&#39;domain_adminserver&#39;),
  domain_name               =&gt; hiera(&#39;domain_name&#39;),
  domain_path               =&gt; &quot;/opt/oracle/wlsdomains/domains/Wls1036&quot;,
  os_user                   =&gt; hiera(&#39;wls_os_user&#39;),
  weblogic_home_dir         =&gt; hiera(&#39;wls_weblogic_home_dir&#39;),
  weblogic_user             =&gt; hiera(&#39;wls_weblogic_user&#39;),
  weblogic_password         =&gt; hiera(&#39;domain_wls_password&#39;),
  jdk_home_dir              =&gt; hiera(&#39;wls_jdk_home_dir&#39;),
  nodemanager_address       =&gt; hiera(&#39;domain_adminserver_address&#39;),
  nodemanager_port          =&gt; hiera(&#39;domain_nodemanager_port&#39;),
  jsse_enabled              =&gt; hiera(&#39;wls_jsse_enabled&#39;),
  custom_trust              =&gt; hiera(&#39;wls_custom_trust&#39;),
  trust_keystore_file       =&gt; hiera(&#39;wls_trust_keystore_file&#39;),
  trust_keystore_passphrase =&gt; hiera(&#39;wls_trust_keystore_passphrase&#39;),
}</code></pre>

<p>subscribe to a wls_domain, wls_authenticaton_provider or
wls_identity_asserter event</p>

<pre class="code ruby"><code class="ruby"># for this type you won&#39;t need a wls_setting identifier
wls_adminserver{&#39;AdminServer_Wls1036:&#39;:
  ensure                    =&gt; &#39;running&#39;,   #running|start|abort|stop
  server_name               =&gt; hiera(&#39;domain_adminserver&#39;),
  domain_name               =&gt; hiera(&#39;domain_name&#39;),
  domain_path               =&gt; &quot;/opt/oracle/wlsdomains/domains/Wls1036&quot;,
  os_user                   =&gt; hiera(&#39;wls_os_user&#39;),
  weblogic_home_dir         =&gt; hiera(&#39;wls_weblogic_home_dir&#39;),
  weblogic_user             =&gt; hiera(&#39;wls_weblogic_user&#39;),
  weblogic_password         =&gt; hiera(&#39;domain_wls_password&#39;),
  jdk_home_dir              =&gt; hiera(&#39;wls_jdk_home_dir&#39;),
  nodemanager_address       =&gt; hiera(&#39;domain_adminserver_address&#39;),
  nodemanager_port          =&gt; hiera(&#39;domain_nodemanager_port&#39;),
  jsse_enabled              =&gt; hiera(&#39;wls_jsse_enabled&#39;),
  custom_trust              =&gt; hiera(&#39;wls_custom_trust&#39;),
  trust_keystore_file       =&gt; hiera(&#39;wls_trust_keystore_file&#39;),
  trust_keystore_passphrase =&gt; hiera(&#39;wls_trust_keystore_passphrase&#39;),
  refreshonly               =&gt; true,
  subscribe                 =&gt; Wls_domain[&#39;Wls1036&#39;],
}</code></pre>

<h3 id="label-wls_managedserver">wls_managedserver</h3>

<p>type for managed server control like start, running, abort and stop a
managed server or a cluster. also supports subscribe with refreshonly</p>

<pre class="code ruby"><code class="ruby"># for this type you won&#39;t need a wls_setting identifier
wls_managedserver{&#39;JMSServer1_Wls1036:&#39;:
  ensure                    =&gt; &#39;running&#39;,   #running|start|abort|stop
  target                    =&gt; &#39;Server&#39;, #Server|Cluster
  server_name               =&gt; &#39;JMSServer1&#39;,
  domain_name               =&gt; hiera(&#39;domain_name&#39;),
  os_user                   =&gt; hiera(&#39;wls_os_user&#39;),
  weblogic_home_dir         =&gt; hiera(&#39;wls_weblogic_home_dir&#39;),
  weblogic_user             =&gt; hiera(&#39;wls_weblogic_user&#39;),
  weblogic_password         =&gt; hiera(&#39;domain_wls_password&#39;),
  jdk_home_dir              =&gt; hiera(&#39;wls_jdk_home_dir&#39;),
  adminserver_address       =&gt; hiera(&#39;domain_adminserver_address&#39;),
  adminserver_port          =&gt; hiera(&#39;domain_adminserver_port&#39;),
}</code></pre>

<p>subscribe to a wls_domain, wls_identity_asserter or
wls_authenticaton_provider event</p>

<pre class="code ruby"><code class="ruby"># for this type you won&#39;t need a wls_setting identifier
wls_managedserver{&#39;JMSServer1_Wls1036&#39;:
  ensure                    =&gt; &#39;running&#39;,   #running|start|abort|stop
  target                    =&gt; &#39;Server&#39;,    #Server|Cluster
  server_name               =&gt; &#39;JMSServer1&#39;,
  domain_name               =&gt; hiera(&#39;domain_name&#39;),
  os_user                   =&gt; hiera(&#39;wls_os_user&#39;),
  weblogic_home_dir         =&gt; hiera(&#39;wls_weblogic_home_dir&#39;),
  weblogic_user             =&gt; hiera(&#39;wls_weblogic_user&#39;),
  weblogic_password         =&gt; hiera(&#39;domain_wls_password&#39;),
  jdk_home_dir              =&gt; hiera(&#39;wls_jdk_home_dir&#39;),
  adminserver_address       =&gt; hiera(&#39;domain_adminserver_address&#39;),
  adminserver_port          =&gt; hiera(&#39;domain_adminserver_port&#39;),
  refreshonly               =&gt; true,
  subscribe                 =&gt; Wls_domain[&#39;Wls1036&#39;],
}</code></pre>

<h3 id="label-wls_ohsserver">wls_ohsserver</h3>

<p>type for ohs server control like start, running, abort and stop. also
supports subscribe with refreshonly</p>

<pre class="code ruby"><code class="ruby"># for this type you won&#39;t need a wls_setting identifier
wls_ohsserver{&#39;OHS Server:&#39;:
  ensure                    =&gt; &#39;running&#39;,   #running|start|abort|stop
  server_name               =&gt; hiera(&#39;domain_adminserver&#39;),
  domain_name               =&gt; hiera(&#39;domain_name&#39;),
  domain_path               =&gt; &quot;/opt/oracle/wlsdomains/domains/Wls1036&quot;,
  os_user                   =&gt; hiera(&#39;wls_os_user&#39;),
  weblogic_home_dir         =&gt; hiera(&#39;wls_weblogic_home_dir&#39;),
  weblogic_user             =&gt; hiera(&#39;wls_weblogic_user&#39;),
  weblogic_password         =&gt; hiera(&#39;domain_wls_password&#39;),
  jdk_home_dir              =&gt; hiera(&#39;wls_jdk_home_dir&#39;),
  nodemanager_address       =&gt; hiera(&#39;domain_adminserver_address&#39;),
  nodemanager_port          =&gt; hiera(&#39;domain_nodemanager_port&#39;),
  jsse_enabled              =&gt; false,
  custom_trust              =&gt; false,
}</code></pre>

<h3 id="label-wls_deployment">wls_deployment</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;. or use puppet resource wls_deployment</p>

<pre class="code ruby"><code class="ruby"># &#39;jersey-bundle&#39; will use default as wls_setting identifier
wls_deployment { &#39;jersey-bundle&#39;:
  ensure            =&gt; &#39;present&#39;,
  deploymenttype    =&gt; &#39;Library&#39;,
  stagingmode       =&gt; &#39;nostage&#39;,
  remote            =&gt; &quot;1&quot;,
  upload            =&gt; &quot;1&quot;,
  target            =&gt; [&#39;AdminServer&#39;, &#39;WebCluster&#39;],
  targettype        =&gt; [&#39;Server&#39;, &#39;Cluster&#39;],
  versionidentifier =&gt; &#39;1.18@1.18.0.0&#39;,
}

wls_deployment { &#39;webapp&#39;:
  ensure            =&gt; &#39;present&#39;,
  deploymenttype    =&gt; &#39;AppDeployment&#39;,
  stagingmode       =&gt; &#39;nostage&#39;,
  remote            =&gt; &quot;1&quot;,
  upload            =&gt; &quot;1&quot;,
  target            =&gt; [&#39;WebCluster&#39;],
  targettype        =&gt; [&#39;Cluster&#39;],
  versionidentifier =&gt; &#39;1.1@1.1.0.0&#39;,
  require           =&gt; Wls_deployment[&#39;jersey-bundle&#39;]
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$deployment_instances = hiera(&#39;deployment_instances&#39;, $default_params)
create_resources(&#39;wls_deployment&#39;,$deployment_instances, $default_params)

deployment_instances:
  &#39;jersey-bundle&#39;:
    ensure:            &#39;present&#39;
    deploymenttype:    &#39;Library&#39;
    versionidentifier: &#39;1.18@1.18.0.0&#39;
    timeout:           60
    stagingmode:       &quot;nostage&quot;
    remote:            &quot;1&quot;
    upload:            &quot;1&quot;
    target:
      - &#39;AdminServer&#39;
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Server&#39;
      - &#39;Cluster&#39;
    localpath:         &#39;/vagrant/jersey-bundle-1.18.war&#39;
    require:
       - Wls_cluster[WebCluster]
  &#39;webapp&#39;:
    ensure:            &#39;present&#39;
    deploymenttype:    &#39;AppDeployment&#39;
    versionidentifier: &#39;1.1@1.1.0.0&#39;
    timeout:           60
    stagingmode:       &quot;nostage&quot;
    remote:            &quot;1&quot;
    upload:            &quot;1&quot;
    target:
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Cluster&#39;
    localpath:         &#39;/vagrant/webapp.war&#39;
    require:
       - Wls_deployment[jersey-bundle]
       - Wls_cluster[WebCluster]</code></pre>

<h3 id="label-wls_user">wls_user</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_user</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_user { &#39;OracleSystemUser&#39;:
  ensure                 =&gt; &#39;present&#39;,
  authenticationprovider =&gt; &#39;DefaultAuthenticator&#39;,
  description            =&gt; &#39;Oracle application software system user.&#39;,
  realm                  =&gt; &#39;myrealm&#39;,
}
# this will use default as wls_setting identifier
wls_user { &#39;default/testuser1&#39;:
  ensure                 =&gt; &#39;present&#39;,
  authenticationprovider =&gt; &#39;DefaultAuthenticator&#39;,
  description            =&gt; &#39;testuser1&#39;,
  realm                  =&gt; &#39;myrealm&#39;,
}
# this will use domain2 as wls_setting identifier
wls_user { &#39;domain2/testuser1&#39;:
  ensure                 =&gt; &#39;present&#39;,
  authenticationprovider =&gt; &#39;DefaultAuthenticator&#39;,
  description            =&gt; &#39;testuser1&#39;,
  realm                  =&gt; &#39;myrealm&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$user_instances = hiera(&#39;user_instances&#39;, {})
create_resources(&#39;wls_user&#39;,$user_instances, $default_params)

# testuser1 will use default as wls_setting identifier
# testuser2 will use domain2 as wls_setting identifier
user_instances:
  &#39;testuser1&#39;:
    ensure:                 &#39;present&#39;
    password:               &#39;weblogic1&#39;
    authenticationprovider: &#39;DefaultAuthenticator&#39;
    realm:                  &#39;myrealm&#39;
    description:            &#39;my test user&#39;
  &#39;domain2/testuser2&#39;:
    ensure:                 &#39;present&#39;
    password:               &#39;weblogic1&#39;
    authenticationprovider: &#39;DefaultAuthenticator&#39;
    realm:                  &#39;myrealm&#39;
    description:            &#39;my test user&#39;</code></pre>

<h3 id="label-wls_group">wls_group</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_group</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_group { &#39;SuperUsers&#39;:
  ensure                 =&gt; &#39;present&#39;,
  authenticationprovider =&gt; &#39;DefaultAuthenticator&#39;,
  description            =&gt; &#39;SuperUsers&#39;,
  realm                  =&gt; &#39;myrealm&#39;,
  users                  =&gt; [&#39;testuser2&#39;],
}
# this will use default as wls_setting identifier
wls_group { &#39;TestGroup&#39;:
  ensure                 =&gt; &#39;present&#39;,
  authenticationprovider =&gt; &#39;DefaultAuthenticator&#39;,
  description            =&gt; &#39;TestGroup&#39;,
  realm                  =&gt; &#39;myrealm&#39;,
  users                  =&gt; [&#39;testuser1&#39;,&#39;testuser2&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$group_instances = hiera(&#39;group_instances&#39;, {})
create_resources(&#39;wls_group&#39;,$group_instances, $default_params)

# this will use default as wls_setting identifier
group_instances:
  &#39;TestGroup&#39;:
    ensure:                 &#39;present&#39;
    authenticationprovider: &#39;DefaultAuthenticator&#39;
    description:            &#39;TestGroup&#39;
    realm:                  &#39;myrealm&#39;
    users:
      - &#39;testuser1&#39;
      - &#39;testuser2&#39;
  &#39;SuperUsers&#39;:
    ensure:                 &#39;present&#39;
    authenticationprovider: &#39;DefaultAuthenticator&#39;
    description:            &#39;SuperUsers&#39;
    realm:                  &#39;myrealm&#39;
    users:
      - &#39;testuser2&#39;</code></pre>

<h3 id="label-wls_role">wls_role</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_role</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_role { &#39;default/Deployer&#39;:
  ensure     =&gt; &#39;present&#39;,
  expression =&gt; &#39;Grp(Deployers)&#39;,
  realm      =&gt; &#39;myrealm&#39;,
}

wls_role { &#39;default/OracleSystemRole&#39;:
  ensure     =&gt; &#39;present&#39;,
  expression =&gt; &#39;Grp(OracleSystemGroup)&#39;,
  realm      =&gt; &#39;myrealm&#39;,
}

wls_role { &#39;default/Admin&#39;:
  ensure     =&gt; &#39;present&#39;,
  expression =&gt; &#39;?weblogic.entitlement.rules.AdministrativeGroup(Administrators)&#39;,
  realm      =&gt; &#39;myrealm&#39;,
}

wls_role { &#39;default/Anonymous&#39;:
  ensure     =&gt; &#39;present&#39;,
  expression =&gt; &#39;Grp(everyone)&#39;,
  realm      =&gt; &#39;myrealm&#39;,
}</code></pre>

<h3 id="label-wls_authentication_provider">wls_authentication_provider</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39; and probably after the creation the AdminServer needs a
reboot or subscribe to a restart with the wls_adminserver type</p>

<p>only control_flag is a property, the rest are parameters and only used in a
create action</p>

<p>Optionally, providers can be ordered by providing a value to the order
paramater, which is a zero-based list. When configuring ordering order, it
may be necessary to create the resources with Puppet ordering (if not using
Hiera) or by structuring Hiera in matching order. Otherwise ordering may
fail if not all authentication providers are created yet (by default the
provider will be ordered last if it is greater than the number of providers
currently configured).</p>

<p>To manage Weblogic&#39;s DefaultIdentityAsserter use the
wls_identity_asserter type.</p>

<p>or use puppet resource wls_authentication_provider</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_authentication_provider { &#39;DefaultAuthenticator&#39;:
  ensure       =&gt; &#39;present&#39;,
  control_flag =&gt; &#39;SUFFICIENT&#39;,
}

# this provider will be ordered first in the providers list
wls_authentication_provider { &#39;ldap&#39;:
  ensure            =&gt; &#39;present&#39;,
  control_flag      =&gt; &#39;SUFFICIENT&#39;,
  providerclassname =&gt; &#39;weblogic.security.providers.authentication.LDAPAuthenticator&#39;,
  provider_specific =&gt; {
       &#39;Principal&#39;                     =&gt; &#39;ldapuser&#39;,
       &#39;Host&#39;                          =&gt; &#39;ldapserver&#39;,
       &#39;Port&#39;                          =&gt; 389,
       &#39;CacheTTL&#39;                      =&gt; 60,
       &#39;CacheSize&#39;                     =&gt; 1024,
       &#39;MaxGroupMembershipSearchLevel&#39; =&gt; 4,
       &#39;SSLEnabled&#39;                    =&gt; 1,
  }
  order             =&gt;  &#39;0&#39;
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$authentication_provider_instances = hiera(&#39;authentication_provider_instances&#39;, {})
create_resources(&#39;wls_authentication_provider&#39;,$authentication_provider_instances, $default_params)

# this will use default as wls_setting identifier
authentication_provider_instances:
  &#39;DefaultAuthenticator&#39;:
    ensure:             &#39;present&#39;
    control_flag:       &#39;SUFFICIENT&#39;


#ldap will be the first listed provider
  &#39;ldap&#39;:
    ensure:             &#39;present&#39;
    control_flag:       &#39;SUFFICIENT&#39;
    providerclassname:  &#39;weblogic.security.providers.authentication.LDAPAuthenticator&#39;
    provider_specific:
      &#39;Principal&#39;:                     &#39;ldapuser&#39;
      &#39;Host&#39;:                          &#39;ldapserver&#39;
      &#39;Port&#39;:                          389
      &#39;CacheTTL&#39;:                      60
      &#39;CacheSize&#39;:                     1024
      &#39;MaxGroupMembershipSearchLevel&#39;: 4
      &#39;SSLEnabled&#39;:                    1
      &#39;ConnectTimeout&#39;:                2
      &#39;ConnectionRetryLimit&#39;:          2
    order:              &#39;1&#39;
    before:             Wls_domain[Wls1036]
  &#39;ActiveDirectoryAuthenticator&#39;:
    ensure:             &#39;present&#39;
    control_flag:       &#39;SUFFICIENT&#39;
    providerclassname:  &#39;weblogic.security.providers.authentication.ActiveDirectoryAuthenticator&#39;
    provider_specific:
      &#39;Credential&#39;:                     &#39;password&#39;
      &#39;GroupBaseDN&#39;:                    &#39;DC=ad,DC=company,DC=org&#39;
      &#39;GroupFromNameFilter&#39;:            &#39;(&amp;(sAMAccountName=%g)(objectclass=group))&#39;
      &#39;GroupMembershipSearching&#39;:       &#39;limited&#39;
      &#39;Host&#39;:                           &#39;ad.company.org&#39;
      &#39;MaxGroupMembershipSearchLevel&#39;:  4
      &#39;Principal&#39;:                      &#39;CN=SER_WASadmin,OU=Service Accounts,DC=ad,DC=company,DC=org&#39;
      &#39;UserBaseDN&#39;:                     &#39;DC=ad,DC=company,DC=org&#39;
      &#39;UserFromNameFilter&#39;:             &#39;(&amp;(sAMAccountName=%u)(objectclass=user))&#39;
      &#39;UserNameAttribute&#39;:              &#39;sAMAccountName&#39;
      &#39;Port&#39;:                           389
      &#39;CacheTTL&#39;:                       60
      &#39;CacheSize&#39;:                      1024
      &#39;ConnectTimeout&#39;:                 2
      &#39;ConnectionRetryLimit&#39;:           2
    order:              &#39;2&#39;</code></pre>

<h3 id="label-wls_identity_asserter">wls_identity_asserter</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39; and probably after the creation the AdminServer needs a
reboot or subscribe to a restart with the wls_adminserver type</p>

<p>to provide a list of token types to create provide a “::” seperated list
for attribute &#39;ActiveTypes&#39;</p>

<p>Optionally, the provider can be ordered by specifying a value to the order
paramater, which is a zero-based list. When configuring ordering order, it
may be necessary to create the resources with Puppet ordering (if not using
Hiera) or by structuring Hiera in matching order. Otherwise ordering may
fail if not all authentication providers are created yet (by default the
provider will be ordered last if it is greater than the number of providers
currently configured).</p>

<p>or use puppet resource wls_identity_asserter</p>

<pre class="code ruby"><code class="ruby">wls_authentication_provider { &#39;DefaultIdentityAsserter&#39;:
  ensure            =&gt; &#39;present&#39;,
  providerclassname =&gt; &#39;weblogic.security.providers.authentication.DefaultIdentityAsserter&#39;,
  attributes:       =&gt; &#39;DigestReplayDetectionEnabled;UseDefaultUserNameMapper&#39;,
  attributesvalues  =&gt; &#39;1;1;&#39;,
  activetypes       =&gt; &#39;AuthenticatedUser::X.509&#39;,
  defaultmappertype =&gt; &#39;CN&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$identity_asserter_instances = hiera(&#39;identity_asserter_instances&#39;, {})
create_resources(&#39;wls_identity_asserter&#39;,$identity_asserter_instances, $default_params)

identity_asserter_instances:
  &#39;DefaultIdentityAsserter&#39;:
    order:              &#39;3&#39;
    ensure:             &#39;present&#39;
    providerclassname:  &#39;weblogic.security.providers.authentication.DefaultIdentityAsserter&#39;
    attributes:         &#39;DigestReplayDetectionEnabled;UseDefaultUserNameMapper&#39;
    attributesvalues:   &#39;1;1&#39;
    activetypes:        &#39;AuthenticatedUser::X.509&#39;
    defaultmappertype:  &#39;CN&#39;</code></pre>

<h3 id="label-wls_machine">wls_machine</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_machine</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_machine { &#39;test2&#39;:
  ensure        =&gt; &#39;present&#39;,
  listenaddress =&gt; &#39;10.10.10.10&#39;,
  listenport    =&gt; &#39;5556&#39;,
  machinetype   =&gt; &#39;UnixMachine&#39;,
  nmtype        =&gt; &#39;SSL&#39;,
}
# this will use domain2 as wls_setting identifier
wls_machine { &#39;domain2/test2&#39;:
  ensure        =&gt; &#39;present&#39;,
  listenaddress =&gt; &#39;10.10.10.10&#39;,
  listenport    =&gt; &#39;5556&#39;,
  machinetype   =&gt; &#39;UnixMachine&#39;,
  nmtype        =&gt; &#39;SSL&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># Node1 will use default as wls_setting identifier
# Node2 will use domain2 as wls_setting identifier
machines_instances:
  &#39;Node1&#39;:
    ensure:         &#39;present&#39;
    listenaddress:  &#39;10.10.10.100&#39;
    listenport:     &#39;5556&#39;
    machinetype:    &#39;UnixMachine&#39;
    nmtype:         &#39;SSL&#39;
  &#39;domain2/Node2&#39;:
    ensure:         &#39;present&#39;
    listenaddress:  &#39;10.10.10.200&#39;
    listenport:     &#39;5556&#39;
    machinetype:    &#39;UnixMachine&#39;
    nmtype:         &#39;SSL&#39;</code></pre>

<h3 id="label-wls_server">wls_server</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_server</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_server { &#39;wlsServer1&#39;:
  ensure                            =&gt; &#39;present&#39;,
  arguments                         =&gt; &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer1.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer1_err.out&#39;,
  jsseenabled                       =&gt; &#39;0&#39;,
  listenaddress                     =&gt; &#39;10.10.10.100&#39;,
  listenport                        =&gt; &#39;8001&#39;,
  listenportenabled                 =&gt; &#39;1&#39;,
  machine                           =&gt; &#39;Node1&#39;,
  sslenabled                        =&gt; &#39;0&#39;,
  tunnelingenabled                  =&gt; &#39;0&#39;,
  max_message_size                  =&gt; &#39;10000000&#39;,
}</code></pre>

<p>or with log parameters, default file store and ssl</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_server { &#39;default/wlsServer2&#39;:
  ensure                            =&gt; &#39;present&#39;,
  arguments                         =&gt; &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer2.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer2_err.out&#39;,
  jsseenabled                       =&gt; &#39;0&#39;,
  listenaddress                     =&gt; &#39;10.10.10.200&#39;,
  listenport                        =&gt; &#39;8001&#39;,
  listenportenabled                 =&gt; &#39;1&#39;,
  log_file_min_size                 =&gt; &#39;2000&#39;,
  log_filecount                     =&gt; &#39;10&#39;,
  log_number_of_files_limited       =&gt; &#39;1&#39;,
  log_rotate_logon_startup          =&gt; &#39;1&#39;,
  log_rotationtype                  =&gt; &#39;bySize&#39;,
  logfilename                       =&gt; &#39;/var/log/weblogic/wlsServer2.log&#39;,
  log_datasource_filename           =&gt; &#39;logs/datasource.log&#39;,
  log_http_filename                 =&gt; &#39;logs/access.log&#39;,
  log_http_format                   =&gt; &#39;date time cs-method cs-uri sc-status&#39;,
  log_http_format_type              =&gt; &#39;common&#39;,
  log_http_file_count               =&gt; &#39;10&#39;,
  log_http_number_of_files_limited  =&gt; &#39;0&#39;,
  log_redirect_stderr_to_server     =&gt; &#39;0&#39;,
  log_redirect_stdout_to_server     =&gt; &#39;0&#39;,
  logintimeout                      =&gt; &#39;5000&#39;,
  restart_max                       =&gt; &#39;2&#39;,
  machine                           =&gt; &#39;Node2&#39;,
  sslenabled                        =&gt; &#39;1&#39;,
  sslhostnameverificationignored    =&gt; &#39;1&#39;,
  ssllistenport                     =&gt; &#39;8201&#39;,
  two_way_ssl                       =&gt; &#39;0&#39;,
  client_certificate_enforced       =&gt; &#39;0&#39;,
  default_file_store                =&gt; &#39;/path/to/default_file_store/&#39;,
  max_message_size                  =&gt; &#39;25000000&#39;,
  weblogic_plugin_enabled           =&gt; &#39;1&#39;,
}</code></pre>

<p>If you want automatic restart when the server crashes, or automatically
kill when the server hangs</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_server { &#39;wlsServer1&#39;:
  ensure                            =&gt; &#39;present&#39;,
  arguments                         =&gt; &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer1.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer1_err.out&#39;,
  jsseenabled                       =&gt; &#39;0&#39;,
  listenaddress                     =&gt; &#39;10.10.10.100&#39;,
  listenport                        =&gt; &#39;8001&#39;,
  listenportenabled                 =&gt; &#39;1&#39;,
  machine                           =&gt; &#39;Node1&#39;,
  sslenabled                        =&gt; &#39;0&#39;,
  tunnelingenabled                  =&gt; &#39;0&#39;,
  max_message_size                  =&gt; &#39;10000000&#39;,
  auto_restart                      =&gt; &#39;1&#39;,
  autokillwfail                     =&gt; &#39;1&#39;,
}</code></pre>

<p>or with JSSE with custom identity and trust</p>

<pre class="code ruby"><code class="ruby"># this will use domain2 as wls_setting identifier
wls_server { &#39;domain2/wlsServer2&#39;:
  ensure                                =&gt; &#39;present&#39;,
  arguments                             =&gt; &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer2.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer2_err.out&#39;,
  listenaddress                         =&gt; &#39;10.10.10.200&#39;,
  listenport                            =&gt; &#39;8001&#39;,
  listenportenabled                     =&gt; &#39;1&#39;,
  log_file_min_size                     =&gt; &#39;2000&#39;,
  log_filecount                         =&gt; &#39;10&#39;,
  log_number_of_files_limited           =&gt; &#39;1&#39;,
  log_rotate_logon_startup              =&gt; &#39;1&#39;,
  log_rotationtype                      =&gt; &#39;bySize&#39;,
  logfilename                           =&gt; &#39;/var/log/weblogic/wlsServer2.log&#39;,
  machine                               =&gt; &#39;Node2&#39;,
  sslenabled                            =&gt; &#39;1&#39;,
  sslhostnameverifier                   =&gt; &#39;None&#39;,
  sslhostnameverificationignored        =&gt; &#39;1&#39;,
  ssllistenport                         =&gt; &#39;8201&#39;,
  two_way_ssl                           =&gt; &#39;0&#39;
  client_certificate_enforced           =&gt; &#39;0&#39;
  jsseenabled                           =&gt; &#39;1&#39;,
  custom_identity                       =&gt; &#39;1&#39;,
  custom_identity_alias                 =&gt; &#39;node2&#39;,
  custom_identity_keystore_filename     =&gt; &#39;/vagrant/identity_node2.jks&#39;,
  custom_identity_keystore_passphrase   =&gt; &#39;welcome&#39;,
  custom_identity_privatekey_passphrase =&gt; &#39;welcome&#39;,
  trust_keystore_file                   =&gt; &#39;/vagrant/truststore.jks&#39;,
  trust_keystore_passphrase             =&gt; &#39;welcome&#39;,
  max_message_size                      =&gt; &#39;25000000&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
server_instances:
  &#39;wlsServer1&#39;:
     ensure:                         &#39;present&#39;
     arguments:                      &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/data/logs/wlsServer1.out -Dweblogic.Stderr=/data/logs/wlsServer1_err.out&#39;
     listenaddress:                  &#39;10.10.10.100&#39;
     listenport:                     &#39;8001&#39;
     listenportenabled:              &#39;1&#39;
     logfilename:                    &#39;/data/logs/wlsServer1.log&#39;
     machine:                        &#39;Node1&#39;
     sslenabled:                     &#39;1&#39;
     jsseenabled:                    &#39;0&#39;
     ssllistenport:                  &#39;8201&#39;
     sslhostnameverificationignored: &#39;1&#39;
     two_way_ssl:                    &#39;0&#39;
     client_certificate_enforced:    &#39;0&#39;</code></pre>

<p>or with log parameters</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
server_instances:
  &#39;wlsServer1&#39;:
    ensure:                         &#39;present&#39;
    arguments:                      &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/data/logs/wlsServer1.out -Dweblogic.Stderr=/data/logs/wlsServer1_err.out&#39;
    listenaddress:                         &#39;10.10.10.100&#39;
    listenport:                            &#39;8001&#39;
    listenportenabled:                     &#39;1&#39;
    logfilename:                           &#39;/var/log/weblogic/wlsServer1.log&#39;
    log_file_min_size:                     &#39;2000&#39;
    log_filecount:                         &#39;10&#39;
    log_number_of_files_limited:           &#39;1&#39;
    log_rotate_logon_startup:              &#39;1&#39;
    log_rotationtype:                      &#39;bySize&#39;
    log_datasource_filename:               &#39;logs/datasource.log&#39;
    log_http_filename:                     &#39;logs/access.log&#39;
    log_http_file_count:                   &#39;10&#39;
    log_http_number_of_files_limited:      &#39;0&#39;
    log_redirect_stderr_to_server:         &#39;0&#39;
    log_redirect_stdout_to_server:         &#39;0&#39;
    logintimeout:                          &#39;5000&#39;
    restart_max:                           &#39;2&#39;
    machine:                               &#39;Node1&#39;
    sslenabled:                            &#39;1&#39;
    ssllistenport:                         &#39;8201&#39;
    sslhostnameverificationignored:        &#39;1&#39;
    jsseenabled:                           &#39;1&#39;
    default_file_store:                    &#39;/path/to/default_file_store/&#39;
    max_message_size:                      &#39;25000000&#39;</code></pre>

<p>You can also pass server arguments as an array, as it makes it easier to
use references in YAML.</p>

<pre class="code ruby"><code class="ruby">server_vm_args_permsize:      &amp;server_vm_args_permsize     &#39;-XX:PermSize=256m&#39;
server_vm_args_max_permsize:  &amp;server_vm_args_max_permsize &#39;-XX:MaxPermSize=256m&#39;
server_vm_args_memory:        &amp;server_vm_args_memory       &#39;-Xms752m&#39;
server_vm_args_max_memory:    &amp;server_vm_args_max_memory   &#39;-Xmx752m&#39;

# this will use default as wls_setting identifier
server_instances:
  &#39;wlsServer1&#39;:
    ensure:                                &#39;present&#39;
    arguments:
           - *server_vm_args_permsize
           - *server_vm_args_max_permsize
           - *server_vm_args_memory
           - *server_vm_args_max_memory
           - &#39;-Dweblogic.Stdout=/var/log/weblogic/wlsServer1.out&#39;
           - &#39;-Dweblogic.Stderr=/var/log/weblogic/wlsServer1_err.out&#39;
    listenaddress:                         &#39;10.10.10.100&#39;
    listenport:                            &#39;8001&#39;
    logfilename:                           &#39;/var/log/weblogic/wlsServer1.log&#39;
    machine:                               &#39;Node1&#39;
    sslenabled:                            &#39;1&#39;
    ssllistenport:                         &#39;8201&#39;
    sslhostnameverificationignored:        &#39;1&#39;
    jsseenabled:                           &#39;1&#39;
  &#39;wlsServer2&#39;:
    ensure:                                &#39;present&#39;
    arguments:
           - *server_vm_args_permsize
           - *server_vm_args_max_permsize
           - *server_vm_args_memory
           - *server_vm_args_max_memory
           - &#39;-Dweblogic.Stdout=/var/log/weblogic/wlsServer2.out&#39;
           - &#39;-Dweblogic.Stderr=/var/log/weblogic/wlsServer2_err.out&#39;
    listenport:                            &#39;8001&#39;
    logfilename:                           &#39;/var/log/weblogic/wlsServer2.log&#39;
    machine:                               &#39;Node2&#39;
    sslenabled:                            &#39;1&#39;
    ssllistenport:                         &#39;8201&#39;
    sslhostnameverificationignored:        &#39;1&#39;
    listenaddress:                         &#39;10.10.10.200&#39;
    jsseenabled:                           &#39;1&#39;</code></pre>

<p>or with custom identity and custom truststore</p>

<pre class="code ruby"><code class="ruby"># used by nodemanager, control and domain creation
wls_custom_trust:                  &amp;wls_custom_trust              true
wls_trust_keystore_file:           &amp;wls_trust_keystore_file       &#39;/vagrant/truststore.jks&#39;
wls_trust_keystore_passphrase:     &amp;wls_trust_keystore_passphrase &#39;welcome&#39;


# this will use default as wls_setting identifier
server_instances:
  &#39;wlsServer1&#39;:
    ensure:                                &#39;present&#39;
    arguments:                             &#39;-XX:PermSize=256m -XX:MaxPermSize=256m -Xms752m -Xmx752m -Dweblogic.Stdout=/var/log/weblogic/wlsServer1.out -Dweblogic.Stderr=/var/log/weblogic/wlsServer1_err.out&#39;
    listenaddress:                         &#39;10.10.10.100&#39;
    listenport:                            &#39;8001&#39;
    logfilename:                           &#39;/var/log/weblogic/wlsServer1.log&#39;
    machine:                               &#39;Node1&#39;
    sslenabled:                            &#39;1&#39;
    ssllistenport:                         &#39;8201&#39;
    sslhostnameverificationignored:        &#39;1&#39;
    sslhostnameverifier:                   &#39;None&#39;
    useservercerts:                        &#39;0&#39;
    jsseenabled:                           &#39;1&#39;
    custom_identity:                       &#39;1&#39;
    custom_identity_keystore_filename:     &#39;/vagrant/identity_node1.jks&#39;
    custom_identity_keystore_passphrase:   &#39;welcome&#39;
    custom_identity_alias:                 &#39;node1&#39;
    custom_identity_privatekey_passphrase: &#39;welcome&#39;
    trust_keystore_file:                   *wls_trust_keystore_file
    trust_keystore_passphrase:             *wls_trust_keystore_passphrase</code></pre>

<h3 id="label-wls_server_channel">wls_server_channel</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, the title must also contain the server name</p>

<p>or use puppet resource wls_server_channel</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_server_channel { &#39;default/wlsServer1:Channel-Cluster&#39;:
  ensure                      =&gt; &#39;present&#39;,
  channel_identity_customized =&gt; &#39;0&#39;,
  client_certificate_enforced =&gt; &#39;0&#39;,
  custom_identity_alias       =&gt; &#39;node1&#39;,
  enabled                     =&gt; &#39;1&#39;,
  httpenabled                 =&gt; &#39;1&#39;,
  listenaddress               =&gt; &#39;10.10.10.100&#39;,
  listenport                  =&gt; &#39;8003&#39;,
  max_message_size            =&gt; &#39;25000000&#39;,
  outboundenabled             =&gt; &#39;0&#39;,
  protocol                    =&gt; &#39;cluster-broadcast&#39;,
  publicaddress               =&gt; &#39;10.10.10.100&#39;,
  publicport                  =&gt; &#39;8003&#39;,
  tunnelingenabled            =&gt; &#39;0&#39;,
  two_way_ssl                 =&gt; &#39;0&#39;,
}
wls_server_channel { &#39;default/wlsServer1:HTTP&#39;:
  ensure                      =&gt; &#39;present&#39;,
  channel_identity_customized =&gt; &#39;0&#39;,
  client_certificate_enforced =&gt; &#39;0&#39;,
  custom_identity_alias       =&gt; &#39;node1&#39;,
  enabled                     =&gt; &#39;1&#39;,
  httpenabled                 =&gt; &#39;1&#39;,
  listenport                  =&gt; &#39;8004&#39;,
  max_message_size            =&gt; &#39;35000000&#39;,
  outboundenabled             =&gt; &#39;0&#39;,
  protocol                    =&gt; &#39;http&#39;,
  publicport                  =&gt; &#39;8104&#39;,
  tunnelingenabled            =&gt; &#39;0&#39;,
  two_way_ssl                 =&gt; &#39;0&#39;,
}
wls_server_channel { &#39;default/wlsServer2:Channel-Cluster&#39;:
  ensure                      =&gt; &#39;present&#39;,
  channel_identity_customized =&gt; &#39;0&#39;,
  client_certificate_enforced =&gt; &#39;0&#39;,
  custom_identity_alias       =&gt; &#39;node2&#39;,
  enabled                     =&gt; &#39;1&#39;,
  httpenabled                 =&gt; &#39;1&#39;,
  listenaddress               =&gt; &#39;10.10.10.200&#39;,
  listenport                  =&gt; &#39;8003&#39;,
  max_message_size            =&gt; &#39;25000000&#39;,
  outboundenabled             =&gt; &#39;0&#39;,
  protocol                    =&gt; &#39;cluster-broadcast&#39;,
  publicaddress               =&gt; &#39;10.10.10.200&#39;,
  publicport                  =&gt; &#39;8003&#39;,
  tunnelingenabled            =&gt; &#39;0&#39;,
  two_way_ssl                 =&gt; &#39;0&#39;,
}
wls_server_channel { &#39;default/wlsServer2:HTTP&#39;:
  ensure                      =&gt; &#39;present&#39;,
  channel_identity_customized =&gt; &#39;0&#39;,
  client_certificate_enforced =&gt; &#39;0&#39;,
  custom_identity_alias       =&gt; &#39;node2&#39;,
  enabled                     =&gt; &#39;1&#39;,
  httpenabled                 =&gt; &#39;1&#39;,
  listenport                  =&gt; &#39;8004&#39;,
  max_message_size            =&gt; &#39;35000000&#39;,
  outboundenabled             =&gt; &#39;0&#39;,
  protocol                    =&gt; &#39;http&#39;,
  publicport                  =&gt; &#39;8104&#39;,
  tunnelingenabled            =&gt; &#39;0&#39;,
  two_way_ssl                 =&gt; &#39;0&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
server_channel_instances:
  &#39;wlsServer1:Channel-Cluster&#39;:
    ensure:           &#39;present&#39;
    enabled:          &#39;1&#39;
    httpenabled:      &#39;1&#39;
    listenaddress:    *domain_node1_address
    listenport:       &#39;8003&#39;
    outboundenabled:  &#39;0&#39;
    protocol:         &#39;cluster-broadcast&#39;
    publicaddress:    *domain_node1_address
    tunnelingenabled: &#39;0&#39;
    # require:
    #   - Wls_server[wlsServer1]
  &#39;wlsServer2:Channel-Cluster&#39;:
    ensure:           &#39;present&#39;
    enabled:          &#39;1&#39;
    httpenabled:      &#39;1&#39;
    listenaddress:    *domain_node2_address
    listenport:       &#39;8003&#39;
    outboundenabled:  &#39;0&#39;
    protocol:         &#39;cluster-broadcast&#39;
    publicaddress:    *domain_node2_address
    tunnelingenabled: &#39;0&#39;
    # require:
    #   - Wls_server[wlsServer2]
  &#39;wlsServer1:HTTP&#39;:
    ensure:           &#39;present&#39;
    enabled:          &#39;1&#39;
    httpenabled:      &#39;1&#39;
    listenport:       &#39;8004&#39;
    publicport:       &#39;8104&#39;
    outboundenabled:  &#39;0&#39;
    protocol:         &#39;http&#39;
    tunnelingenabled: &#39;0&#39;
    max_message_size: &#39;35000000&#39;
    # require:
    #   - Wls_server[wlsServer1]
  &#39;wlsServer2:HTTP&#39;:
    ensure:           &#39;present&#39;
    enabled:          &#39;1&#39;
    httpenabled:      &#39;1&#39;
    listenport:       &#39;8004&#39;
    publicport:       &#39;8104&#39;
    outboundenabled:  &#39;0&#39;
    protocol:         &#39;http&#39;
    tunnelingenabled: &#39;0&#39;
    max_message_size: &#39;35000000&#39;
    # require:
    #   - Wls_server[wlsServer2]</code></pre>

<h3 id="label-wls_server_tlog">wls_server_tlog</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, the title must also contain the server name</p>

<p>or use puppet resource wls_server_tlog</p>

<p>For this you need to configure a non transactional datasource</p>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">datasource_instances:
    &#39;tlogDS&#39;:
      ensure:                      &#39;present&#39;
      drivername:                  &#39;oracle.jdbc.OracleDriver&#39;
      globaltransactionsprotocol:  &#39;None&#39;
      initialcapacity:             &#39;2&#39;
      jndinames:
        - &#39;jdbc/tlogDS&#39;
      maxcapacity:                 &#39;15&#39;
      target:
        - &#39;WebServer1&#39;
        - &#39;JmsWlsServer1&#39;
      targettype:
        - &#39;Server&#39;
        - &#39;Server&#39;
      testtablename:               &#39;SQL SELECT 1 FROM DUAL&#39;
      url:                         &quot;jdbc:oracle:thin:@wlsdb.example.com:1521/wlsrepos.example.com&quot;
      user:                        &#39;tlog&#39;
      password:                    &#39;tlog&#39;
      usexa:                       &#39;1&#39;

server_tlog_instances:
  &#39;JmsWlsServer1&#39;:
      ensure:                      &#39;present&#39;
      tlog_enabled:                &#39;true&#39;
      tlog_datasource:             &#39;tlogDS&#39;
      tlog_datasource_prefix:      &#39;TLOG_JmsWlsServer1_&#39;
  &#39;WebServer1&#39;:
      ensure:                      &#39;present&#39;
      tlog_enabled:                &#39;true&#39;
      tlog_datasource:             &#39;tlogDS&#39;
      tlog_datasource_prefix:      &#39;TLOG_WebServer1_&#39;</code></pre>

<p>Or as manifest</p>

<pre class="code ruby"><code class="ruby">wls_server_tlog { &#39;default/JmsWlsServer1&#39;:
  ensure                 =&gt; &#39;present&#39;,
  tlog_datasource        =&gt; &#39;tlogDS&#39;,
  tlog_datasource_prefix =&gt; &#39;TLOG_JmsWlsServer1_&#39;,
  tlog_enabled           =&gt; &#39;true&#39;,
}
wls_server_tlog { &#39;default/WebServer1&#39;:
  ensure                 =&gt; &#39;present&#39;,
  tlog_datasource        =&gt; &#39;tlogDS&#39;,
  tlog_datasource_prefix =&gt; &#39;TLOG_WebServer1_&#39;,
  tlog_enabled           =&gt; &#39;true&#39;,
}</code></pre>

<h3 id="label-wls_cluster">wls_cluster</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_cluster</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_cluster { &#39;WebCluster&#39;:
  ensure           =&gt; &#39;present&#39;,
  messagingmode    =&gt; &#39;unicast&#39;,
  migrationbasis   =&gt; &#39;consensus&#39;,
  servers          =&gt; [&#39;wlsServer3&#39;,&#39;wlsServer4&#39;],
  multicastaddress =&gt; &#39;239.192.0.0&#39;,
  multicastport    =&gt; &#39;7001&#39;,
}
# this will use default as wls_setting identifier
wls_cluster { &#39;WebCluster2&#39;:
  ensure                  =&gt; &#39;present&#39;,
  messagingmode           =&gt; &#39;unicast&#39;,
  migrationbasis          =&gt; &#39;consensus&#39;,
  servers                 =&gt; [&#39;wlsServer3&#39;,&#39;wlsServer4&#39;],
  unicastbroadcastchannel =&gt; &#39;channel&#39;,
  multicastaddress        =&gt; &#39;239.192.0.0&#39;,
  multicastport           =&gt; &#39;7001&#39;,
  frontendhost            =&gt; &#39;10.10.10.10&#39;
  frontendhttpport        =&gt; &#39;1001&#39;
  frontendhttpsport       =&gt; &#39;1002&#39;
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
cluster_instances:
  &#39;WebCluster&#39;:
    ensure:         &#39;present&#39;
    messagingmode:  &#39;unicast&#39;
    migrationbasis: &#39;consensus&#39;
    servers:
      - &#39;wlsServer1&#39;
      - &#39;wlsServer2&#39;</code></pre>

<h3 id="label-wls_migratable_target">wls_migratable_target</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_migratable_target</p>

<pre class="code ruby"><code class="ruby">wls_migratable_target { &#39;wlsServer1 (migratable)&#39;:
  ensure                     =&gt; &#39;present&#39;,
  cluster                    =&gt; &#39;WebCluster&#39;,
  migration_policy           =&gt; &#39;manual&#39;,
  number_of_restart_attempts =&gt; &#39;6&#39;,
  seconds_between_restarts   =&gt; &#39;30&#39;,
  user_preferred_server      =&gt; &#39;wlsServer1&#39;,
}
wls_migratable_target { &#39;wlsServer2 (migratable)&#39;:
  ensure                     =&gt; &#39;present&#39;,
  cluster                    =&gt; &#39;WebCluster&#39;,
  migration_policy           =&gt; &#39;manual&#39;,
  number_of_restart_attempts =&gt; &#39;6&#39;,
  seconds_between_restarts   =&gt; &#39;30&#39;,
  user_preferred_server      =&gt; &#39;wlsServer2&#39;,
}

wls_migratable_target { &#39;Wls11gSetting/wlsServer1 (migratable)&#39;:
  ensure                     =&gt; &#39;present&#39;,
  cluster                    =&gt; &#39;WebCluster&#39;,
  migration_policy           =&gt; &#39;manual&#39;,
  number_of_restart_attempts =&gt; &#39;6&#39;,
  seconds_between_restarts   =&gt; &#39;30&#39;,
  user_preferred_server      =&gt; &#39;wlsServer1&#39;,
}
wls_migratable_target { &#39;Wls11gSetting/wlsServer2 (migratable)&#39;:
  ensure                     =&gt; &#39;present&#39;,
  cluster                    =&gt; &#39;WebCluster&#39;,
  migration_policy           =&gt; &#39;manual&#39;,
  number_of_restart_attempts =&gt; &#39;6&#39;,
  seconds_between_restarts   =&gt; &#39;30&#39;,
  user_preferred_server      =&gt; &#39;wlsServer2&#39;,
}</code></pre>

<p>or in hiera</p>

<pre class="code ruby"><code class="ruby">migratable_target_instances:
  &#39;wlsServer1 (migratable)&#39;:
      ensure:                     &#39;present&#39;
      cluster:                    &#39;WebCluster&#39;
      migration_policy:           &#39;manual&#39;
      number_of_restart_attempts: &#39;6&#39;
      seconds_between_restarts:   &#39;30&#39;
      user_preferred_server:      &#39;wlsServer1&#39;
      require:
        - Wls_cluster[WebCluster]
  &#39;wlsServer2 (migratable)&#39;:
      ensure:                     &#39;present&#39;
      cluster:                    &#39;WebCluster&#39;
      migration_policy:           &#39;manual&#39;
      number_of_restart_attempts: &#39;6&#39;
      seconds_between_restarts:   &#39;30&#39;
      user_preferred_server:      &#39;wlsServer2&#39;
      require:
        - Wls_cluster[WebCluster]</code></pre>

<h3 id="label-wls_singleton_service">wls_singleton_service</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_singleton_service</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_singleton_service { &#39;SingletonService&#39;:
    ensure                           =&gt; &#39;present&#39;,
    cluster                          =&gt; &#39;ClusterName&#39;,
    user_preferred_server            =&gt; &#39;PreferredServerName&#39;,
    class_name                       =&gt; &#39;com.example.package.SingletonServiceImpl&#39;,
    constrained_candidate_servers    =&gt; [&#39;PreferredServerName&#39;, &#39;OtherServerName&#39;],
    additional_migration_attempts    =&gt; 2,
    millis_to_sleep_between_attempts =&gt; 300000,
    notes                            =&gt; &#39;This is a singleton service that prefers to run on PreferredServerName, but can be migrated to OtherServerName.&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
singleton_service_instances:
  &#39;SingletonService&#39;:
    ensure:                            &#39;present&#39;
    cluster:                           &#39;ClusterName&#39;
    user_preferred_server:             &#39;PreferredServerName&#39;
    class_name:                        &#39;com.example.package.SingletonServiceImpl&#39;
    constrained_candidate_servers:
      - &#39;PreferredServerName&#39;
      - &#39;OtherServerName&#39;
    additional_migration_attempts:     2
    millis_to_sleep_between_attempts:  300000
    notes:                             &#39;This is a singleton service that prefers to run on PreferredServerName, but can be migrated to OtherServerName.&#39;</code></pre>

<h3 id="label-wls_coherence_cluster">wls_coherence_cluster</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_coherence_cluster</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_coherence_cluster { &#39;WebCoherenceCluster&#39;:
  ensure          =&gt; &#39;present&#39;,
  clusteringmode  =&gt; &#39;unicast&#39;,
  multicastport   =&gt; &#39;33389&#39;,
  target          =&gt; [&#39;WebCluster&#39;],
  targettype      =&gt; [&#39;Cluster&#39;],
  unicastport     =&gt; &#39;9999&#39;,
  storage_enabled =&gt;  &#39;1&#39;,
}
wls_coherence_cluster { &#39;defaultCoherenceCluster&#39;:
  ensure         =&gt; &#39;present&#39;,
  clusteringmode =&gt; &#39;unicast&#39;,
  multicastport  =&gt; &#39;33387&#39;,
  unicastport    =&gt; &#39;8888&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$coherence_cluster_instances = hiera(&#39;coherence_cluster_instances&#39;, {})
create_resources(&#39;wls_coherence_cluster&#39;,$coherence_cluster_instances, $default_params)


coherence_cluster_instances:
  &#39;clusterCoherence&#39;:
    ensure:           &#39;present&#39;
    clusteringmode:   &#39;unicast&#39;
    multicastaddress: &#39;231.1.1.1&#39;
    multicastport:    &#39;33387&#39;
    target:           [&#39;DynamicCluster&#39;]
    targettype:       [&#39;Cluster&#39;]
    unicastport:      &#39;9099&#39;
    unicastaddress:   &#39;10.10.10.100,10.10.10.200&#39;
    storage_enabled:  &#39;1&#39;</code></pre>

<h3 id="label-wls_coherence_server">wls_coherence_server</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_coherence_server</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_coherence_server { &#39;default&#39;:
  ensure         =&gt; &#39;present&#39;,
  server         =&gt; &#39;LocalMachine&#39;,
  unicastaddress =&gt; &#39;localhost&#39;,
  unicastport    =&gt; &#39;8888&#39;,
}</code></pre>

<h3 id="label-wls_server_template">wls_server_template</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_server_template</p>

<pre class="code ruby"><code class="ruby">wls_server_template { &#39;default/ServerTemplateWeb&#39;:
  ensure        =&gt; &#39;present&#39;,
  arguments     =&gt; [&#39;-XX:PermSize=256m&#39;,&#39;-XX:MaxPermSize=256m&#39;],
  listenport    =&gt; &#39;9101&#39;,
  sslenabled    =&gt; &#39;1&#39;,
  ssllistenport =&gt; &#39;9102&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$server_template_instances = hiera(&#39;server_template_instances&#39;, {})
create_resources(&#39;wls_server_template&#39;,$server_template_instances, $default_params)


server_vm_args_permsize:      &amp;server_vm_args_permsize     &#39;-XX:PermSize=256m&#39;
server_vm_args_max_permsize:  &amp;server_vm_args_max_permsize &#39;-XX:MaxPermSize=256m&#39;
server_vm_args_memory:        &amp;server_vm_args_memory       &#39;-Xms752m&#39;
server_vm_args_max_memory:    &amp;server_vm_args_max_memory   &#39;-Xmx752m&#39;


server_template_instances:
 &#39;ServerTemplateWeb&#39;:
  ensure:        &#39;present&#39;
  arguments:
                 - *server_vm_args_permsize
                 - *server_vm_args_max_permsize
                 - *server_vm_args_memory
                 - *server_vm_args_max_memory
  listenport:    &#39;9101&#39;
  sslenabled:    &#39;1&#39;
  ssllistenport: &#39;9102&#39;</code></pre>

<h3 id="label-wls_dynamic_cluster">wls_dynamic_cluster</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_dynamic_cluster</p>

<pre class="code ruby"><code class="ruby">wls_dynamic_cluster { &#39;DynamicCluster&#39;:
  ensure                 =&gt; &#39;present&#39;,
  calculated_listen_port =&gt; &#39;0&#39;,  # &#39;0&#39; or &#39;1&#39;
  maximum_server_count   =&gt; &#39;2&#39;,
  nodemanager_match      =&gt; &#39;Node1,Node2&#39;,
  server_name_prefix     =&gt; &#39;DynCluster-&#39;,
  server_template_name   =&gt; &#39;ServerTemplateWeb&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">$default_params = {}
$dynamic_cluster_instances = hiera(&#39;dynamic_cluster_instances&#39;, {})
create_resources(&#39;wls_dynamic_cluster&#39;,$dynamic_cluster_instances, $default_params)

dynamic_cluster_instances:
  &#39;DynamicCluster&#39;:
    ensure:                 &#39;present&#39;
    calculated_listen_port: &#39;0&#39;        # &#39;0&#39; or &#39;1&#39;
    maximum_server_count:   &#39;2&#39;
    nodemanager_match:      &#39;Node1,Node2&#39;
    server_name_prefix:     &#39;DynCluster-&#39;
    server_template_name:   &#39;ServerTemplateWeb&#39;</code></pre>

<h3 id="label-wls_virtual_host">wls_virtual_host</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_virtual_host</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_virtual_host { &#39;default/WS&#39;:
  ensure             =&gt; &#39;present&#39;,
  channel            =&gt; &#39;HTTP&#39;,
  target             =&gt; [&#39;WebCluster&#39;],
  targettype         =&gt; [&#39;Cluster&#39;],
  virtual_host_names =&gt; [&#39;admin.example.com&#39;,&#39;10.10.10.10&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
virtual_host_instances:
 &#39;WS&#39;:
   ensure:     &#39;present&#39;
   channel:    &#39;HTTP&#39;
   target:
     - &#39;WebCluster&#39;
   targettype:
     - &#39;Cluster&#39;
   virtual_host_names:
     - &#39;admin.example.com&#39;
     - &#39;10.10.10.10&#39;</code></pre>

<h3 id="label-wls_workmanager_constaint">wls_workmanager_constaint</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_workmanager_constaint</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_workmanager_constraint { &#39;CapacityConstraint&#39;:
  ensure          =&gt; &#39;present&#39;,
  constrainttype  =&gt; &#39;Capacity&#39;,
  constraintvalue =&gt; &#39;20&#39;,
  target          =&gt; [&#39;WebCluster&#39;],
  targettype      =&gt; [&#39;Cluster&#39;],
}
wls_workmanager_constraint { &#39;MaxThreadsConstraint&#39;:
  ensure          =&gt; &#39;present&#39;,
  constrainttype  =&gt; &#39;MaxThreadsConstraint&#39;,
  constraintvalue =&gt; &#39;5&#39;,
  target          =&gt; [&#39;WebCluster&#39;],
  targettype      =&gt; [&#39;Cluster&#39;],
}
wls_workmanager_constraint { &#39;MinThreadsConstraint&#39;:
  ensure          =&gt; &#39;present&#39;,
  constrainttype  =&gt; &#39;MinThreadsConstraint&#39;,
  constraintvalue =&gt; &#39;2&#39;,
  target          =&gt; [&#39;WebCluster&#39;],
  targettype      =&gt; [&#39;Cluster&#39;],
}
wls_workmanager_constraint { &#39;FairShareReqClass&#39;:
  ensure          =&gt; &#39;present&#39;,
  constrainttype  =&gt; &#39;FairShareRequestClasses&#39;,
  constraintvalue =&gt; &#39;50&#39;,
  target          =&gt; [&#39;WebCluster&#39;],
  targettype      =&gt; [&#39;Cluster&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
workmanager_constraint_instances:
  &#39;CapacityConstraint&#39;:
    ensure:          &#39;present&#39;
    constraintvalue: &#39;20&#39;
    target:
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Cluster&#39;
    constrainttype:  &#39;Capacity&#39;
  &#39;MaxThreadsConstraint&#39;:
    ensure:          &#39;present&#39;
    constraintvalue: &#39;5&#39;
    target:
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Cluster&#39;
    constrainttype:  &#39;MaxThreadsConstraint&#39;
  &#39;MinThreadsConstraint&#39;:
    ensure:          &#39;present&#39;
    constraintvalue: &#39;2&#39;
    target:
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Cluster&#39;
    constrainttype:  &#39;MinThreadsConstraint&#39;
  &#39;FairShareReqClass&#39;:
    ensure:          &#39;present&#39;
    constrainttype:  &#39;FairShareRequestClasses&#39;
    constraintvalue: &#39;50&#39;
    target:
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Cluster&#39;</code></pre>

<h3 id="label-wls_workmanager">wls_workmanager</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_workmanager</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_workmanager { &#39;WorkManagerConstraints&#39;:
  ensure                =&gt; &#39;present&#39;,
  capacity              =&gt; &#39;CapacityConstraint&#39;,
  maxthreadsconstraint  =&gt; &#39;MaxThreadsConstraint&#39;,
  minthreadsconstraint  =&gt; &#39;MinThreadsConstraint&#39;,
  fairsharerequestclass =&gt; &#39;FairShareReqClass&#39;,
  stuckthreads          =&gt; &#39;0&#39;,
  target                =&gt; [&#39;WebCluster&#39;],
  targettype            =&gt; [&#39;Cluster&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
workmanager_instances:
  &#39;WorkManagerConstraints&#39;:
    ensure:                &#39;present&#39;
    capacity:              &#39;CapacityConstraint&#39;
    maxthreadsconstraint:  &#39;MaxThreadsConstraint&#39;
    minthreadsconstraint:  &#39;MinThreadsConstraint&#39;
    fairsharerequestclass: &#39;FairShareReqClass&#39;
    stuckthreads:          &#39;1&#39;
    target:
      - &#39;WebCluster&#39;
    targettype:
      - &#39;Cluster&#39;</code></pre>

<h3 id="label-wls_jdbc_persistence_store">wls_jdbc_persistence_store</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_jdbc_persistence_store</p>

<pre class="code ruby"><code class="ruby">wls_jdbc_persistence_store { &#39;JDBCStoreX&#39;:
  ensure      =&gt; &#39;present&#39;,
  datasource  =&gt; &#39;jmsDS&#39;,
  prefix_name =&gt; &#39;dev_&#39;,
  target      =&gt; [&#39;wlsServer1&#39;],
  targettype  =&gt; [&#39;Server&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">file_jdbc_store_instances:
  &#39;JDBCStoreX&#39;:
      ensure:      &#39;present&#39;
      datasource:  &#39;jmsDS&#39;
      prefix_name: &#39;dev_&#39;
      target:      [&#39;wlsServer1&#39;]
      targettype:  [&#39;Server&#39;]</code></pre>

<h2 id="label-wls_foreign_jndi_provider">wls_foreign_jndi_provider</h2>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_foreign_jndi_provider</p>

<pre class="code ruby"><code class="ruby">wls_foreign_jndi_provider { &#39;DomainA&#39;:
  ensure                  =&gt; &#39;present&#39;,
  initial_context_factory =&gt; &#39;weblogic.jndi.WLInitialContextFactory&#39;,
  provider_properties     =&gt; [&#39;bbb=aaaa&#39;, &#39;xxx=123&#39;],
  provider_url            =&gt; &#39;t3://10.10.10.100:7001&#39;,
  target                  =&gt; [&#39;WebCluster&#39;],
  targettype              =&gt; [&#39;Cluster&#39;],
  user                    =&gt; &#39;weblogic&#39;,
  password                =&gt; &#39;weblogic1&#39;,
}
wls_foreign_jndi_provider { &#39;default/LDAP&#39;:
  ensure                  =&gt; &#39;present&#39;,
  initial_context_factory =&gt; &#39;com.sun.jndi.ldap.LdapCtxFactory&#39;,
  provider_properties     =&gt; [&#39;referral=follow&#39;],
  provider_url            =&gt; &#39;ldap://:10.10.10.100:389&#39;,
  target                  =&gt; [&#39;AdminServer&#39;],
  targettype              =&gt; [&#39;Server&#39;],
  user                    =&gt; &#39;cn=orcladmin&#39;,
  password                =&gt; &#39;weblogic1&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">wls_foreign_jndi_provider_instances:
  &#39;DomainA&#39;:
    ensure:                  &#39;present&#39;
    initial_context_factory: &#39;weblogic.jndi.WLInitialContextFactory&#39;
    provider_properties:     [&#39;bbb=aaaa&#39;, &#39;xxx=123&#39;]
    provider_url:            &#39;t3://10.10.10.100:7001&#39;
    target:                  [&#39;WebCluster&#39;]
    targettype:              [&#39;Cluster&#39;]
    user:                    &#39;weblogic&#39;
    password:                &#39;weblogic1&#39;
  &#39;LDAP&#39;:
    ensure:                  &#39;present&#39;
    initial_context_factory: &#39;com.sun.jndi.ldap.LdapCtxFactory&#39;
    provider_properties:     [&#39;referral=follow&#39;]
    provider_url:            &#39;ldap://:10.10.10.100:389&#39;
    target:                  [&#39;AdminServer&#39;]
    targettype:              [&#39;Server&#39;]
    user:                    &#39;cn=orcladmin&#39;
    password:                &#39;weblogic1&#39;</code></pre>

<h2 id="label-wls_foreign_jndi_provider">wls_foreign_jndi_provider</h2>

<p>_link it needs wls_setting and when identifier is not provided it will use
the &#39;default&#39;.</p>

<p>or use puppet resource wls_foreign_jndi_provider _link</p>

<pre class="code ruby"><code class="ruby">wls_foreign_jndi_provider_link { &#39;default/DomainA:aaaa&#39;:
  ensure           =&gt; &#39;present&#39;,
  local_jndi_name  =&gt; &#39;aaaa&#39;,
  remote_jndi_name =&gt; &#39;bbbb&#39;,
}
wls_foreign_jndi_provider_link { &#39;default/LDAP:aaaaa&#39;:
  ensure           =&gt; &#39;present&#39;,
  local_jndi_name  =&gt; &#39;aaaaa&#39;,
  remote_jndi_name =&gt; &#39;bbbbb&#39;,
}
wls_foreign_jndi_provider_link { &#39;default/LDAP:ccccc&#39;:
  ensure           =&gt; &#39;present&#39;,
  local_jndi_name  =&gt; &#39;ccccc&#39;,
  remote_jndi_name =&gt; &#39;ddddd&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">wls_foreign_jndi_provider_link_instances:
  &#39;DomainA:aaaa&#39;:
    ensure:                  &#39;present&#39;
    local_jndi_name:         &#39;aaaa&#39;
    remote_jndi_name:        &#39;bbbb&#39;
    require:
      - Wls_foreign_jndi_provider[DomainA]
  &#39;LDAP:aaaaa&#39;:
    ensure:                  &#39;present&#39;
    local_jndi_name:         &#39;aaaaa&#39;
    remote_jndi_name:        &#39;bbbbb&#39;
    require:
      - Wls_foreign_jndi_provider[LDAP]
  &#39;LDAP:ccccc&#39;:
    ensure:                  &#39;present&#39;
    local_jndi_name:         &#39;ccccc&#39;
    remote_jndi_name:        &#39;ddddd&#39;
    require:
      - Wls_foreign_jndi_provider[LDAP]</code></pre>

<h3 id="label-wls_file_persistence_store">wls_file_persistence_store</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_file_persistence_store</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_file_persistence_store { &#39;jmsFile1&#39;:
  ensure     =&gt; &#39;present&#39;,
  directory  =&gt; &#39;persistence1&#39;,
  target     =&gt; [&#39;wlsServer1&#39;],
  targettype =&gt; [&#39;Server&#39;],
}
# this will use default as wls_setting identifier
wls_file_persistence_store { &#39;jmsFile2&#39;:
  ensure     =&gt; &#39;present&#39;,
  directory  =&gt; &#39;persistence2&#39;,
  target     =&gt; [&#39;wlsServer2&#39;],
  targettype =&gt; [&#39;Server&#39;],
}
# this will use default as wls_setting identifier
wls_file_persistence_store { &#39;jmsFileSAFAgent1&#39;:
  ensure     =&gt; &#39;present&#39;,
  directory  =&gt; &#39;persistenceSaf1&#39;,
  target     =&gt; [&#39;wlsServer1&#39;],
  targettype =&gt; [&#39;Server&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
file_persistence_store_instances:
  &#39;jmsFile1&#39;:
    ensure:         &#39;present&#39;
    directory:      &#39;persistence1&#39;
    target:
     - &#39;wlsServer1&#39;
    targettype:
     - &#39;Server&#39;
  &#39;jmsFile2&#39;:
    ensure:         &#39;present&#39;
    directory:      &#39;persistence2&#39;
    target:
     - &#39;wlsServer2&#39;
    targettype:
     - &#39;Server&#39;
  &#39;jmsFileSAFAgent1&#39;:
    ensure:         &#39;present&#39;
    directory:      &#39;persistenceSaf1&#39;
    target:
     - &#39;wlsServer1&#39;
    targettype:
     - &#39;Server&#39;</code></pre>

<h3 id="label-wls_safagent">wls_safagent</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_safagent</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_safagent { &#39;jmsSAFAgent1&#39;:
  ensure              =&gt; &#39;present&#39;,
  persistentstore     =&gt; &#39;jmsFileSAFAgent1&#39;,
  persistentstoretype =&gt; &#39;FileStore&#39;,
  servicetype         =&gt; &#39;Sending-only&#39;,
  target              =&gt; [&#39;wlsServer1&#39;],
  targettype          =&gt; [&#39;Server&#39;],
}
# this will use default as wls_setting identifier
wls_safagent { &#39;jmsSAFAgent2&#39;:
  ensure      =&gt; &#39;present&#39;,
  servicetype =&gt; &#39;Both&#39;,
  target      =&gt; [&#39;wlsServer2&#39;],
  targettype  =&gt; [&#39;Server&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
safagent_instances:
  &#39;jmsSAFAgent1&#39;:
        ensure:              &#39;present&#39;
        target:
          - &#39;wlsServer1&#39;
        targettype:
          - &#39;Server&#39;
        servicetype:         &#39;Sending-only&#39;
        persistentstore:     &#39;jmsFileSAFAgent1&#39;
        persistentstoretype: &#39;FileStore&#39;
  &#39;jmsSAFAgent2&#39;:
        ensure:              &#39;present&#39;
        target:
          - &#39;wlsServer2&#39;
        targettype:
          - &#39;Server&#39;
        servicetype:         &#39;Both&#39;</code></pre>

<h3 id="label-wls_datasource">wls_datasource</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>xaproperties are case sensitive and should be provided as an array
containing all values. Use WLST and run ls() in the JDBCXAParams component
of your datasource to determine the valid XA properties which can be set.
Preserve the order to ensure idempotent behaviour.</p>

<p>or use puppet resource wls_datasource</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier, no XA properties
wls_datasource { &#39;hrDS&#39;:
  ensure                           =&gt; &#39;present&#39;,
  connectioncreationretryfrequency =&gt; &#39;0&#39;,
  drivername                       =&gt; &#39;oracle.jdbc.xa.client.OracleXADataSource&#39;,
  extraproperties                  =&gt; [&#39;SendStreamAsBlob=true&#39;, &#39;oracle.net.CONNECT_TIMEOUT=10001&#39;],
  fanenabled                       =&gt; &#39;0&#39;,
  globaltransactionsprotocol       =&gt; &#39;TwoPhaseCommit&#39;,
  initialcapacity                  =&gt; &#39;2&#39;,
  initsql                          =&gt; &#39;None&#39;,
  jndinames                        =&gt; [&#39;jdbc/hrDS&#39;, &#39;jdbc/hrDS2&#39;],
  maxcapacity                      =&gt; &#39;15&#39;,
  mincapacity                      =&gt; &#39;1&#39;,
  rowprefetchenabled               =&gt; &#39;0&#39;,
  rowprefetchsize                  =&gt; &#39;48&#39;,
  secondstotrustidlepoolconnection =&gt; &#39;10&#39;,
  statementcachesize               =&gt; &#39;10&#39;,
  target                           =&gt; [&#39;wlsServer1&#39;, &#39;wlsServer2&#39;],
  targettype                       =&gt; [&#39;Server&#39;, &#39;Server&#39;],
  testconnectionsonreserve         =&gt; &#39;0&#39;,
  testfrequency                    =&gt; &#39;120&#39;,
  testtablename                    =&gt; &#39;SQL SELECT 1 FROM DUAL&#39;,
  url                              =&gt; &#39;jdbc:oracle:thin:@dbagent2.alfa.local:1521/test.oracle.com&#39;,
  user                             =&gt; &#39;hr&#39;,
  usexa                            =&gt; &#39;0&#39;,
}
# This will use XA Properties
wls_datasource { &#39;jmsDS&#39;:
  ensure                     =&gt; &#39;present&#39;,
  drivername                 =&gt; &#39;com.mysql.jdbc.Driver&#39;,
  globaltransactionsprotocol =&gt; &#39;None&#39;,
  initialcapacity            =&gt; &#39;1&#39;,
  jndinames                  =&gt; [&#39;jmsDS&#39;],
  maxcapacity                =&gt; &#39;15&#39;,
  mincapacity                =&gt; &#39;1&#39;,
  statementcachesize         =&gt; &#39;10&#39;,
  testconnectionsonreserve   =&gt; &#39;0&#39;,
  target                     =&gt; [&#39;WebCluster&#39;],
  targettype                 =&gt; [&#39;Cluster&#39;],
  testtablename              =&gt; &#39;SQL SELECT 1&#39;,
  url                        =&gt; &#39;jdbc:mysql://10.10.10.10:3306/jms&#39;,
  user                       =&gt; &#39;jms&#39;,
  password                   =&gt; &#39;pass&#39;,
  usexa                      =&gt; &#39;1&#39;,
  xaproperties               =&gt; [&#39;RollbackLocalTxUponConnClose=0&#39;, &#39;RecoverOnlyOnce=0&#39;, &#39;KeepLogicalConnOpenOnRelease=0&#39;, &#39;KeepXaConnTillTxComplete=1&#39;, &#39;XaTransactionTimeout=14400&#39;, &#39;XaRetryIntervalSeconds=60&#39;, &#39;XaRetryDurationSeconds=0&#39;, &#39;ResourceHealthMonitoring=1&#39;, &#39;NewXaConnForCommit=0&#39;, &#39;XaSetTransactionTimeout=1&#39;, &#39;XaEndOnlyOnce=0&#39;, &#39;NeedTxCtxOnClose=0&#39;],
  # To Optionally Configure as Gridlink Datasource
  fanenabled                 =&gt; &#39;1&#39;,
  onsnodelist                =&gt; &#39;10.10.10.110:6200,10.10.10.111:6200&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
datasource_instances:
    &#39;hrDS&#39;:
      ensure:                           &#39;present&#39;
      drivername:                       &#39;oracle.jdbc.xa.client.OracleXADataSource&#39;
      extraproperties:
        - &#39;SendStreamAsBlob=true&#39;
        - &#39;oracle.net.CONNECT_TIMEOUT=1000&#39;
      globaltransactionsprotocol:  &#39;TwoPhaseCommit&#39;
      initialcapacity:                  &#39;1&#39;
      maxcapacity:                      &#39;15&#39;
      mincapacity:                      &#39;1&#39;
      statementcachesize:               &#39;10&#39;
      jndinames:
       - &#39;jdbc/hrDS&#39;
      target:
        - &#39;WebCluster&#39;
        - &#39;WebCluster2&#39;
      targettype:
        - &#39;Cluster&#39;
        - &#39;Cluster&#39;
      testtablename:                    &#39;SQL SELECT 1 FROM DUAL&#39;
      url:                              &quot;jdbc:oracle:thin:@dbagent2.alfa.local:1521/test.oracle.com&quot;
      user:                             &#39;hr&#39;
      password:                         &#39;pass&#39;
      usexa:                            &#39;1&#39;
      xaproperties:
       - &#39;RollbackLocalTxUponConnClose=0&#39;
       - &#39;RecoverOnlyOnce=0&#39;
       - &#39;KeepLogicalConnOpenOnRelease=0&#39;
       - &#39;KeepXaConnTillTxComplete=1&#39;
       - &#39;XaTransactionTimeout=14400&#39;
       - &#39;XaRetryIntervalSeconds=60&#39;
       - &#39;XaRetryDurationSeconds=0&#39;
       - &#39;ResourceHealthMonitoring=1&#39;
       - &#39;NewXaConnForCommit=0&#39;
       - &#39;XaSetTransactionTimeout=1&#39;
       - &#39;XaEndOnlyOnce=0&#39;
       - &#39;NeedTxCtxOnClose=0&#39;
      testconnectionsonreserve:         &#39;0&#39;
      secondstotrustidlepoolconnection: &#39;10&#39;
      testfrequency:                    &#39;120&#39;
      connectioncreationretryfrequency: &#39;0&#39;
    &#39;jmsDS&#39;:
      ensure:                      &#39;present&#39;
      drivername:                  &#39;com.mysql.jdbc.Driver&#39;
      globaltransactionsprotocol:  &#39;None&#39;
      initialcapacity:             &#39;1&#39;
      jndinames:
        - &#39;jmsDS&#39;
      maxcapacity:                 &#39;15&#39;
      target:
       - &#39;WebCluster&#39;
      targettype:
       - &#39;Cluster&#39;
      testtablename:               &#39;SQL SELECT 1&#39;
      url:                         &#39;jdbc:mysql://10.10.10.10:3306/jms&#39;
      user:                        &#39;jms&#39;
      password:                    &#39;pass&#39;
      usexa:                       &#39;1&#39;
      # To Optionally Configure as Gridlink Datasource
      fanenabled:                  &#39;1&#39;
      onsnodelist:                 &#39;10.10.10.110:6200,10.10.10.111:6200&#39;</code></pre>

<h3 id="label-wls_jmsserver">wls_jmsserver</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_jmsserver</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_jmsserver { &#39;jmsServer1&#39;:
  ensure                      =&gt; &#39;present&#39;,
  persistentstore             =&gt; &#39;jmsFile1&#39;,
  persistentstoretype         =&gt; &#39;FileStore&#39;,
  target                      =&gt; [&#39;wlsServer1&#39;],
  targettype                  =&gt; [&#39;Server&#39;],
  allows_persistent_downgrade =&gt; &#39;0&#39;,
  bytes_maximum               =&gt; &#39;-1&#39;,
}
# this will use default as wls_setting identifier
wls_jmsserver { &#39;jmsServer2&#39;:
  ensure     =&gt; &#39;present&#39;,
  target     =&gt; [&#39;wlsServer2&#39;],
  targettype =&gt; [&#39;Server&#39;],
}
# this will use default as wls_setting identifier
wls_jmsserver { &#39;jmsServer3&#39;:
  ensure     =&gt; &#39;present&#39;,
  target     =&gt; [&#39;wlsServer3&#39;],
  targettype =&gt; [&#39;Server&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
jmsserver_instances:
   jmsServer1:
     ensure:                      &#39;present&#39;
     target:
       - &#39;wlsServer1&#39;
     targettype:
       - &#39;Server&#39;
     persistentstore:             &#39;jmsFile1&#39;
     persistentstoretype:         &#39;FileStore&#39;
     allows_persistent_downgrade: &#39;0&#39;
     bytes_maximum:               &#39;-1&#39;
   jmsServer2:
     ensure:              &#39;present&#39;
     target:
       - &#39;wlsServer2&#39;
     targettype:
       - &#39;Server&#39;</code></pre>

<h3 id="label-wls_jms_module">wls_jms_module</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_jms_module</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
wls_jms_module { &#39;jmsClusterModule&#39;:
  ensure     =&gt; &#39;present&#39;,
  target     =&gt; [&#39;WebCluster&#39;],
  targettype =&gt; [&#39;Cluster&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
jms_module_instances:
   jmsClusterModule:
     ensure:      &#39;present&#39;
     target:
       - &#39;WebCluster&#39;
     targettype:
       - &#39;Cluster&#39;</code></pre>

<h3 id="label-wls_jms_security_policy">wls_jms_security_policy</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_jms_security_policy</p>

<p># this will use default as wls_setting identifier  wls_jms_security_policy
{ &#39;jmsClusterModule:Topic1:receive&#39;:  ensure =&gt;
&#39;present&#39;,  destinationtype =&gt; &#39;topic&#39;, 
policyexpression =&gt; &#39;Usr(testuser1)&#39;,  }</p>

<p>in hiera</p>

<p># this will use default as wls_setting identifier 
jms_security_policy_instances:  &#39;jmsClusterModule:Topic1:receive&#39;: 
ensure: &#39;present&#39;  destinationtype: &#39;topic&#39;, 
policyexpression: &#39;Usr(testuser1)&#39;,</p>

<h3 id="label-wls_jms_template">wls_jms_template</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;.</p>

<p>or use puppet resource wls_jms_template</p>

<pre class="code ruby"><code class="ruby">wls_jms_template { &#39;jmsClusterModule:Template-0&#39;:
  ensure          =&gt; &#39;present&#39;,
  redeliverydelay =&gt; &#39;-1&#39;,
  redeliverylimit =&gt; &#39;-1&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_template_instances:
  &#39;jmsClusterModule:Template&#39;:
    ensure:          &#39;present&#39;
    redeliverydelay: &#39;-1&#39;
    redeliverylimit: &#39;-1&#39;</code></pre>

<h3 id="label-wls_jms_sort_destination_key">wls_jms_sort_destination_key</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<pre class="code ruby"><code class="ruby">wls_jms_sort_destination_key { &#39;jmsClusterModule:JMSPriority&#39;:
  ensure        =&gt; &#39;present&#39;,
  key_type      =&gt; &#39;Int&#39;,
  property_name =&gt; &#39;JMSPriority&#39;,
  sort_order    =&gt; &#39;Ascending&#39;,
}
wls_jms_sort_destination_key { &#39;default/jmsClusterModule:JMSRedelivered&#39;:
  ensure        =&gt; &#39;present&#39;,
  key_type      =&gt; &#39;Boolean&#39;,
  property_name =&gt; &#39;JMSRedelivered&#39;,
  sort_order    =&gt; &#39;Ascending&#39;,
}
wls_jms_sort_destination_key { &#39;default/jmsClusterModule:JmsMessageId&#39;:
  ensure        =&gt; &#39;present&#39;,
  key_type      =&gt; &#39;String&#39;,
  property_name =&gt; &#39;JmsMessageId&#39;,
  sort_order    =&gt; &#39;Descending&#39;,
}</code></pre>

<p>in Hiera</p>

<pre class="code ruby"><code class="ruby">jms_sort_destination_key_instances:
   &#39;jmsClusterModule:JmsMessageId&#39;:
      ensure:        &#39;present&#39;
      key_type:      &#39;String&#39;
      property_name: &#39;JmsMessageId&#39;
      sort_order:    &#39;Descending&#39;
      require:        Wls_jms_module[jmsClusterModule]
   &#39;jmsClusterModule:JMSPriority&#39;:
      ensure:        &#39;present&#39;
      key_type:      &#39;Int&#39;
      property_name: &#39;JMSPriority&#39;
      sort_order:    &#39;Ascending&#39;
      require:        Wls_jms_module[jmsClusterModule]
   &#39;jmsClusterModule:JMSRedelivered&#39;:
      ensure:        &#39;present&#39;
      key_type:      &#39;Boolean&#39;
      property_name: &#39;JMSRedelivered&#39;
      sort_order:    &#39;Ascending&#39;
      require:        Wls_jms_module[jmsClusterModule]</code></pre>

<h3 id="label-wls_connection_factory">wls_connection_factory</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_connection_factory</p>

<pre class="code ruby"><code class="ruby">wls_jms_connection_factory { &#39;jmsClusterModule:cf&#39;:
  ensure                    =&gt; &#39;present&#39;,
  attachjmsxuserid          =&gt; &#39;0&#39;,
  clientidpolicy            =&gt; &#39;Restricted&#39;,
  defaulttargeting          =&gt; &#39;0&#39;,
  jndiname                  =&gt; &#39;jms/cf&#39;,
  loadbalancingenabled      =&gt; &#39;1&#39;,
  messagesmaximum           =&gt; &#39;10&#39;,
  reconnectpolicy           =&gt; &#39;producer&#39;,
  serveraffinityenabled     =&gt; &#39;1&#39;,
  subdeployment             =&gt; &#39;wlsServers&#39;,
  subscriptionsharingpolicy =&gt; &#39;Exclusive&#39;,
  transactiontimeout        =&gt; &#39;3600&#39;,
  xaenabled                 =&gt; &#39;0&#39;,
}
wls_jms_connection_factory { &#39;default/jmsClusterModule:cf2&#39;:
  ensure                    =&gt; &#39;present&#39;,
  attachjmsxuserid          =&gt; &#39;0&#39;,
  clientidpolicy            =&gt; &#39;Restricted&#39;,
  defaulttargeting          =&gt; &#39;1&#39;,
  jndiname                  =&gt; &#39;jms/cf2&#39;,
  loadbalancingenabled      =&gt; &#39;1&#39;,
  messagesmaximum           =&gt; &#39;10&#39;,
  reconnectpolicy           =&gt; &#39;producer&#39;,
  serveraffinityenabled     =&gt; &#39;1&#39;,
  subscriptionsharingpolicy =&gt; &#39;Exclusive&#39;,
  transactiontimeout        =&gt; &#39;3600&#39;,
  xaenabled                 =&gt; &#39;1&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_connection_factory_instances:
  &#39;jmsClusterModule:cf&#39;:
      ensure:             &#39;present&#39;
      jmsmodule:          &#39;jmsClusterModule&#39;
      defaulttargeting:   &#39;0&#39;
      jndiname:           &#39;jms/cf&#39;
      subdeployment:      &#39;wlsServers&#39;
      transactiontimeout: &#39;3600&#39;
      xaenabled:          &#39;0&#39;
  &#39;jmsClusterModule:cf2&#39;:
      ensure:             &#39;present&#39;
      jmsmodule:          &#39;jmsClusterModule&#39;
      defaulttargeting:   &#39;1&#39;
      jndiname:           &#39;jms/cf2&#39;
      transactiontimeout: &#39;3600&#39;
      xaenabled:          &#39;1&#39;</code></pre>

<h3 id="label-wls_jms_queue">wls_jms_queue</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_jms_queue</p>

<pre class="code ruby"><code class="ruby">wls_jms_queue { &#39;jmsClusterModule:ErrorQueue&#39;:
  ensure            =&gt; &#39;present&#39;,
  defaulttargeting  =&gt; &#39;0&#39;,
  distributed       =&gt; &#39;1&#39;,
  expirationpolicy  =&gt; &#39;Discard&#39;,
  jndiname          =&gt; &#39;jms/ErrorQueue&#39;,
  redeliverydelay   =&gt; &#39;-1&#39;,
  redeliverylimit   =&gt; &#39;-1&#39;,
  subdeployment     =&gt; &#39;jmsServers&#39;,
  timetodeliver     =&gt; &#39;-1&#39;,
  timetolive        =&gt; &#39;-1&#39;,
  templatename      =&gt; &#39;Template&#39;,
  messagelogging    =&gt; &#39;1&#39;,
  consumptionpaused =&gt; &#39;0&#39;,
  insertionpaused   =&gt; &#39;0&#39;,
  productionpaused  =&gt; &#39;0&#39;,
}
wls_jms_queue { &#39;jmsClusterModule:Queue1&#39;:
  ensure           =&gt; &#39;present&#39;,
  defaulttargeting =&gt; &#39;0&#39;,
  distributed      =&gt; &#39;1&#39;,
  forwarddelay     =&gt; &#39;-1&#39;,
  errordestination =&gt; &#39;ErrorQueue&#39;,
  expirationpolicy =&gt; &#39;Redirect&#39;,
  jndiname         =&gt; &#39;jms/Queue1&#39;,
  redeliverydelay  =&gt; &#39;2000&#39;,
  redeliverylimit  =&gt; &#39;3&#39;,
  subdeployment    =&gt; &#39;jmsServers&#39;,
  timetodeliver    =&gt; &#39;-1&#39;,
  timetolive       =&gt; &#39;300000&#39;,
  messagelogging   =&gt; &#39;1&#39;,
  destination_keys =&gt; [&#39;JMSPriority&#39;, &#39;JmsMessageId&#39;],
}
wls_jms_queue { &#39;jmsClusterModule:Queue2&#39;:
  ensure                  =&gt; &#39;present&#39;,
  defaulttargeting        =&gt; &#39;0&#39;,
  distributed             =&gt; &#39;1&#39;,
  expirationloggingpolicy =&gt; &#39;%header%%properties%&#39;,
  expirationpolicy        =&gt; &#39;Log&#39;,
  jndiname                =&gt; &#39;jms/Queue2&#39;,
  redeliverydelay         =&gt; &#39;2000&#39;,
  redeliverylimit         =&gt; &#39;3&#39;,
  subdeployment           =&gt; &#39;jmsServers&#39;,
  timetodeliver           =&gt; &#39;-1&#39;,
  timetolive              =&gt; &#39;300000&#39;,
  messagelogging          =&gt; &#39;1&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_queue_instances:
   &#39;jmsClusterModule:ErrorQueue&#39;:
     ensure:                   &#39;present&#39;
     distributed:              &#39;1&#39;
     expirationpolicy:         &#39;Discard&#39;
     jndiname:                 &#39;jms/ErrorQueue&#39;
     redeliverydelay:          &#39;-1&#39;
     redeliverylimit:          &#39;-1&#39;
     subdeployment:            &#39;jmsServers&#39;
     defaulttargeting:         &#39;0&#39;
     timetodeliver:            &#39;-1&#39;
     timetolive:               &#39;-1&#39;
     templatename:             &#39;Template&#39;
     messagelogging:           &#39;1&#39;
     insertionpaused:          &#39;0&#39;
     productionpaused:         &#39;0&#39;
     consumptionpaused:        &#39;0&#39;
   &#39;jmsClusterModule:Queue1&#39;:
     ensure:                   &#39;present&#39;
     distributed:              &#39;1&#39;
     forwarddelay:             &#39;-1&#39;
     errordestination:         &#39;ErrorQueue&#39;
     expirationpolicy:         &#39;Redirect&#39;
     jndiname:                 &#39;jms/Queue1&#39;
     destination_keys:
        - &#39;JMSPriority&#39;
        - &#39;JmsMessageId&#39;
     redeliverydelay:          &#39;2000&#39;
     redeliverylimit:          &#39;3&#39;
     subdeployment:            &#39;jmsServers&#39;
     defaulttargeting:         &#39;0&#39;
     timetodeliver:            &#39;-1&#39;
     timetolive:               &#39;300000&#39;
     messagelogging:           &#39;1&#39;
   &#39;jmsClusterModule:Queue2&#39;:
     ensure:                   &#39;present&#39;
     distributed:              &#39;1&#39;
     expirationloggingpolicy:  &#39;%header%%properties%&#39;
     expirationpolicy:         &#39;Log&#39;
     jndiname:                 &#39;jms/Queue2&#39;
     redeliverydelay:          &#39;2000&#39;
     redeliverylimit:          &#39;3&#39;
     subdeployment:            &#39;jmsServers&#39;
     defaulttargeting:         &#39;0&#39;
     timetodeliver:            &#39;-1&#39;
     timetolive:               &#39;300000&#39;
     messagelogging:           &#39;1&#39;</code></pre>

<h3 id="label-wls_jms_topic">wls_jms_topic</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_jms_topic</p>

<pre class="code ruby"><code class="ruby">wls_jms_topic { &#39;jmsClusterModule:Topic1&#39;:
  ensure            =&gt; &#39;present&#39;,
  balancingpolicy   =&gt; &#39;Round-Robin&#39;,
  defaulttargeting  =&gt; &#39;0&#39;,
  deliverymode      =&gt; &#39;No-Delivery&#39;,
  destination_keys  =&gt; [&#39;JMSPriority&#39;, &#39;JmsMessageId&#39;],
  distributed       =&gt; &#39;1&#39;,
  expirationpolicy  =&gt; &#39;Discard&#39;,
  forwardingpolicy  =&gt; &#39;Replicated&#39;,
  jndiname          =&gt; &#39;jms/Topic1&#39;,
  redeliverydelay   =&gt; &#39;2000&#39;,
  redeliverylimit   =&gt; &#39;2&#39;,
  subdeployment     =&gt; &#39;jmsServers&#39;,
  timetodeliver     =&gt; &#39;-1&#39;,
  timetolive        =&gt; &#39;300000&#39;,
  consumptionpaused =&gt; &#39;0&#39;,
  insertionpaused   =&gt; &#39;0&#39;,
  productionpaused  =&gt; &#39;0&#39;,
}
wls_jms_topic { &#39;default/jmsClusterModule:Topic2&#39;:
  ensure           =&gt; &#39;present&#39;,
  balancingpolicy  =&gt; &#39;Round-Robin&#39;,
  defaulttargeting =&gt; &#39;0&#39;,
  deliverymode     =&gt; &#39;No-Delivery&#39;,
  distributed      =&gt; &#39;1&#39;,
  errordestination =&gt; &#39;ErrorQueue&#39;,
  expirationpolicy =&gt; &#39;Redirect&#39;,
  forwardingpolicy =&gt; &#39;Replicated&#39;,
  jndiname         =&gt; &#39;jms/Topic2&#39;,
  redeliverydelay  =&gt; &#39;2000&#39;,
  redeliverylimit  =&gt; &#39;3&#39;,
  subdeployment    =&gt; &#39;jmsServers&#39;,
  timetodeliver    =&gt; &#39;-1&#39;,
  timetolive       =&gt; &#39;300000&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_topic_instances:
   &#39;jmsClusterModule:Topic1&#39;:
     ensure:            &#39;present&#39;
     defaulttargeting:  &#39;0&#39;
     distributed:       &#39;1&#39;
     expirationpolicy:  &#39;Discard&#39;
     jndiname:          &#39;jms/Topic1&#39;
     redeliverydelay:   &#39;2000&#39;
     redeliverylimit:   &#39;2&#39;
     subdeployment:     &#39;jmsServers&#39;
     timetodeliver:     &#39;-1&#39;
     timetolive:        &#39;300000&#39;
     messagelogging:    &#39;0&#39;
     insertionpaused:   &#39;0&#39;
     productionpaused:  &#39;1&#39;
     consumptionpaused: &#39;0&#39;
     destination_keys:
        - &#39;JMSPriority&#39;
        - &#39;JmsMessageId&#39;</code></pre>

<h3 id="label-wls_jms_quota">wls_jms_quota</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_jms_quota</p>

<pre class="code ruby"><code class="ruby">wls_jms_quota { &#39;jmsClusterModule:QuotaBig&#39;:
  ensure          =&gt; &#39;present&#39;,
  bytesmaximum    =&gt; &#39;9223372036854775807&#39;,
  messagesmaximum =&gt; &#39;9223372036854775807&#39;,
  policy          =&gt; &#39;FIFO&#39;,
  shared          =&gt; &#39;1&#39;,
}
wls_jms_quota { &#39;jmsClusterModule:QuotaLow&#39;:
  ensure          =&gt; &#39;present&#39;,
  bytesmaximum    =&gt; &#39;20000000000&#39;,
  messagesmaximum =&gt; &#39;9223372036854775807&#39;,
  policy          =&gt; &#39;FIFO&#39;,
  shared          =&gt; &#39;0&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_quota_instances:
   &#39;jmsClusterModule:QuotaBig&#39;:
      ensure:           &#39;present&#39;
      bytesmaximum:     &#39;9223372036854775807&#39;
      messagesmaximum:  &#39;9223372036854775807&#39;
      policy:           &#39;FIFO&#39;
      shared:           &#39;1&#39;
   &#39;jmsClusterModule:QuotaLow&#39;:
      ensure:           &#39;present&#39;
      bytesmaximum:     &#39;20000000000&#39;
      messagesmaximum:  &#39;9223372036854775807&#39;
      policy:           &#39;FIFO&#39;
      shared:           &#39;0&#39;</code></pre>

<h3 id="label-wls_jms_subdeployment">wls_jms_subdeployment</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_jms_subdeployment</p>

<pre class="code ruby"><code class="ruby">wls_jms_subdeployment { &#39;jmsClusterModule:jmsServers&#39;:
  ensure     =&gt; &#39;present&#39;,
  target     =&gt; [&#39;jmsServer1&#39;,&#39;jmsServer2&#39;],
  targettype =&gt; [&#39;JMSServer&#39;,&#39;JMSServer&#39;],
}
wls_jms_subdeployment { &#39;jmsClusterModule:wlsServers&#39;:
  ensure     =&gt; &#39;present&#39;,
  target     =&gt; [&#39;WebCluster&#39;],
  targettype =&gt; [&#39;Cluster&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_subdeployment_instances:
   &#39;jmsClusterModule:jmsServers&#39;:
      ensure:     &#39;present&#39;
      target:
       - &#39;jmsServer1&#39;
       - &#39;jmsServer2&#39;
      targettype:
      - &#39;JMSServer&#39;
      - &#39;JMSServer&#39;
   &#39;jmsClusterModule:wlsServers&#39;:
      ensure:     &#39;present&#39;
      target:
       - &#39;WebCluster&#39;
      targettype:
       - &#39;Cluster&#39;</code></pre>

<h3 id="label-wls_saf_remote_context">wls_saf_remote_context</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_saf_remote_context</p>

<pre class="code ruby"><code class="ruby">wls_saf_remote_context { &#39;jmsClusterModule:RemoteSAFContext-0&#39;:
  ensure        =&gt; &#39;present&#39;,
  connect_url   =&gt; &#39;t3://10.10.10.10:7001&#39;,
  weblogic_user =&gt; &#39;weblogic&#39;,
  weblogic_password =&gt; &#39;weblogic1&#39;,
}
wls_saf_remote_context { &#39;jmsClusterModule:RemoteSAFContext-1&#39;:
  ensure      =&gt; &#39;present&#39;,
  connect_url =&gt; &#39;t3://10.10.10.10:7001&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">saf_remote_context_instances:
  &#39;jmsClusterModule:RemoteSAFContext-0&#39;:
     ensure:            &#39;present&#39;
     connect_url:       &#39;t3://10.10.10.10:7001&#39;
     weblogic_user:     &#39;weblogic&#39;
     weblogic_password: &#39;weblogic1&#39;
  &#39;jmsClusterModule:RemoteSAFContext-1&#39;:
     ensure:            &#39;present&#39;
     connect_url:       &#39;t3://10.10.10.10:7001&#39;</code></pre>

<h3 id="label-wls_saf_error_handler">wls_saf_error_handler</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_saf_error_handler</p>

<pre class="code ruby"><code class="ruby">wls_saf_error_handler { &#39;jmsClusterModule:ErrorHandling-0&#39;:
  ensure =&gt; &#39;present&#39;,
  policy =&gt; &#39;Discard&#39;,
}
wls_saf_error_handler { &#39;jmsClusterModule:ErrorHandling-1&#39;:
  ensure    =&gt; &#39;present&#39;,
  logformat =&gt; &#39;%header%%properties%&#39;,
  policy    =&gt; &#39;Log&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">saf_error_handler_instances:
  &#39;jmsClusterModule:ErrorHandling-0&#39;:
     ensure:           &#39;present&#39;
     policy:           &#39;Discard&#39;
  &#39;jmsClusterModule:ErrorHandling-1&#39;:
     ensure:           &#39;present&#39;
     policy:           &#39;Log&#39;
     logformat:        &#39;%header%%properties%&#39;</code></pre>

<h3 id="label-wls_saf_imported_destination">wls_saf_imported_destination</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_saf_imported_destination</p>

<pre class="code ruby"><code class="ruby">wls_saf_imported_destination { &#39;jmsClusterModule:SAFImportedDestinations-0&#39;:
  ensure               =&gt; &#39;present&#39;,
  defaulttargeting     =&gt; &#39;1&#39;,
  errorhandling        =&gt; &#39;ErrorHandling-0&#39;,
  jndiprefix           =&gt; &#39;saf_&#39;,
  remotecontext        =&gt; &#39;RemoteSAFContext-0&#39;,
  timetolivedefault    =&gt; &#39;1000000000&#39;,
  usetimetolivedefault =&gt; &#39;1&#39;,
}
wls_saf_imported_destination { &#39;jmsClusterModule:SAFImportedDestinations-1&#39;:
  ensure               =&gt; &#39;present&#39;,
  defaulttargeting     =&gt; &#39;0&#39;,
  jndiprefix           =&gt; &#39;saf2_&#39;,
  remotecontext        =&gt; &#39;RemoteSAFContext-1&#39;,
  subdeployment        =&gt; &#39;safServers&#39;,
  usetimetolivedefault =&gt; &#39;0&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">&#39;jmsClusterModule:SAFImportedDestinations-1&#39;:
  ensure:               &#39;present&#39;
  defaulttargeting:     &#39;1&#39;
  jndiprefix:           &#39;saf2_&#39;
  remotecontext:        &#39;RemoteSAFContext-1&#39;
&#39;jmsClusterModule:SAFImportedDestinations-0&#39;:
  ensure:               &#39;present&#39;
  defaulttargeting:     &#39;0&#39;
  subdeployment:        &#39;safServers&#39;
  errorhandling:        &#39;ErrorHandling-1&#39;
  jndiprefix:           &#39;saf_&#39;
  remotecontext:        &#39;RemoteSAFContext-0&#39;
  timetolivedefault:    &#39;100000000&#39;
  usetimetolivedefault: &#39;1&#39;</code></pre>

<h3 id="label-wls_saf_imported_destination_object">wls_saf_imported_destination_object</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name and
imported_destination</p>

<p>or use puppet resource wls_saf_imported_destination_object</p>

<pre class="code ruby"><code class="ruby">wls_saf_imported_destination_object { &#39;jmsClusterModule:SAFImportedDestinations-0:SAFDemoQueue&#39;:
  ensure               =&gt; &#39;present&#39;,
  nonpersistentqos     =&gt; &#39;Exactly-Once&#39;,
  object_type          =&gt; &#39;queue&#39;,
  remotejndiname       =&gt; &#39;jms/DemoQueue&#39;,
  unitoforderrouting   =&gt; &#39;Hash&#39;,
  usetimetolivedefault =&gt; &#39;0&#39;,
}
wls_saf_imported_destination_object { &#39;jmsClusterModule:SAFImportedDestinations-0:SAFDemoTopic&#39;:
  ensure               =&gt; &#39;present&#39;,
  nonpersistentqos     =&gt; &#39;Exactly-Once&#39;,
  object_type          =&gt; &#39;topic&#39;,
  remotejndiname       =&gt; &#39;jms/DemoTopic&#39;,
  timetolivedefault    =&gt; &#39;100000000&#39;,
  unitoforderrouting   =&gt; &#39;Hash&#39;,
  usetimetolivedefault =&gt; &#39;1&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">saf_imported_destination_object_instances:
  &#39;jmsClusterModule:SAFImportedDestinations-0:SAFDemoQueue&#39;:
      ensure:                &#39;present&#39;
      object_type:           &#39;queue&#39;
      remotejndiname:        &#39;jms/DemoQueue&#39;
      unitoforderrouting:    &#39;Hash&#39;
      nonpersistentqos:      &#39;Exactly-Once&#39;
  &#39;jmsClusterModule:SAFImportedDestinations-0:SAFDemoTopic&#39;:
      ensure:                &#39;present&#39;
      object_type:           &#39;topic&#39;
      remotejndiname:        &#39;jms/DemoTopic&#39;
      timetolivedefault:     &#39;100000000&#39;
      unitoforderrouting:    &#39;Hash&#39;
      usetimetolivedefault:  &#39;1&#39;
      nonpersistentqos:      &#39;Exactly-Once&#39;</code></pre>

<h3 id="label-wls_foreign_server">wls_foreign_server</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name</p>

<p>or use puppet resource wls_foreign_server</p>

<pre class="code ruby"><code class="ruby">wls_foreign_server { &#39;jmsClusterModule:AQForeignServer&#39;:
  ensure                =&gt; &#39;present&#39;,
  defaulttargeting      =&gt; &#39;1&#39;,
  extraproperties       =&gt; &#39;datasource=jdbc/hrDS&#39;,
  initialcontextfactory =&gt; [&#39;oracle.jms.AQjmsInitialContextFactory&#39;],
}
wls_foreign_server { &#39;jmsClusterModule:Jboss&#39;:
  ensure                =&gt; &#39;present&#39;,
  connectionurl         =&gt; &#39;remote://10.10.10.10:4447&#39;,
  defaulttargeting      =&gt; &#39;0&#39;,
  extraproperties       =&gt; [&#39;java.naming.security.principal=jmsuser&#39;],
  initialcontextfactory =&gt; &#39;org.jboss.naming.remote.client.InitialContextFactory&#39;,
  subdeployment         =&gt; &#39;wlsServers&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">&#39;jmsClusterModule:AQForeignServer&#39;:
    ensure:                &#39;present&#39;
    defaulttargeting:      &#39;1&#39;
    extraproperties:
      - &#39;datasource=jdbc/hrDS&#39;
    initialcontextfactory: &#39;oracle.jms.AQjmsInitialContextFactory&#39;
&#39;jmsClusterModule:Jboss&#39;:
    ensure:                &#39;present&#39;
    connectionurl:         &#39;remote://10.10.10.10:4447&#39;
    defaulttargeting:      &#39;0&#39;
    extraproperties:
      - &#39;java.naming.security.principal=jmsuser&#39;
    initialcontextfactory: &#39;org.jboss.naming.remote.client.InitialContextFactory&#39;
    subdeployment:         &#39;wlsServers&#39;
    password:              &#39;test&#39;</code></pre>

<h3 id="label-wls_foreign_server_object">wls_foreign_server_object</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;, title must also contain the jms module name and foreign
server</p>

<p>or use puppet resource wls_foreign_server_object</p>

<pre class="code ruby"><code class="ruby">wls_foreign_server_object { &#39;jmsClusterModule:Jboss:CF&#39;:
  ensure         =&gt; &#39;present&#39;,
  localjndiname  =&gt; &#39;jms/jboss/CF&#39;,
  object_type    =&gt; &#39;connectionfactory&#39;,
  remotejndiname =&gt; &#39;jms/Remote/CF&#39;,
}
wls_foreign_server_object { &#39;jmsClusterModule:Jboss:JBossQ&#39;:
  ensure         =&gt; &#39;present&#39;,
  localjndiname  =&gt; &#39;jms/jboss/Queue&#39;,
  object_type    =&gt; &#39;destination&#39;,
  remotejndiname =&gt; &#39;jms/Remote/Queue&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">&#39;jmsClusterModule:Jboss:CF&#39;:
    ensure:         &#39;present&#39;
    localjndiname:  &#39;jms/jboss/CF&#39;
    object_type:    &#39;connectionfactory&#39;
    remotejndiname: &#39;jms/Remote/CF&#39;
&#39;jmsClusterModule:Jboss:JBossQ&#39;:
    ensure:         &#39;present&#39;
    localjndiname:  &#39;jms/jboss/Queue&#39;
    object_type:    &#39;destination&#39;
    remotejndiname: &#39;jms/Remote/Queue&#39;
&#39;jmsClusterModule:AQForeignServer:XAQueueCF&#39;:
    ensure:         &#39;present&#39;
    localjndiname:  &#39;jms/XAQueueCF&#39;
    object_type:    &#39;connectionfactory&#39;
    remotejndiname: &#39;XAQueueConnectionFactory&#39;
&#39;jmsClusterModule:AQForeignServer:TestQueue&#39;:
    ensure:         &#39;present&#39;
    localjndiname:  &#39;jms/aq/TestQueue&#39;
    object_type:    &#39;destination&#39;
    remotejndiname: &#39;Queues/TestQueue&#39;</code></pre>

<h3 id="label-wls_mail_session">wls_mail_session</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;</p>

<p>or use puppet resource wls_mail_server</p>

<p>Valid mail properties are found at: <a
href="https://javamail.java.net/nonav/docs/api">javamail.java.net/nonav/docs/api</a>/</p>

<pre class="code ruby"><code class="ruby">wls_mail_session { &#39;myMailSession&#39;:
  ensure         =&gt; &#39;present&#39;,
  jndiname       =&gt; &#39;myMailSession&#39;,
  target         =&gt; [&#39;ManagedServer1&#39;, &#39;WebCluster&#39;],
  targettype     =&gt; [&#39;Server&#39;, &#39;Cluster&#39;],
  mailproperty   =&gt; [&#39;mail.host=smtp.hostname.com&#39;, &#39;mail.user=smtpadmin&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">mail_session_instances:
  &#39;myMailSession&#39;:
    ensure:  present
    jndiname: &#39;myMailSession&#39;
    target:
     - &#39;ManagedServer1&#39;
     - &#39;WebCluster&#39;
    targettype:
     - &#39;Server&#39;
     - &#39;Cluster&#39;
    mailproperty:
     - &#39;mail.host=smtp.hostname.com&#39;
     - &#39;mail.user=smtpadmin&#39;</code></pre>

<h3 id="label-wls_multi_datasource">wls_multi_datasource</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;</p>

<p>or use puppet resource wls_multi_datasource</p>

<p>Valid mail properties are found at: <a
href="https://javamail.java.net/nonav/docs/api">javamail.java.net/nonav/docs/api</a>/</p>

<pre class="code ruby"><code class="ruby">wls_multi_datasource { &#39;myMultiDatasource&#39;:
  ensure        =&gt; &#39;present&#39;,
  algorithmtype =&gt; &#39;Failover&#39;,
  datasources   =&gt; [&#39;myJDBCDatasource&#39;],
  jndinames     =&gt; [&#39;myMultiDatasource&#39;],
  target         =&gt; [&#39;ManagedServer1&#39;, &#39;WebCluster&#39;],
  targettype     =&gt; [&#39;Server&#39;, &#39;Cluster&#39;],
  testfrequency =&gt; &#39;120&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">multi_datasources:
  &#39;myMultiDatasource&#39;:
    ensure:        present
    jndinames:     &#39;myMultiDatasource&#39;
    testfrequency: 120
    algorithmtype: &#39;Failover&#39;
    datasources:
     - &#39;myJDBCDatasource&#39;
    target:
     - &#39;ManagedServer1&#39;
     - &#39;WebCluster&#39;
    targettype:
     - &#39;Server&#39;
     - &#39;Cluster&#39;</code></pre>

<h3 id="label-wls_jms_bridge_destination">wls_jms_bridge_destination</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;</p>

<p>or use puppet resource wls_jms_bridge_destination</p>

<p>Valid jms bridge destinations are found at: <a
href="https://javamail.java.net/nonav/docs/api">javamail.java.net/nonav/docs/api</a>/</p>

<pre class="code ruby"><code class="ruby">wls_jms_bridge_destination { &#39;myBridgeDest&#39;:
  ensure                =&gt; &#39;present&#39;,
  adapter               =&gt; &#39;eis.jms.WLSConnectionFactoryJNDINoTX&#39;,
  classpath             =&gt; &#39;myClasspath&#39;,
  connectionfactoryjndi =&gt; &#39;myCFJndi&#39;,
  connectionurl         =&gt; &#39;myConnUrl&#39;,
  destinationjndi       =&gt; &#39;myDestJndi&#39;,
  destinationtype       =&gt; &#39;Queue&#39;,
  initialcontextfactory =&gt; &#39;weblogic.jndi.WLInitialContextFactory&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">jms_bridge_destinations:
  &#39;myBridgeDest&#39;:
    ensure:                  present
    adapter:                &#39;eis.jms.WLSConnectionFactoryJNDINoTX&#39;,
    classpath:              &#39;myClasspath&#39;,
    connectionfactoryjndi:  &#39;myCFJndi&#39;,
    connectionurl:          &#39;myConnUrl&#39;,
    destinationjndi:        &#39;myDestJndi&#39;,
    destinationtype:        &#39;Queue&#39;,
    initialcontextfactory;  &#39;weblogic.jndi.WLInitialContextFactory&#39;,</code></pre>

<h3 id="label-wls_messaging_bridge">wls_messaging_bridge</h3>

<p>it needs wls_setting and when identifier is not provided it will use the
&#39;default&#39;</p>

<p>or use puppet resource wls_messaging_bridge</p>

<p>Valid messaging bridge properties are found at: <a
href="https://javamail.java.net/nonav/docs/api">javamail.java.net/nonav/docs/api</a>/</p>

<pre class="code ruby"><code class="ruby">wls_messaging_bridge { &#39;myBrigde&#39;:
  ensure                 =&gt; &#39;present&#39;,
  asyncenabled           =&gt; &#39;1&#39;,
  batchinterval          =&gt; &#39;-1&#39;,
  batchsize              =&gt; &#39;10&#39;,
  durabilityenabled      =&gt; &#39;1&#39;,
  idletimemax            =&gt; &#39;60&#39;,
  qos                    =&gt; &#39;Exactly-once&#39;,
  reconnectdelayincrease =&gt; &#39;5&#39;,
  reconnectdelaymax      =&gt; &#39;60&#39;,
  reconnectdelaymin      =&gt; &#39;15&#39;,
  selector               =&gt; &#39;sel&#39;,
  transactiontimeout     =&gt; &#39;30&#39;,
  sourcedestination      =&gt; &#39;mySourceBrigdeDest&#39;,
  targetdestination      =&gt; &#39;MyDestBridgeDest&#39;,
  target                 =&gt; [&#39;ManagedServer1&#39;, &#39;WebCluster&#39;],
  targettype             =&gt; [&#39;Server&#39;, &#39;Cluster&#39;],</code></pre>

<p>}</p>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">messaging_bridges:
  &#39;myBridge&#39;:
    ensure:                 present
    asyncenabled:           &#39;1&#39;
    batchinterval:          &#39;-1&#39;,
    batchsize:              &#39;10&#39;,
    durabilityenabled:      &#39;1&#39;,
    idletimemax:            &#39;60&#39;,
    qos:                    &#39;Exactly-once&#39;,
    reconnectdelayincrease: &#39;5&#39;,
    reconnectdelaymax:      &#39;60&#39;,
    reconnectdelaymin::     &#39;15&#39;,
    selector:               &#39;sel&#39;,
    transactiontimeout:     &#39;30&#39;,
    sourcedestination:      &#39;mySourceBrigdeDest&#39;,
    targetdestination:      &#39;MyDestBridgeDest&#39;,
    target:
     - &#39;ManagedServer1&#39;
     - &#39;WebCluster&#39;
    targettype:
     - &#39;Server&#39;
     - &#39;Cluster&#39;</code></pre>

<h3 id="label-wls_virtual_target">wls_virtual_target</h3>

<p>Only for 12.2.1 and higher, it needs wls_setting and when identifier is not
provided it will use the &#39;default&#39;.</p>

<p>or use puppet resource wls_virtual_target</p>

<pre class="code ruby"><code class="ruby">wls_virtual_target { &#39;default/VT_AdminServer&#39;:
  ensure             =&gt; &#39;present&#39;,
  channel            =&gt; &#39;PartitionChannel&#39;,
  port               =&gt; &#39;7011&#39;,
  target             =&gt; [&#39;AdminServer&#39;],
  targettype         =&gt; [&#39;Server&#39;],
  uriprefix          =&gt; &#39;/adminserver&#39;,
  virtual_host_names =&gt; [&#39;10.10.10.10&#39;],
}
wls_virtual_target { &#39;default/VT_CustomerA&#39;:
  ensure             =&gt; &#39;present&#39;,
  channel            =&gt; &#39;PartitionChannel&#39;,
  port               =&gt; &#39;8011&#39;,
  target             =&gt; [&#39;WebCluster&#39;],
  targettype         =&gt; [&#39;Cluster&#39;],
  uriprefix          =&gt; &#39;/customer_a&#39;,
  virtual_host_names =&gt; [&#39;10.10.10.100&#39;, &#39;10.10.10.200&#39;],
}
wls_virtual_target { &#39;default/VT_CustomerB&#39;:
  ensure             =&gt; &#39;present&#39;,
  channel            =&gt; &#39;PartitionChannel&#39;,
  port               =&gt; &#39;8001&#39;,
  target             =&gt; [&#39;WebCluster&#39;],
  targettype         =&gt; [&#39;Cluster&#39;],
  uriprefix          =&gt; &#39;/customer_b&#39;,
  virtual_host_names =&gt; [&#39;10.10.10.100&#39;, &#39;10.10.10.200&#39;],
}
wls_virtual_target { &#39;default/VT_Global&#39;:
  ensure             =&gt; &#39;present&#39;,
  channel            =&gt; &#39;PartitionChannel&#39;,
  port               =&gt; &#39;8021&#39;,
  target             =&gt; [&#39;WebCluster&#39;],
  targettype         =&gt; [&#39;Cluster&#39;],
  uriprefix          =&gt; &#39;/global&#39;,
  virtual_host_names =&gt; [&#39;10.10.10.100&#39;, &#39;10.10.10.200&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
virtual_target_instances:
  &#39;VT_CustomerA&#39;:
    ensure:             &#39;present&#39;
    port:               &#39;8011&#39;
    # portoffset:         &#39;6&#39;
    target:             &#39;WebCluster&#39;
    targettype:         &#39;Cluster&#39;
    uriprefix:          &#39;/customer_a&#39;
    virtual_host_names:
      - &#39;10.10.10.100&#39;
      - &#39;10.10.10.200&#39;
  &#39;VT_CustomerB&#39;:
    ensure:             &#39;present&#39;
    channel:            &#39;PartitionChannel&#39;
    port:               &#39;8001&#39;
    target:             &#39;WebCluster&#39;
    targettype:         &#39;Cluster&#39;
    uriprefix:          &#39;/customer_b&#39;
    virtual_host_names:
      - &#39;10.10.10.100&#39;
      - &#39;10.10.10.200&#39;
  &#39;VT_Global&#39;:
    ensure:             &#39;present&#39;
    channel:            &#39;PartitionChannel&#39;
    port:               &#39;8021&#39;
    target:             &#39;WebCluster&#39;
    targettype:         &#39;Cluster&#39;
    uriprefix:          &#39;/global&#39;
    virtual_host_names:
      - &#39;10.10.10.100&#39;
      - &#39;10.10.10.200&#39;
  &#39;VT_AdminServer&#39;:
    ensure:             &#39;present&#39;
    channel:            &#39;PartitionChannel&#39;
    port:               &#39;7011&#39;
    target:             &#39;AdminServer&#39;
    targettype:         &#39;Server&#39;
    uriprefix:          &#39;/adminserver&#39;
    virtual_host_names:
      - &#39;10.10.10.10&#39;</code></pre>

<h3 id="label-wls_resource_group_template">wls_resource_group_template</h3>

<p>Resource group templates for resource groups or used in a partition
resource group. Only for 12.2.1 and higher, it needs wls_setting and when
identifier is not provided it will use the &#39;default&#39;.</p>

<p>or use puppet resource wls_resource_group_template</p>

<pre class="code ruby"><code class="ruby">wls_resource_group_template { &#39;default/AppTemplate1&#39;:
  ensure =&gt; &#39;present&#39;,
}
wls_resource_group_template { &#39;default/AppTemplate2&#39;:
  ensure =&gt; &#39;present&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby"># this will use default as wls_setting identifier
resource_group_template_instances:
  &#39;AppTemplate1&#39;:
    ensure: &#39;present&#39;
  &#39;AppTemplate2&#39;:
    ensure: &#39;present&#39;</code></pre>

<h3 id="label-wls_resource_group">wls_resource_group</h3>

<p>For making global resource groups or for just 1 or more virtual targets,
only for 12.2.1 and higher, it needs wls_setting and when identifier is not
provided it will use the &#39;default&#39;.</p>

<p>or use puppet resource wls_resource_group</p>

<pre class="code ruby"><code class="ruby">wls_resource_group { &#39;default/ResourceGroup&#39;:
  ensure =&gt; &#39;present&#39;,
}
wls_resource_group { &#39;default/ResourceGroupForAll&#39;:
  ensure                  =&gt; &#39;present&#39;,
  resource_group_template =&gt; &#39;AppTemplate2&#39;,
  virtual_target          =&gt; [&#39;VT_AdminServer&#39;, &#39;VT_Global&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">resource_group_instances:
  &#39;ResourceGroup&#39;:
    ensure:                   &#39;present&#39;
  &#39;ResourceGroupForAll&#39;:
    ensure:                   &#39;present&#39;
    resource_group_template:  &#39;AppTemplate2&#39;
    virtual_target:
      - &#39;VT_Global&#39;
      - &#39;VT_AdminServer&#39;</code></pre>

<h3 id="label-wls_domain_partition">wls_domain_partition</h3>

<p>For making domain partitions or for just 1 or more virtual targets, only
for 12.2.1 and higher, it needs wls_setting and when identifier is not
provided it will use the &#39;default&#39;.</p>

<p>You need to restart the AdminServer when somethings changes on the domain
partition level, see wls_adminserver type</p>

<p>or use puppet resource wls_domain_partition</p>

<pre class="code ruby"><code class="ruby">wls_domain_partition { &#39;default/CustomerA_Partition&#39;:
  ensure           =&gt; &#39;present&#39;,
  root_file_system =&gt; &#39;/opt/oracle/wlsdomains/domains/Wls1221/partitions/CustomerAPartition/system&#39;,
  virtual_target   =&gt; [&#39;VT_CustomerA&#39;],
}
wls_domain_partition { &#39;default/CustomerB_Partition&#39;:
  ensure           =&gt; &#39;present&#39;,
  root_file_system =&gt; &#39;/opt/oracle/wlsdomains/domains/Wls1221/partitions/CustomerBPartition/system&#39;,
  virtual_target   =&gt; [&#39;VT_CustomerB&#39;],
}
wls_domain_partition { &#39;default/Global_Partition&#39;:
  ensure           =&gt; &#39;present&#39;,
  root_file_system =&gt; &#39;/opt/oracle/wlsdomains/domains/Wls1221/partitions/GlobalPartition/system&#39;,
  virtual_target   =&gt; [&#39;VT_AdminServer&#39;, &#39;VT_Global&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">wls_domain_partition_instances:
  &#39;Global_Partition&#39;:
    ensure:           &#39;present&#39;
    root_file_system: &#39;/opt/oracle/wlsdomains/domains/Wls1221/partitions/GlobalPartition/system&#39;
    virtual_target:
      - &#39;VT_AdminServer&#39;
      - &#39;VT_Global&#39;
  &#39;CustomerA_Partition&#39;:
    ensure:           &#39;present&#39;
    root_file_system: &#39;/opt/oracle/wlsdomains/domains/Wls1221/partitions/CustomerAPartition/system&#39;
    virtual_target:
      - &#39;VT_CustomerA&#39;
  &#39;CustomerB_Partition&#39;:
    ensure:           &#39;present&#39;
    root_file_system: &#39;/opt/oracle/wlsdomains/domains/Wls1221/partitions/CustomerBPartition/system&#39;
    virtual_target:
      - &#39;VT_CustomerB&#39;</code></pre>

<h3 id="label-wls_domain_partition_resource_group">wls_domain_partition_resource_group</h3>

<p>For making resource groups inside a domain partition, only for 12.2.1 and
higher, it needs wls_setting and when identifier is not provided it will
use the &#39;default&#39;.</p>

<p>or use puppet resource wls_domain_partition_resource_group</p>

<pre class="code ruby"><code class="ruby">wls_domain_partition_resource_group { &#39;default/CustomerA_Partition:PartitionResourceGroupProducts&#39;:
  ensure                  =&gt; &#39;present&#39;,
  resource_group_template =&gt; &#39;AppTemplate1&#39;,
  virtual_target          =&gt; [&#39;VT_CustomerA&#39;],
}
wls_domain_partition_resource_group { &#39;default/CustomerB_Partition:PartitionResourceGroupProducts&#39;:
  ensure                  =&gt; &#39;present&#39;,
  resource_group_template =&gt; &#39;AppTemplate1&#39;,
  virtual_target          =&gt; [&#39;VT_CustomerB&#39;],
}
wls_domain_partition_resource_group { &#39;default/Global_Partition:PartitionResourceGroup1&#39;:
  ensure         =&gt; &#39;present&#39;,
  virtual_target =&gt; [&#39;VT_AdminServer&#39;, &#39;VT_Global&#39;],
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">wls_domain_partition_resource_group_instances:
  &#39;CustomerA_Partition:PartitionResourceGroupProducts&#39;:
    ensure:                  &#39;present&#39;
    resource_group_template: &#39;AppTemplate1&#39;
    virtual_target:
      - &#39;VT_CustomerA&#39;
  &#39;CustomerB_Partition:PartitionResourceGroupProducts&#39;:
    ensure:                  &#39;present&#39;
    resource_group_template: &#39;AppTemplate1&#39;
    virtual_target:
      - &#39;VT_CustomerB&#39;
  &#39;Global_Partition:PartitionResourceGroup1&#39;:
    ensure:                  &#39;present&#39;
    virtual_target:
      - &#39;VT_AdminServer&#39;
      - &#39;VT_Global&#39;</code></pre>

<h3 id="label-wls_resource_group_template_deployment">wls_resource_group_template_deployment</h3>

<p>For adding deployments in a resource groups template, only for 12.2.1 and
higher, it needs wls_setting and when identifier is not provided it will
use the &#39;default&#39;.</p>

<p>or use puppet resource wls_resource_group_template_deployment</p>

<pre class="code ruby"><code class="ruby">wls_resource_group_template_deployment { &#39;default/AppTemplate1:jersey-bundle&#39;:
  ensure            =&gt; &#39;present&#39;,
  deploymenttype    =&gt; &#39;Library&#39;,
  versionidentifier =&gt; &#39;1.18@1.18.0.0&#39;,
}
wls_resource_group_template_deployment { &#39;default/AppTemplate1:webapp&#39;:
  ensure         =&gt; &#39;present&#39;,
  deploymenttype =&gt; &#39;AppDeployment&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">resource_group_template_deployment_instances:
  &#39;AppTemplate1:jersey-bundle&#39;:
    ensure:            &#39;present&#39;
    deploymenttype:    &#39;Library&#39;
    versionidentifier: &#39;1.18@1.18.0.0&#39;
    timeout:           120
    remote:            &quot;1&quot;
    upload:            &quot;1&quot;
    localpath:         &#39;/vagrant/jersey-bundle-1.18.war&#39;
  &#39;AppTemplate1:webapp&#39;:
    ensure:            &#39;present&#39;
    deploymenttype:    &#39;AppDeployment&#39;
    timeout:           120
    remote:            &quot;1&quot;
    upload:            &quot;1&quot;
    localpath:         &#39;/vagrant/webapp.war&#39;
    require:
       - Wls_resource_group_template_deployment[AppTemplate1:jersey-bundle]</code></pre>

<h3 id="label-wls_domain_partition_resource_group_deployment">wls_domain_partition_resource_group_deployment</h3>

<p>For adding deployments in a domain partition resource groups, only for
12.2.1 and higher, it needs wls_setting and when identifier is not provided
it will use the &#39;default&#39;.</p>

<p>or use puppet resource wls_domain_partition_resource_group_deployment</p>

<pre class="code ruby"><code class="ruby">wls_domain_partition_resource_group_deployment { &#39;CustomerA_Partition:PartitionResourceGroupProducts:jersey-bundle&#39;:
  ensure            =&gt; &#39;present&#39;,
  deploymenttype    =&gt; &#39;Library&#39;,
  versionidentifier =&gt; &#39;1.18@1.18.0.0&#39;,
}
wls_domain_partition_resource_group_deployment { &#39;CustomerA_Partition:PartitionResourceGroupProducts:webapp&#39;:
  ensure         =&gt; &#39;present&#39;,
  deploymenttype =&gt; &#39;AppDeployment&#39;,
}
wls_domain_partition_resource_group_deployment { &#39;CustomerB_Partition:PartitionResourceGroupProducts:jersey-bundle&#39;:
  ensure            =&gt; &#39;present&#39;,
  deploymenttype    =&gt; &#39;Library&#39;,
  versionidentifier =&gt; &#39;1.18@1.18.0.0&#39;,
}
wls_domain_partition_resource_group_deployment { &#39;CustomerB_Partition:PartitionResourceGroupProducts:webapp&#39;:
  ensure         =&gt; &#39;present&#39;,
  deploymenttype =&gt; &#39;AppDeployment&#39;,
}</code></pre>

<p>in hiera</p>

<pre class="code ruby"><code class="ruby">domain_partition_resource_group_deployment_instances:
  &#39;CustomerA_Partition:PartitionResourceGroupProducts:jersey-bundle&#39;:
    ensure:            &#39;present&#39;
    deploymenttype:    &#39;Library&#39;
    versionidentifier: &#39;1.18@1.18.0.0&#39;
    timeout:           120
    remote:            &quot;1&quot;
    upload:            &quot;1&quot;
    localpath:         &#39;/vagrant/jersey-bundle-1.18.war&#39;
  &#39;CustomerA_Partition:PartitionResourceGroupProducts:webapp&#39;:
    ensure:            &#39;present&#39;
    deploymenttype:    &#39;AppDeployment&#39;
    timeout:           120
    remote:            &quot;1&quot;
    upload:            &quot;1&quot;
    localpath:         &#39;/vagrant/webapp.war&#39;
    require:
       - Wls_domain_partition_resource_group_deployment[CustomerA_Partition:PartitionResourceGroupProducts:jersey-bundle]</code></pre>

<h3 id="label-wls_domain_partition_control">wls_domain_partition_control</h3>

<p>start or stop a domain partition</p>

<pre class="code ruby"><code class="ruby">&#39;StartCustomerA_Partition&#39;:
     ensure:                      &#39;start&#39;
     domain_partition:            &#39;CustomerA_Partition&#39;
     os_user:                     *wls_os_user
     middleware_home_dir:         *wls_middleware_home_dir
     weblogic_user:               *wls_weblogic_user
     weblogic_password:           *domain_wls_password
     adminserver_address:         *domain_adminserver_address
     adminserver_port:            *domain_adminserver_port
     require:
        - Wls_domain_partition[CustomerA_Partition]
&#39;StartCustomerB_Partition&#39;:
     ensure:                      &#39;stop&#39;
     domain_partition:            &#39;CustomerB_Partition&#39;
     os_user:                     *wls_os_user
     middleware_home_dir:         *wls_middleware_home_dir
     weblogic_user:               *wls_weblogic_user
     weblogic_password:           *domain_wls_password
     adminserver_address:         *domain_adminserver_address
     adminserver_port:            *domain_adminserver_port
     require:
        - Wls_domain_partition[CustomerB_Partition]</code></pre>
</div></div>

      <div id="footer">
  Generated on Sun Mar  5 20:34:31 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.8 (ruby-2.3.1).
</div>

    </div>
  </body>
</html>